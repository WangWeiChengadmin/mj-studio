import{f as j,R as L,S as M,m as v,q as N,i as k,w as c,o as n,a as o,c as r,b as a,z as V,j as l,d as b,k as q,F as w,r as Q,t as u,v as C,h as _}from"./DZ_1_TWT.js";import{_ as R}from"./Ptiozo9H.js";import{u as A}from"./CJsX1qrP.js";import"./DTXzf-yb.js";import"./2BvrFYEm.js";import"./CHEUhdok.js";const D={class:"mb-4 flex items-center justify-between"},E={key:0,class:"text-center py-12"},K={key:1,class:"text-center py-12"},O={key:2,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},G=["onClick"],H={class:"flex items-center justify-between mb-2"},J={class:"text-(--ui-text) font-medium truncate min-w-0"},W={class:"text-(--ui-text-dimmed) text-sm truncate"},X={class:"mt-3 flex flex-wrap gap-2"},Y={key:0,class:"text-xs px-2 py-1 rounded bg-(--ui-bg-muted) text-(--ui-text-muted)"},Z={key:1,class:"text-xs px-2 py-1 rounded bg-blue-500/10 text-blue-600 dark:text-blue-400"},ee={class:"flex items-center gap-2 text-sm"},te={class:"text-(--ui-text-muted)"},se={class:"text-(--ui-text)"},oe={key:1,class:"text-(--ui-text-dimmed)"},ue=j({__name:"index",setup(ne){const{upstreams:y,isLoading:$,loadUpstreams:B,moveToTop:T,queryBalance:z}=A(),m=L(),x=M(),f=v(new Set),g=v(new Set);N(()=>{B()});async function F(s){g.value.add(s);try{await T(s)}catch(e){m.add({title:"æ“ä½œå¤±è´¥",description:e.data?.message||e.message,color:"error"})}finally{g.value.delete(s)}}function p(s){if(!s)return{image:0,chat:0};const e=s.filter(i=>!i.category||i.category==="image").length,d=s.filter(i=>i.category==="chat").length;return{image:e,chat:d}}async function I(s){f.value.add(s);try{const e=await z(s);e.success?m.add({title:"ä½™é¢æŸ¥è¯¢æˆåŠŸ",color:"success"}):m.add({title:"æŸ¥è¯¢å¤±è´¥",description:e.error,color:"error"})}catch(e){m.add({title:"æŸ¥è¯¢å¤±è´¥",description:e.data?.message||e.message,color:"error"})}finally{f.value.delete(s)}}function P(s){if(s==null)return"æœªæŸ¥è¯¢";const e=s/5e5;return e>=1e3?`Â¥${(e/1e3).toFixed(1)}K`:e>=1?`Â¥${e.toFixed(2)}`:`Â¥${e.toFixed(4)}`}const S={oneapi:"OneAPI",n1n:"n1n",yunwu:"äº‘é›¾"};return(s,e)=>{const d=q,i=V,U=R;return n(),k(U,null,{default:c(()=>[o("div",D,[e[5]||(e[5]=o("h2",{class:"text-lg font-medium text-(--ui-text)"},"ä¸Šæ¸¸é…ç½®",-1)),a(i,{size:"sm",onClick:e[0]||(e[0]=t=>l(x).push("/settings/upstreams/new"))},{default:c(()=>[a(d,{name:"i-heroicons-plus",class:"w-4 h-4 mr-1"}),e[4]||(e[4]=b(" æ·»åŠ  ",-1))]),_:1})]),l($)?(n(),r("div",E,[a(d,{name:"i-heroicons-arrow-path",class:"w-8 h-8 text-(--ui-text-dimmed) animate-spin"})])):l(y).length===0?(n(),r("div",K,[a(d,{name:"i-heroicons-cpu-chip",class:"w-16 h-16 text-(--ui-text-dimmed)/50 mx-auto mb-4"}),e[7]||(e[7]=o("p",{class:"text-(--ui-text-muted) mb-4"},"è¿˜æ²¡æœ‰ä¸Šæ¸¸é…ç½®",-1)),a(i,{onClick:e[1]||(e[1]=t=>l(x).push("/settings/upstreams/new"))},{default:c(()=>[...e[6]||(e[6]=[b("æ·»åŠ ç¬¬ä¸€ä¸ªé…ç½®",-1)])]),_:1})])):(n(),r("div",O,[(n(!0),r(w,null,Q(l(y),t=>(n(),r("div",{key:t.id,class:"bg-(--ui-bg-elevated) rounded-lg p-6 border border-(--ui-border) hover:border-(--ui-border-accented) transition-colors cursor-pointer flex flex-col",onClick:h=>l(x).push(`/settings/upstreams/${t.id}`)},[o("div",H,[o("h3",J,u(t.name),1),o("div",{class:"flex gap-1 shrink-0",onClick:e[2]||(e[2]=C(()=>{},["stop"]))},[a(i,{size:"xs",variant:"ghost",color:"neutral",title:"ç½®é¡¶",loading:l(g).has(t.id),onClick:h=>F(t.id)},{default:c(()=>[a(d,{name:"i-heroicons-arrow-up-circle",class:"w-4 h-4"})]),_:1},8,["loading","onClick"]),a(i,{size:"xs",variant:"ghost",color:"neutral",onClick:h=>l(x).push(`/settings/upstreams/${t.id}`)},{default:c(()=>[a(d,{name:"i-heroicons-pencil",class:"w-4 h-4"})]),_:1},8,["onClick"])])]),o("p",W,u(t.baseUrl),1),o("div",X,[p(t.aimodels).image>0?(n(),r("span",Y," ðŸŽ¨ "+u(p(t.aimodels).image),1)):_("",!0),p(t.aimodels).chat>0?(n(),r("span",Z," ðŸ’¬ "+u(p(t.aimodels).chat),1)):_("",!0)]),o("div",{class:"mt-3 pt-3 border-t border-(--ui-border) flex items-center justify-between",onClick:e[3]||(e[3]=C(()=>{},["stop"]))},[o("div",ee,[t.upstreamPlatform?(n(),r(w,{key:0},[o("span",te,u(S[t.upstreamPlatform]||t.upstreamPlatform),1),e[8]||(e[8]=o("span",{class:"text-(--ui-text-dimmed)"},"Â·",-1)),o("span",se,u(P(t.upstreamInfo?.quota)),1)],64)):(n(),r("span",oe,"æœªé…ç½®å¹³å°"))]),t.upstreamPlatform?(n(),k(i,{key:0,size:"xs",variant:"ghost",color:"neutral",loading:l(f).has(t.id),onClick:h=>I(t.id)},{default:c(()=>[a(d,{name:"i-heroicons-arrow-path",class:"w-3.5 h-3.5"})]),_:1},8,["loading","onClick"])):_("",!0)])],8,G))),128))]))]),_:1})}}});export{ue as default};
