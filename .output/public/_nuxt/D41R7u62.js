import{bs as x,m as f,g as O,aU as w,f as P,Y as U,X as q,aK as B,W as N,i as D,o as G,w as I,b as M,j as d,P as L,N as V}from"./DZ_1_TWT.js";function K(e){const o=x({dir:f("ltr")});return O(()=>e?.value||o.dir?.value||"ltr")}const Y="rovingFocusGroup.onEntryFocus",j={bubbles:!1,cancelable:!0},k={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function J(e,o,a){const t=$(e.key,a);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return k[t]}function z(e,o=!1){const a=w();for(const t of e)if(t===a||(t.focus({preventScroll:o}),w()!==a))return}function Q(e,o){return e.map((a,t)=>e[(o+t)%e.length])}const[Z,H]=N("RovingFocusGroup");var W=P({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:o,emit:a}){const t=e,g=a,{loop:S,orientation:m,dir:T}=U(t),b=K(T),p=q(t,"currentTabStopId",g,{defaultValue:t.defaultCurrentTabStopId,passive:t.currentTabStopId===void 0}),i=f(!1),l=f(!1),v=f(0),{getItems:F,CollectionSlot:A}=B({isProvider:!0});function C(r){const s=!l.value;if(r.currentTarget&&r.target===r.currentTarget&&s&&!i.value){const u=new CustomEvent(Y,j);if(r.currentTarget.dispatchEvent(u),g("entryFocus",u),!u.defaultPrevented){const c=F().map(n=>n.ref).filter(n=>n.dataset.disabled!==""),E=c.find(n=>n.getAttribute("data-active")===""),_=c.find(n=>n.getAttribute("data-highlighted")===""),y=c.find(n=>n.id===p.value),R=[E,_,y,...c].filter(Boolean);z(R,t.preventScrollOnEntryFocus)}}l.value=!1}function h(){setTimeout(()=>{l.value=!1},1)}return o({getItems:F}),H({loop:S,dir:b,orientation:m,currentTabStopId:p,onItemFocus:r=>{p.value=r},onItemShiftTab:()=>{i.value=!0},onFocusableItemAdd:()=>{v.value++},onFocusableItemRemove:()=>{v.value--}}),(r,s)=>(G(),D(d(A),null,{default:I(()=>[M(d(L),{tabindex:i.value||v.value===0?-1:0,"data-orientation":d(m),as:r.as,"as-child":r.asChild,dir:d(b),style:{outline:"none"},onMousedown:s[0]||(s[0]=u=>l.value=!0),onMouseup:h,onFocus:C,onBlur:s[1]||(s[1]=u=>i.value=!1)},{default:I(()=>[V(r.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),ee=W;export{k as M,ee as R,z as f,J as g,Z as i,K as u,Q as w};
