import{f as v,B as w,R as h,m as b,O as _,i as k,w as V,V as C,o as d,a as e,t as u,j as s,v as B,c,h as M,E as p,G as x,d as S,U as T}from"./DZ_1_TWT.js";const U={class:"min-h-screen bg-(--ui-bg) flex items-center justify-center p-6"},A={class:"w-full max-w-sm"},j={class:"bg-(--ui-bg-elevated) backdrop-blur-sm rounded-lg p-8 border border-(--ui-border) shadow-2xl"},N={class:"text-xl font-semibold text-(--ui-text) mb-6 text-center"},z={key:0},D=["disabled"],E={key:0,class:"flex items-center justify-center gap-2"},L={key:1},O={class:"mt-6 text-center"},G={class:"text-(--ui-text-dimmed) text-sm"},J=v({__name:"login",setup(H){const{login:f}=w(),m=h(),i=b(!0),a=b(!1),o=_({email:"",password:"",name:""});async function g(){if(!o.email||!o.password){m.add({title:"请填写邮箱和密码",color:"error"});return}a.value=!0;try{const r=i.value?"/api/auth/login":"/api/auth/register",t=i.value?{email:o.email,password:o.password}:{email:o.email,password:o.password,name:o.name},n=await $fetch(r,{method:"POST",body:t});f(n.token,n.user),m.add({title:i.value?"登录成功":"注册成功",color:"success"}),await T("/")}catch(r){m.add({title:i.value?"登录失败":"注册失败",description:r.data?.message||r.message,color:"error"})}finally{a.value=!1}}function y(){i.value=!i.value,o.name=""}return(r,t)=>{const n=C;return d(),k(n,null,{default:V(()=>[e("div",U,[e("div",A,[t[7]||(t[7]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-4xl font-bold text-(--ui-text) mb-2"},[e("span",{class:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"}," MJ Studio ")]),e("p",{class:"text-(--ui-text-muted)"},"多模型 AI 绘图工作台")],-1)),e("div",j,[e("h2",N,u(s(i)?"登录账号":"注册账号"),1),e("form",{onSubmit:B(g,["prevent"]),class:"space-y-5"},[s(i)?M("",!0):(d(),c("div",z,[t[3]||(t[3]=e("label",{class:"block text-(--ui-text-toned) text-sm mb-2 font-medium"},"昵称",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(o).name=l),type:"text",placeholder:"输入昵称（可选）",class:"w-full px-4 py-3 rounded-lg bg-(--ui-bg-muted) border border-(--ui-border) text-(--ui-text) placeholder-(--ui-text-dimmed) focus:outline-none focus:border-(--ui-primary) focus:ring-1 focus:ring-(--ui-primary) transition-colors"},null,512),[[x,s(o).name]])])),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-(--ui-text-toned) text-sm mb-2 font-medium"},"邮箱",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s(o).email=l),type:"email",placeholder:"输入邮箱",class:"w-full px-4 py-3 rounded-lg bg-(--ui-bg-muted) border border-(--ui-border) text-(--ui-text) placeholder-(--ui-text-dimmed) focus:outline-none focus:border-(--ui-primary) focus:ring-1 focus:ring-(--ui-primary) transition-colors"},null,512),[[x,s(o).email]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-(--ui-text-toned) text-sm mb-2 font-medium"},"密码",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).password=l),type:"password",placeholder:"输入密码",class:"w-full px-4 py-3 rounded-lg bg-(--ui-bg-muted) border border-(--ui-border) text-(--ui-text) placeholder-(--ui-text-dimmed) focus:outline-none focus:border-(--ui-primary) focus:ring-1 focus:ring-(--ui-primary) transition-colors"},null,512),[[x,s(o).password]])]),e("button",{type:"submit",disabled:s(a),class:"w-full py-3 px-4 rounded-lg font-medium text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed mt-2"},[s(a)?(d(),c("span",E,[...t[6]||(t[6]=[e("svg",{class:"animate-spin h-5 w-5",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),S(" 处理中... ",-1)])])):(d(),c("span",L,u(s(i)?"登录":"注册"),1))],8,D)],32),e("div",O,[e("span",G,u(s(i)?"还没有账号？":"已有账号？"),1),e("button",{type:"button",class:"text-(--ui-primary) hover:opacity-80 text-sm ml-1 font-medium",onClick:y},u(s(i)?"立即注册":"立即登录"),1)])])])])]),_:1})}}});export{J as default};
