import{f as ue,c as d,F as H,a as o,b as a,w as x,t as b,h as z,r as de,n as A,z as pe,o as u,k as me,d as Y,j as t,_ as fe,m as k,T as Ie,S as Se,R as Te,g as le,p as re,q as Ne,s as ze,i as ie,v as Re,x as Pe,ae as Ve,y as ce,E as Q,G as Z,I as je}from"./DZ_1_TWT.js";import{u as Ee}from"./CiEDGshs.js";import{_ as Be}from"./CPI9yk3n.js";import{_ as De}from"./CzGMH1O9.js";import{u as Me,_ as He,a as Ae,b as Le,c as Oe,d as j,P as E}from"./DffvPA4m.js";import{u as Fe}from"./CJsX1qrP.js";import"./DDAgXY8S.js";import"./Cl2C_jUo.js";const We={class:"p-2"},Xe={class:"flex-1 flex items-center justify-center"},Ye=["title"],Ke={class:"p-2 space-y-2"},qe={class:"p-3 border-b border-(--ui-border) flex items-center gap-2"},Ge=["title"],Je={key:0,class:"text-yellow-500 text-sm"},Qe={class:"p-3 border-b border-(--ui-border) flex gap-2"},Ze={class:"flex-1 overflow-hidden flex flex-col"},et={class:"flex-1 overflow-y-auto"},tt={key:0,class:"px-3 py-4 text-center text-sm text-(--ui-text-dimmed)"},st=["onClick"],ot={class:"flex-1 text-sm truncate"},at={class:"text-xs text-(--ui-text-dimmed)"},nt=ue({__name:"Sidebar",props:{workflowName:{},runs:{default:()=>[]},currentRunId:{default:null},hasChanges:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1},isCollapsed:{type:Boolean,default:!1}},emits:["run","save","select-run","toggle-collapse"],setup(f,{emit:$}){const w=$;function I(S){switch(S){case"running":return"i-heroicons-arrow-path";case"paused":return"i-heroicons-pause-circle";case"completed":return"i-heroicons-check-circle";case"failed":return"i-heroicons-x-circle";case"cancelled":return"i-heroicons-stop-circle";default:return"i-heroicons-clock"}}function y(S){switch(S){case"running":return"text-blue-500";case"paused":return"text-yellow-500";case"completed":return"text-green-500";case"failed":return"text-red-500";case"cancelled":return"text-gray-500";default:return"text-(--ui-text-muted)"}}const{formatTimeAgo:B}=Ee();return(S,n)=>{const C=me,T=pe;return u(),d("div",{class:A(["workflow-sidebar h-full flex flex-col border-r border-(--ui-border) bg-(--ui-bg-elevated) transition-all duration-200",f.isCollapsed?"w-12":"w-[280px]"])},[f.isCollapsed?(u(),d(H,{key:0},[o("div",We,[a(T,{variant:"ghost",size:"sm",class:"w-full",onClick:n[0]||(n[0]=r=>w("toggle-collapse"))},{default:x(()=>[a(C,{name:"i-heroicons-bars-3",class:"w-5 h-5"})]),_:1})]),o("div",Xe,[o("span",{class:"text-xs font-medium text-(--ui-text-muted) writing-vertical-lr transform rotate-180 truncate max-h-32",title:f.workflowName},b(f.workflowName),9,Ye)]),o("div",Ke,[a(T,{color:"primary",size:"sm",class:"w-full",onClick:n[1]||(n[1]=r=>w("run"))},{default:x(()=>[a(C,{name:"i-heroicons-play",class:"w-4 h-4"})]),_:1}),a(T,{variant:"outline",size:"sm",class:"w-full",loading:f.isSaving,disabled:!f.hasChanges,onClick:n[2]||(n[2]=r=>w("save"))},{default:x(()=>[a(C,{name:"i-heroicons-cloud-arrow-up",class:"w-4 h-4"})]),_:1},8,["loading","disabled"])])],64)):(u(),d(H,{key:1},[o("div",qe,[o("h2",{class:"flex-1 font-medium text-sm truncate",title:f.workflowName},b(f.workflowName),9,Ge),f.hasChanges?(u(),d("span",Je,"*")):z("",!0),a(T,{variant:"ghost",size:"xs",onClick:n[3]||(n[3]=r=>w("toggle-collapse"))},{default:x(()=>[a(C,{name:"i-heroicons-chevron-left",class:"w-4 h-4"})]),_:1})]),o("div",Qe,[a(T,{color:"primary",size:"sm",class:"flex-1",onClick:n[4]||(n[4]=r=>w("run"))},{default:x(()=>[a(C,{name:"i-heroicons-play",class:"w-4 h-4 mr-1"}),n[6]||(n[6]=Y(" 运行 ",-1))]),_:1}),a(T,{variant:"outline",size:"sm",loading:f.isSaving,disabled:!f.hasChanges,onClick:n[5]||(n[5]=r=>w("save"))},{default:x(()=>[a(C,{name:"i-heroicons-cloud-arrow-up",class:"w-4 h-4 mr-1"}),n[7]||(n[7]=Y(" 保存 ",-1))]),_:1},8,["loading","disabled"])]),o("div",Ze,[n[8]||(n[8]=o("div",{class:"px-3 py-2 text-xs font-medium text-(--ui-text-muted)"}," 运行历史 ",-1)),o("div",et,[f.runs.length===0?(u(),d("div",tt," 暂无运行记录 ")):z("",!0),(u(!0),d(H,null,de(f.runs,r=>(u(),d("div",{key:r.id,class:A(["px-3 py-2 cursor-pointer hover:bg-(--ui-bg-accented) transition-colors flex items-center gap-2",{"bg-(--ui-bg-accented)":r.id===f.currentRunId}]),onClick:c=>w("select-run",r.id)},[a(C,{name:I(r.status),class:A(["w-4 h-4 flex-shrink-0",[y(r.status),r.status==="running"&&"animate-spin"]])},null,8,["name","class"]),o("span",ot," #"+b(r.id),1),o("span",at,b(t(B)(r.createdAt)),1)],10,st))),128))])])],64))],2)}}}),lt=Object.assign(fe(nt,[["__scopeId","data-v-6577234c"]]),{__name:"WorkflowSidebar"});function rt(){const f=k(new Map),$=k(new Map),w=k(!1);function I(r){return f.value.get(r)}function y(r,c){const g=f.value.get(r)||{nodeId:r,status:"idle"};f.value.set(r,{...g,...c})}function B(){f.value.clear(),$.value.forEach(r=>clearTimeout(r)),$.value.clear(),w.value=!1}async function S(r,c){return new Promise(g=>{const h=async()=>{try{const U=await $fetch(`/api/tasks/${c}`);if(U.status==="success"){y(r,{status:"success",progress:100,resultUrl:U.resourceUrl||void 0}),$.value.delete(c),g();return}if(U.status==="failed"||U.status==="cancelled"){y(r,{status:"failed",error:U.error||"任务失败"}),$.value.delete(c),g();return}if(U.progress){const K=parseInt(U.progress.replace("%",""),10)||0;y(r,{progress:K})}const V=setTimeout(h,3e3);$.value.set(c,V)}catch(U){console.error("轮询任务失败:",U);const V=setTimeout(h,5e3);$.value.set(c,V)}};h()})}async function n(r,c){y(c,{status:"pending"});try{const g=await $fetch(`/api/workflows/${r}/run-node`,{method:"POST",body:{nodeId:c}});if(!g.success){y(c,{status:"failed",error:"执行失败"});return}const{data:h}=g;if(h.status==="failed"){y(c,{status:"failed",error:h.error||"执行失败"});return}h.taskId&&(y(c,{status:"processing",taskId:h.taskId}),await S(c,h.taskId))}catch(g){y(c,{status:"failed",error:g.data?.message||g.message||"执行失败"})}}async function C(r){if(!w.value){w.value=!0,B();try{const c=await $fetch(`/api/workflows/${r}/run`,{method:"POST"});if(!c.success)throw new Error("工作流执行失败");const g=[];for(const h of c.data)y(h.nodeId,{status:h.status,taskId:h.taskId,error:h.error}),h.taskId&&h.status==="processing"&&g.push(S(h.nodeId,h.taskId));await Promise.all(g)}catch(c){console.error("工作流执行失败:",c)}finally{w.value=!1}}}function T(){$.value.forEach(r=>clearTimeout(r)),$.value.clear()}return{nodeStates:f,isExecuting:w,getNodeState:I,updateNodeState:y,resetAllStates:B,executeWorkflow:C,executeSingleNode:n,cleanup:T}}const it={class:"flex-1 flex flex-col min-w-0"},ct={key:0,class:"flex-1 flex items-center justify-center"},ut={class:"workflow-node node-input"},dt={class:"node-header"},pt={class:"node-content"},mt=["onClick"],ft=["src"],ht=["onClick"],wt={class:"node-header node-header-gen"},gt={key:0,class:"ml-auto"},vt={key:1,class:"ml-auto"},xt={key:2,class:"ml-auto"},yt={class:"node-content"},_t={class:"mb-2 nodrag"},kt=["onUpdate:modelValue"],bt={key:0,class:"mt-2"},$t=["src"],Ct=["title"],Ut={class:"node-header node-header-video"},It={key:0,class:"ml-auto"},St={key:1,class:"ml-auto"},Tt={key:2,class:"ml-auto"},Nt={class:"node-content"},zt={class:"mb-2 nodrag"},Rt=["onUpdate:modelValue"],Pt={key:0,class:"mt-2"},Vt=["src"],jt=["title"],Et={class:"workflow-node node-text"},Bt={class:"node-header node-header-text"},Dt={class:"node-content"},Mt=["onUpdate:modelValue"],Ht={class:"workflow-node node-preview"},At={class:"node-header node-header-preview"},Lt={class:"node-content"},Ot=["src"],Ft=["src"],Wt={key:1,class:"preview-area"},Xt={class:"h-full w-full flex items-center justify-center"},Yt=["onClick"],Kt=ue({__name:"[id]",setup(f){const $=Ie(),w=Se(),I=Te(),{upstreams:y,loadUpstreams:B}=Fe(),{nodeStates:S,getNodeState:n,executeSingleNode:C,cleanup:T}=rt(),r=le(()=>Number($.params.id)),c=k(null),g=k(!0),h=le(()=>c.value?.workflow);async function U(){g.value=!0;try{const e=await $fetch(`/api/workflows/${r.value}`);c.value=e.data}catch(e){I.add({title:"工作流加载失败",description:e.data?.message,color:"error"}),w.push("/workflows")}finally{g.value=!1}}const V=k([]);async function K(){try{const e=await $fetch(`/api/workflows/${r.value}/runs`);V.value=e.data||[]}catch{V.value=[]}}const q=k(!1);function he(){q.value=!q.value}function we(e){w.push(`/workflow-run/${e}`)}async function ge(){if(c.value){O.value&&await F();try{const e=await $fetch(`/api/workflows/${r.value}/run`,{method:"POST"});w.push(`/workflow-run/${e.runId}`)}catch(e){I.add({title:"运行失败",description:e.data?.message,color:"error"})}}}const N=k([]),R=k([]),{project:ve,fitView:xe,getViewport:ye}=Me();re(h,e=>{e&&(N.value=e.nodes.map(l=>({...l,data:{...l.data}})),R.value=e.edges.map(l=>({...l,animated:!0,style:{stroke:"#60a5fa"}})),je(()=>{setTimeout(()=>xe({padding:.2}),100)}))},{immediate:!0});const L=k(!1),O=k(!1),_e=k(!1);let G=null;re([N,R],()=>{O.value=!0,_e.value&&!L.value&&(G&&clearTimeout(G),G=setTimeout(()=>{F()},2e3))},{deep:!0});async function F(){if(c.value){L.value=!0;try{const e=ye(),l={version:"1.0.0",name:c.value.name,description:c.value.description,nodes:N.value.map(p=>({id:p.id,type:p.type,position:p.position,data:p.data})),edges:R.value.map(p=>({id:p.id,source:p.source,target:p.target,sourceHandle:p.sourceHandle,targetHandle:p.targetHandle})),viewport:{x:e.x,y:e.y,zoom:e.zoom}};await $fetch(`/api/workflows/${r.value}`,{method:"PUT",body:{data:l}}),O.value=!1,I.add({title:"已保存",color:"success"})}catch(e){I.add({title:"保存失败",description:e.data?.message,color:"error"})}finally{L.value=!1}}}function ke(e){const l={id:`e-${Date.now()}`,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,animated:!0,style:{stroke:"#60a5fa"}};R.value.push(l)}const P=k({show:!1,x:0,y:0,worldX:0,worldY:0}),be=[{type:"input-image",label:"图片输入",icon:"i-heroicons-photo"},{type:"gen-image",label:"AI 图像生成",icon:"i-heroicons-sparkles"},{type:"gen-video",label:"AI 视频生成",icon:"i-heroicons-film"},{type:"text-node",label:"文本节点",icon:"i-heroicons-document-text"},{type:"preview",label:"预览节点",icon:"i-heroicons-eye"}];function $e(e){e.preventDefault();const l=ve({x:e.clientX,y:e.clientY});P.value={show:!0,x:e.clientX,y:e.clientY,worldX:l.x,worldY:l.y}}function Ce(e){const l=`${e}-${Date.now()}`,p={"input-image":"图片输入","gen-image":"AI 图像生成","gen-video":"AI 视频生成","text-node":"提示词",preview:"预览"};N.value.push({id:l,type:e,position:{x:P.value.worldX-100,y:P.value.worldY-50},data:{label:p[e]||e}}),P.value.show=!1}function ee(){P.value.show=!1}function te(e){(e.metaKey||e.ctrlKey)&&e.key==="s"&&(e.preventDefault(),F())}function W(e,l,p){const i=N.value.find(v=>v.id===e);i&&(i.data[l]=p)}async function se(e){try{await C(r.value,e)}catch(l){I.add({title:"执行失败",description:l.message,color:"error"})}}function oe(e){const l=n(e);if(!l)return"";switch(l.status){case"pending":case"processing":return"node-processing";case"success":return"node-success";case"failed":return"node-failed";default:return""}}function D(e){const l=R.value.filter(p=>p.target===e);for(const p of l){const i=N.value.find(v=>v.id===p.source);if(i){if(i.type==="input-image"&&i.data.imageUrl)return{type:"image",url:i.data.imageUrl};if(i.type==="gen-image"){const v=S.value.get(i.id);if(v?.resultUrl)return{type:"image",url:v.resultUrl}}if(i.type==="gen-video"){const v=S.value.get(i.id);if(v?.resultUrl)return{type:"video",url:v.resultUrl}}}}return null}const ae=k(null),X=k(null);function ne(e){X.value=e,ae.value?.click()}async function Ue(e){const l=e.target,p=l.files?.[0];if(!p||!X.value)return;const i=new FormData;i.append("file",p);try{const v=await $fetch("/api/images/upload",{method:"POST",body:i});if(v.success){const M=N.value.find(J=>J.id===X.value);M&&(M.data.imageUrl=v.url)}}catch(v){I.add({title:"上传失败",description:v.message,color:"error"})}finally{X.value=null,l.value=""}}return Ne(()=>{U(),B(),K(),window.addEventListener("keydown",te)}),ze(()=>{window.removeEventListener("keydown",te),T()}),(e,l)=>{const p=lt,i=me,v=Be,M=pe,J=De;return u(),d("div",{class:"workflow-page flex h-[calc(100vh-56px)] bg-(--ui-bg) overflow-hidden",onClick:ee},[o("input",{ref_key:"fileInput",ref:ae,type:"file",accept:"image/*",class:"hidden",onChange:Ue},null,544),a(p,{"workflow-name":t(c)?.name||"工作流",runs:t(V),"has-changes":t(O),"is-saving":t(L),"is-collapsed":t(q),onRun:ge,onSave:F,onSelectRun:we,onToggleCollapse:he},null,8,["workflow-name","runs","has-changes","is-saving","is-collapsed"]),o("div",it,[t(g)?(u(),d("div",ct,[a(i,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-(--ui-text-muted)"})])):(u(),ie(J,{key:1},{fallback:x(()=>[o("div",Xt,[a(i,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-zinc-500"})])]),default:x(()=>[a(t(He),{nodes:t(N),"onUpdate:nodes":l[0]||(l[0]=s=>ce(N)?N.value=s:null),edges:t(R),"onUpdate:edges":l[1]||(l[1]=s=>ce(R)?R.value=s:null),"default-viewport":t(h)?.viewport||{x:0,y:0,zoom:1},"min-zoom":.2,"max-zoom":3,"snap-to-grid":!0,"snap-grid":[15,15],"delete-key-code":["Backspace","Delete"],class:"workflow-canvas",onConnect:ke,onPaneContextMenu:$e,onPaneClick:ee},{"node-input-image":x(({id:s,data:m})=>[o("div",ut,[o("div",dt,[a(i,{name:"i-heroicons-photo",class:"w-4 h-4"}),o("span",null,b(m.label),1)]),o("div",pt,[m.imageUrl?(u(),d("div",{key:0,class:"upload-area has-image",onClick:_=>ne(s)},[o("img",{src:m.imageUrl,class:"w-full h-full object-cover rounded"},null,8,ft)],8,mt)):(u(),d("div",{key:1,class:"upload-area",onClick:_=>ne(s)},[a(i,{name:"i-heroicons-arrow-up-tray",class:"w-8 h-8 text-(--ui-text-muted)"}),l[3]||(l[3]=o("span",{class:"text-xs text-(--ui-text-muted)"},"点击上传图片",-1))],8,ht))]),a(t(j),{type:"source",position:t(E).Right,class:"handle-source"},null,8,["position"])])]),"node-gen-image":x(({id:s,data:m})=>[o("div",{class:A(["workflow-node node-gen",oe(s)])},[o("div",wt,[a(i,{name:"i-heroicons-sparkles",class:"w-4 h-4"}),o("span",null,b(m.label),1),t(n)(s)?.status==="processing"?(u(),d("span",gt,[a(i,{name:"i-heroicons-arrow-path",class:"w-3 h-3 animate-spin text-blue-400"})])):t(n)(s)?.status==="success"?(u(),d("span",vt,[a(i,{name:"i-heroicons-check-circle",class:"w-3 h-3 text-green-400"})])):t(n)(s)?.status==="failed"?(u(),d("span",xt,[a(i,{name:"i-heroicons-x-circle",class:"w-3 h-3 text-red-400"})])):z("",!0)]),o("div",yt,[o("div",_t,[a(v,{upstreams:t(y),category:"image","show-type-label":"","list-layout":"","dropdown-width":"w-64","upstream-id":m.upstreamId||null,"aimodel-id":m.aimodelId||null,"onUpdate:upstreamId":_=>W(s,"upstreamId",_),"onUpdate:aimodelId":_=>W(s,"aimodelId",_)},null,8,["upstreams","upstream-id","aimodel-id","onUpdate:upstreamId","onUpdate:aimodelId"])]),o("div",null,[l[4]||(l[4]=o("label",{class:"text-[10px] text-(--ui-text-muted) block mb-1"},"提示词",-1)),Q(o("textarea",{"onUpdate:modelValue":_=>m.prompt=_,class:"node-textarea nodrag",placeholder:"输入提示词..."},null,8,kt),[[Z,m.prompt]])]),t(n)(s)?.resultUrl?(u(),d("div",bt,[o("img",{src:t(n)(s)?.resultUrl,class:"w-full h-24 object-cover rounded"},null,8,$t)])):z("",!0),t(n)(s)?.error?(u(),d("div",{key:1,class:"mt-2 text-[10px] text-red-400 truncate",title:t(n)(s)?.error},b(t(n)(s)?.error),9,Ct)):z("",!0),a(M,{size:"xs",color:"primary",class:"w-full mt-2",loading:t(n)(s)?.status==="processing",disabled:!m.upstreamId||t(n)(s)?.status==="processing",onClick:_=>se(s)},{default:x(()=>[a(i,{name:"i-heroicons-play",class:"w-3 h-3 mr-1"}),Y(" "+b(t(n)(s)?.status==="processing"?"生成中...":"生成"),1)]),_:2},1032,["loading","disabled","onClick"])]),a(t(j),{type:"target",position:t(E).Left,class:"handle-target"},null,8,["position"]),a(t(j),{type:"source",position:t(E).Right,class:"handle-source"},null,8,["position"])],2)]),"node-gen-video":x(({id:s,data:m})=>[o("div",{class:A(["workflow-node node-video",oe(s)])},[o("div",Ut,[a(i,{name:"i-heroicons-film",class:"w-4 h-4"}),o("span",null,b(m.label),1),t(n)(s)?.status==="processing"?(u(),d("span",It,[a(i,{name:"i-heroicons-arrow-path",class:"w-3 h-3 animate-spin text-purple-400"})])):t(n)(s)?.status==="success"?(u(),d("span",St,[a(i,{name:"i-heroicons-check-circle",class:"w-3 h-3 text-green-400"})])):t(n)(s)?.status==="failed"?(u(),d("span",Tt,[a(i,{name:"i-heroicons-x-circle",class:"w-3 h-3 text-red-400"})])):z("",!0)]),o("div",Nt,[o("div",zt,[a(v,{upstreams:t(y),category:"video","show-type-label":"","list-layout":"","dropdown-width":"w-64","upstream-id":m.upstreamId||null,"aimodel-id":m.aimodelId||null,"onUpdate:upstreamId":_=>W(s,"upstreamId",_),"onUpdate:aimodelId":_=>W(s,"aimodelId",_)},null,8,["upstreams","upstream-id","aimodel-id","onUpdate:upstreamId","onUpdate:aimodelId"])]),o("div",null,[l[5]||(l[5]=o("label",{class:"text-[10px] text-(--ui-text-muted) block mb-1"},"提示词",-1)),Q(o("textarea",{"onUpdate:modelValue":_=>m.prompt=_,class:"node-textarea nodrag",placeholder:"输入视频描述..."},null,8,Rt),[[Z,m.prompt]])]),t(n)(s)?.resultUrl?(u(),d("div",Pt,[o("video",{src:t(n)(s)?.resultUrl,class:"w-full h-24 object-cover rounded",controls:""},null,8,Vt)])):z("",!0),t(n)(s)?.error?(u(),d("div",{key:1,class:"mt-2 text-[10px] text-red-400 truncate",title:t(n)(s)?.error},b(t(n)(s)?.error),9,jt)):z("",!0),a(M,{size:"xs",color:"secondary",class:"w-full mt-2",loading:t(n)(s)?.status==="processing",disabled:!m.upstreamId||t(n)(s)?.status==="processing",onClick:_=>se(s)},{default:x(()=>[a(i,{name:"i-heroicons-play",class:"w-3 h-3 mr-1"}),Y(" "+b(t(n)(s)?.status==="processing"?"生成中...":"生成视频"),1)]),_:2},1032,["loading","disabled","onClick"])]),a(t(j),{type:"target",position:t(E).Left,class:"handle-target"},null,8,["position"]),a(t(j),{type:"source",position:t(E).Right,class:"handle-source"},null,8,["position"])],2)]),"node-text-node":x(({data:s})=>[o("div",Et,[o("div",Bt,[a(i,{name:"i-heroicons-document-text",class:"w-4 h-4"}),o("span",null,b(s.label),1)]),o("div",Dt,[Q(o("textarea",{"onUpdate:modelValue":m=>s.text=m,class:"node-textarea h-20 nodrag",placeholder:"输入文本内容..."},null,8,Mt),[[Z,s.text]])]),a(t(j),{type:"source",position:t(E).Right,class:"handle-source"},null,8,["position"])])]),"node-preview":x(({id:s,data:m})=>[o("div",Ht,[o("div",At,[a(i,{name:"i-heroicons-eye",class:"w-4 h-4"}),o("span",null,b(m.label),1)]),o("div",Lt,[D(s)?(u(),d(H,{key:0},[D(s)?.type==="image"?(u(),d("img",{key:0,src:D(s)?.url,class:"w-full h-32 object-contain rounded bg-(--ui-bg-muted)"},null,8,Ot)):D(s)?.type==="video"?(u(),d("video",{key:1,src:D(s)?.url,class:"w-full h-32 object-contain rounded bg-(--ui-bg-muted)",controls:""},null,8,Ft)):z("",!0)],64)):(u(),d("div",Wt,[a(i,{name:"i-heroicons-photo",class:"w-12 h-12 text-(--ui-text-dimmed)"}),l[6]||(l[6]=o("span",{class:"text-xs text-(--ui-text-muted)"},"等待输入",-1))]))]),a(t(j),{type:"target",position:t(E).Left,class:"handle-target"},null,8,["position"])])]),default:x(()=>[a(t(Ae),{gap:20,size:1,class:"workflow-background"}),a(t(Le),{pannable:!0,zoomable:!0}),a(t(Oe),{"show-fit-view":!0,"show-interactive":!0})]),_:1},8,["nodes","edges","default-viewport"])]),_:1}))]),(u(),ie(Ve,{to:"body"},[t(P).show?(u(),d("div",{key:0,class:"context-menu",style:Pe({left:`${t(P).x}px`,top:`${t(P).y}px`}),onClick:l[2]||(l[2]=Re(()=>{},["stop"]))},[l[7]||(l[7]=o("div",{class:"context-menu-header"},"添加节点",-1)),(u(),d(H,null,de(be,s=>o("button",{key:s.type,class:"context-menu-item",onClick:m=>Ce(s.type)},[a(i,{name:s.icon,class:"w-4 h-4"},null,8,["name"]),o("span",null,b(s.label),1)],8,Yt)),64))],4)):z("",!0)]))])}}}),os=fe(Kt,[["__scopeId","data-v-95d1d79f"]]);export{os as default};
