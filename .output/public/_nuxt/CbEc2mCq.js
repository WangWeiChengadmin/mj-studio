import{f as R,R as O,O as U,m as k,q as M,i as V,w as a,o as c,a as e,c as b,b as n,z as G,j as i,d as l,k as N}from"./DZ_1_TWT.js";import{_ as C}from"./DRejpVBE.js";import{_ as L}from"./Ptiozo9H.js";import{U as r,q as I,r as A,s as $}from"./Cl2C_jUo.js";import{u as j}from"./BgmUBLD9.js";import"./DDAgXY8S.js";import"./DTXzf-yb.js";import"./2BvrFYEm.js";import"./CHEUhdok.js";const B={class:"mb-4 flex items-center justify-between"},F={key:0,class:"text-center py-12"},z={key:1,class:"space-y-6"},D={class:"bg-(--ui-bg-elevated) rounded-lg p-6 border border-(--ui-border)"},q={class:"flex items-center justify-between mb-3"},K={class:"bg-(--ui-bg-elevated) rounded-lg p-4 border border-(--ui-border)"},Y={class:"flex items-center justify-between mb-3"},H={class:"bg-(--ui-bg-elevated) rounded-lg p-4 border border-(--ui-border)"},J={class:"flex items-center justify-between mb-3"},it=R({__name:"prompts",setup(Q){const{settings:m,isLoading:P,isLoaded:T,loadSettings:_,updateSettings:v}=j(),f=O(),s=U({compressPrompt:"",generateTitlePrompt:"",suggestionsPrompt:""}),p=k(!1);M(async()=>{T.value||await _(),E()});function E(){s.compressPrompt=m.value[r.PROMPT_COMPRESS]||"",s.generateTitlePrompt=m.value[r.PROMPT_GENERATE_TITLE]||"",s.suggestionsPrompt=m.value[r.PROMPT_SUGGESTIONS]||""}async function S(){p.value=!0;try{await v({[r.PROMPT_COMPRESS]:s.compressPrompt,[r.PROMPT_GENERATE_TITLE]:s.generateTitlePrompt,[r.PROMPT_SUGGESTIONS]:s.suggestionsPrompt}),f.add({title:"设置已保存",color:"success"})}catch(u){f.add({title:"保存失败",description:u.message,color:"error"})}finally{p.value=!1}}function g(u){switch(u){case"compress":s.compressPrompt=$;break;case"title":s.generateTitlePrompt=A;break;case"suggestions":s.suggestionsPrompt=I;break}}return(u,t)=>{const d=G,w=N,x=C,y=L;return c(),V(y,null,{default:a(()=>[e("div",B,[t[7]||(t[7]=e("h2",{class:"text-lg font-medium text-(--ui-text)"},"Prompt 设置",-1)),n(d,{loading:i(p),onClick:S},{default:a(()=>[...t[6]||(t[6]=[l("保存",-1)])]),_:1},8,["loading"])]),i(P)?(c(),b("div",F,[n(w,{name:"i-heroicons-arrow-path",class:"w-8 h-8 text-(--ui-text-dimmed) animate-spin"})])):(c(),b("div",z,[e("div",D,[e("div",q,[t[9]||(t[9]=e("div",null,[e("h3",{class:"text-base font-medium text-(--ui-text)"},"对话压缩"),e("p",{class:"text-xs text-(--ui-text-muted) mt-1"},"当对话过长时，用于压缩历史消息为摘要")],-1)),n(d,{size:"xs",variant:"ghost",color:"neutral",onClick:t[0]||(t[0]=o=>g("compress"))},{default:a(()=>[...t[8]||(t[8]=[l(" 恢复默认 ",-1)])]),_:1})]),n(x,{modelValue:i(s).compressPrompt,"onUpdate:modelValue":t[1]||(t[1]=o=>i(s).compressPrompt=o),rows:8,class:"w-full"},null,8,["modelValue"]),t[10]||(t[10]=e("div",{class:"mt-2 p-2 rounded bg-(--ui-bg-muted) text-xs text-(--ui-text-muted)"},[e("p",{class:"font-medium mb-1"},"可用占位符："),e("p",null,[e("code",{class:"px-1 py-0.5 rounded bg-(--ui-bg-accented)"},"{messages}"),l(" - 待压缩的历史消息内容")])],-1))]),e("div",K,[e("div",Y,[t[12]||(t[12]=e("div",null,[e("h3",{class:"font-medium text-(--ui-text)"},"标题生成"),e("p",{class:"text-xs text-(--ui-text-muted) mt-1"},"用于自动生成对话标题")],-1)),n(d,{size:"xs",variant:"ghost",color:"neutral",onClick:t[2]||(t[2]=o=>g("title"))},{default:a(()=>[...t[11]||(t[11]=[l(" 恢复默认 ",-1)])]),_:1})]),n(x,{modelValue:i(s).generateTitlePrompt,"onUpdate:modelValue":t[3]||(t[3]=o=>i(s).generateTitlePrompt=o),rows:3,class:"w-full"},null,8,["modelValue"]),t[13]||(t[13]=e("div",{class:"mt-2 p-2 rounded bg-(--ui-bg-muted) text-xs text-(--ui-text-muted)"},[e("p",{class:"font-medium mb-1"},"可用占位符："),e("p",null,[e("code",{class:"px-1 py-0.5 rounded bg-(--ui-bg-accented)"},"{context}"),l(" - 对话上下文（前2条+后2条消息）")])],-1))]),e("div",H,[e("div",J,[t[15]||(t[15]=e("div",null,[e("h3",{class:"font-medium text-(--ui-text)"},"开场白建议"),e("p",{class:"text-xs text-(--ui-text-muted) mt-1"},"新对话时生成开场白建议")],-1)),n(d,{size:"xs",variant:"ghost",color:"neutral",onClick:t[4]||(t[4]=o=>g("suggestions"))},{default:a(()=>[...t[14]||(t[14]=[l(" 恢复默认 ",-1)])]),_:1})]),n(x,{modelValue:i(s).suggestionsPrompt,"onUpdate:modelValue":t[5]||(t[5]=o=>i(s).suggestionsPrompt=o),rows:8,class:"w-full"},null,8,["modelValue"]),t[16]||(t[16]=e("div",{class:"mt-2 p-2 rounded bg-(--ui-bg-muted) text-xs text-(--ui-text-muted)"},[e("p",{class:"font-medium mb-1"},"可用占位符："),e("p",null,[e("code",{class:"px-1 py-0.5 rounded bg-(--ui-bg-accented)"},"{time}"),l(" - 当前时间（格式：2025年12月26日星期四 15:30）")])],-1))])]))]),_:1})}}});export{it as default};
