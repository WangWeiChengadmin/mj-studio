import{B as f,C as a}from"./DZ_1_TWT.js";import{t as n,U as g}from"./Cl2C_jUo.js";function v(){const{getAuthHeader:o}=f(),e=a("user-settings",()=>({...n})),s=a("user-settings-loading",()=>!1),r=a("user-settings-loaded",()=>!1);async function i(){if(!s.value){s.value=!0;try{const t=await $fetch("/api/settings",{headers:o()});e.value=t,r.value=!0}catch(t){console.error("加载用户设置失败:",t)}finally{s.value=!1}}}async function u(t){const d=await $fetch("/api/settings",{method:"PUT",headers:o(),body:t});e.value=d}function c(t){return e.value[t]}async function l(t){await u({[t]:n[t]})}return{settings:e,isLoading:s,isLoaded:r,loadSettings:i,updateSettings:u,get:c,resetToDefault:l,USER_SETTING_KEYS:g,USER_SETTING_DEFAULTS:n}}export{v as u};
