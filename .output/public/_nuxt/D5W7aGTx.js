import{C as z,ac as U,J as L,a5 as P,be as V,g as I,i as m,o as s,w as t,b as e,k as x,j as l,n as B,a0 as T,z as A,bf as D,f as M,B as F,S as H,T as R,m as J,p as C,c as p,a as i,e as E,h as Q,F as S,r as W,t as $,d as G,N as K}from"./DZ_1_TWT.js";import{_ as X}from"./CzGMH1O9.js";import{_ as Y}from"./Ds9Pl6UP.js";import"./9BQeByXX.js";import"./D41R7u62.js";import"./CHEUhdok.js";import"./DDAgXY8S.js";const Z=()=>z("color-mode").value,ee=Object.assign({inheritAttrs:!1},{__name:"UColorModeButton",props:{color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"ghost"},label:{type:String,required:!1},activeColor:{type:null,required:!1},activeVariant:{type:null,required:!1},size:{type:null,required:!1},square:{type:Boolean,required:!1},block:{type:Boolean,required:!1},loadingAuto:{type:Boolean,required:!1},onClick:{type:[Function,Array],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1},as:{type:null,required:!1},type:{type:null,required:!1},disabled:{type:Boolean,required:!1},active:{type:Boolean,required:!1},exact:{type:Boolean,required:!1},exactQuery:{type:[Boolean,String],required:!1},exactHash:{type:Boolean,required:!1},inactiveClass:{type:String,required:!1},to:{type:null,required:!1},href:{type:null,required:!1},external:{type:Boolean,required:!1},target:{type:[String,Object,null],required:!1},rel:{type:[String,Object,null],required:!1},noRel:{type:Boolean,required:!1},prefetchedClass:{type:String,required:!1},prefetch:{type:Boolean,required:!1},prefetchOn:{type:[String,Object],required:!1},noPrefetch:{type:Boolean,required:!1},trailingSlash:{type:String,required:!1},activeClass:{type:String,required:!1},exactActiveClass:{type:String,required:!1},ariaCurrentValue:{type:String,required:!1},viewTransition:{type:Boolean,required:!1},replace:{type:Boolean,required:!1}},setup(h){const r=h,{t:o}=U(),u=Z(),y=L(),b=P(V(r,"icon")),a=I({get(){return u.value==="dark"},set(f){u.preference=f?"dark":"light"}});return(f,g)=>(s(),m(A,T({...l(b),"aria-label":a.value?l(o)("colorMode.switchToLight"):l(o)("colorMode.switchToDark"),...f.$attrs},{onClick:g[0]||(g[0]=_=>a.value=!a.value)}),{leading:t(({ui:_})=>[e(x,{class:B([_.leadingIcon({class:r.ui?.leadingIcon}),"hidden dark:inline"]),name:l(y).ui.icons.dark},null,8,["class","name"]),e(x,{class:B([_.leadingIcon({class:r.ui?.leadingIcon}),"inline dark:hidden"]),name:l(y).ui.icons.light},null,8,["class","name"])]),_:1},16))}}),ae=D("/logo.png"),te={class:"border-b border-(--ui-border) bg-(--ui-bg-elevated) flex-shrink-0"},se={class:"px-4 h-14 flex items-center justify-between"},le={class:"flex items-center gap-2"},re=["href"],ne={class:"hidden md:inline"},oe={class:"hidden md:inline"},ie=["src"],ue=M({__name:"AppHeader",props:{showNav:{type:Boolean,default:!0}},setup(h){const{user:r,loggedIn:o,logout:u}=F(),y=H(),b=R(),a=J(null);async function f(){if(o.value)try{a.value=await $fetch("/api/user")}catch{}}C(o,c=>{c?f():a.value=null},{immediate:!0}),C(r,c=>{c&&a.value&&(a.value={...a.value,name:c.name,avatar:c.avatar})},{deep:!0});const g=[{label:"创作",to:"/studio",icon:"i-heroicons-paint-brush"},{label:"工作流",to:"/workflows",icon:"i-heroicons-square-3-stack-3d"},{label:"对话",to:"/chat",icon:"i-heroicons-chat-bubble-left-right"},{label:"帮助",to:"/help/",icon:"i-heroicons-question-mark-circle",external:!0},{label:"设置",to:"/settings",icon:"i-heroicons-cog-6-tooth"}],_=I(()=>[{label:a.value?.name||r.value?.name||r.value?.email||"用户",disabled:!0},{type:"separator"},{label:"用户设置",icon:"i-heroicons-user",to:"/user"},{type:"separator"},{label:"退出登录",icon:"i-heroicons-arrow-right-on-rectangle",onSelect:j}]);function j(){u(),y.push("/login")}return(c,d)=>{const v=E,k=x,q=A,w=X,O=ee,N=Y;return s(),p("header",te,[i("div",se,[e(v,{to:"/",class:"flex items-center gap-2"},{default:t(()=>[...d[0]||(d[0]=[i("img",{src:ae,alt:"MJ Studio",class:"w-7 h-7"},null,-1),i("span",{class:"font-bold text-lg"},"MJ Studio",-1)])]),_:1}),i("div",le,[e(w,null,{default:t(()=>[l(o)&&h.showNav!==!1?(s(),p(S,{key:0},W(g,n=>(s(),p(S,{key:n.to},[n.external?(s(),p("a",{key:0,href:n.to},[e(q,{variant:"ghost",size:"sm"},{default:t(()=>[e(k,{name:n.icon,class:"w-4 h-4 md:mr-1"},null,8,["name"]),i("span",ne,$(n.label),1)]),_:2},1024)],8,re)):(s(),m(v,{key:1,to:n.to},{default:t(()=>[e(q,{variant:"ghost",size:"sm",class:B({"bg-(--ui-primary)/10 text-(--ui-primary)":l(b).path.startsWith(n.to)})},{default:t(()=>[e(k,{name:n.icon,class:"w-4 h-4 md:mr-1"},null,8,["name"]),i("span",oe,$(n.label),1)]),_:2},1032,["class"])]),_:2},1032,["to"]))],64))),64)):Q("",!0)]),_:1}),e(O),e(w,null,{fallback:t(()=>[...d[2]||(d[2]=[i("div",{class:"w-7 h-7"},null,-1)])]),default:t(()=>[l(o)?(s(),m(N,{key:0,items:l(_)},{default:t(()=>[e(q,{variant:"ghost",size:"sm",class:"p-1"},{default:t(()=>[l(a)?.avatar?(s(),p("img",{key:0,src:l(a).avatar,class:"w-7 h-7 rounded-full object-cover"},null,8,ie)):(s(),m(k,{key:1,name:"i-heroicons-user-circle",class:"w-6 h-6"}))]),_:1})]),_:1},8,["items"])):(s(),m(v,{key:1,to:"/login"},{default:t(()=>[e(q,{size:"sm"},{default:t(()=>[...d[1]||(d[1]=[G("登录",-1)])]),_:1})]),_:1}))]),_:1})])])])}}}),ce=Object.assign(ue,{__name:"AppHeader"}),de={class:"min-h-screen bg-(--ui-bg) flex flex-col"},pe={class:"flex-1"},be=M({__name:"default",setup(h){return(r,o)=>{const u=ce;return s(),p("div",de,[e(u,{class:"h-14 flex-shrink-0"}),i("main",pe,[K(r.$slots,"default")])])}}});export{be as default};
