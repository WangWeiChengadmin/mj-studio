const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DxNHbxmM.js","./CnnebwVN.js","./wDzz0qaB.js","./DPfMkruS.js","./Cl0AqbOI.js","./2EtD6e53.js","./Cn7AkR1O.js","./BGJmEYvX.js","./CylS5w8V.js","./Cp-IABpG.js","./DxSwrfjg.js","./BPQ3VLAy.js","./CXtECtnM.js","./COt5Ahok.js","./DNMeEaky.js","./DGP4VlC8.js","./BLtJtn59.js","./CquLrc37.js","./DVxCFoDh.js","./CO1LY3CK.js","./B6aJPvgy.js","./BYV0-3_D.js","./CxbxFI8M.js","./Bp3cYrEr.js","./CDVJQ6XC.js","./DZxFcAj9.js","./BIGW1oBm.js","./fKv21gyL.js","./Yzrsuije.js","./DZu-aV2c.js","./CpOuai2O.js","./CeZK1NFH.js","./DXx00hUE.js","./fWqGrwan.js","./CmIQRyeF.js","./C9oPPf7i.js","./g9-lgVsj.js","./BE2KfCdU.js","./Buea-lGh.js","./CuPHTKiy.js","./Cvjx9yec.js","./CZlF05X6.js","./D22FLkUw.js","./BTifaqeh.js","./oTG82Wo1.js","./DkwncUOv.js","./DTMYz4Jt.js","./CxGSJlkm.js","./D97Zzqfu.js","./CSXwinHm.js","./YqXBG_HV.js","./BR5kRUq4.js","./CLZrNe3w.js","./m17aaUwq.js","./CufHLc7y.js","./CYsAdtH9.js","./fuZLfV_i.js","./DWrx1Km3.js","./CzTSHFRz.js","./CXZktZb0.js","./Br6cN0cg.js","./CgjmDhmW.js","./DiinP2Uv.js","./D4aSdv24.js","./CR9Quhzy.js","./mjskCLCv.js","./CMFEf1DS.js","./B1dDrJ26.js","./TsXTqZ29.js","./CA7CTBwS.js","./DhmSosst.js","./BzTr9Aqm.js","./Xqf5ue2O.js","./BLmx8bSh.js","./BVQ-GDCI.js","./D7XhsoTB.js","./K5feNrxe.js","./Cb4P6-Nf.js","./D1j8_8rp.js","./CG8Ifv2g.js","./BqTXFGrv.js","./D3lLCCz7.js","./Cq5zzVJU.js","./Dzze3sRP.js","./BRZ36xJF.js","./BsS91CYL.js","./DM8c43g1.js","./DDBovgxi.js","./Cl-U1hlN.js","./Dn2_MT6a.js","./Cm3UrAx6.js","./DyUgxO5C.js","./aF-l9SMX.js","./CXsvEkWC.js","./cgN_UPQ0.js","./BEDo0Tqx.js","./yv6CvBhz.js"])))=>i.map(i=>d[i]);
import{f as nt,g as re,c as P,o as E,a as v,F as fe,r as pt,n as we,h as K,i as Ee,d as ue,t as Z,j as k,b as S,k as lt,l as Zr,m as z,p as tt,q as Xr,s as tn,w as G,v as Ke,x as ei,y as $e,z as wt,A as c,B as ti,C as We,D as ni,E as $n,G as Nn,H as Ht,I as Ot,_ as ri,J as si,K as br,L as ii,M as oi,N as ai,P as li,O as ui,Q as ci,R as Yr,S as di,T as pi}from"./DZ_1_TWT.js";import{_ as mi,s as Mn,a as es}from"./CWvOuK_U.js";import{_ as gn}from"./GNaDb_Wx.js";import{D as hi,P as fi,a as gi,b as _i}from"./Cl2C_jUo.js";import{_ as _n}from"./Ds9Pl6UP.js";import{_ as vi}from"./CPI9yk3n.js";import{_ as yi}from"./DTXzf-yb.js";import{_ as bi}from"./BOxYQfEP.js";import{_ as ki}from"./BsBDnP6U.js";import{_ as xi}from"./DRejpVBE.js";import{_ as wi}from"./BGhP86RK.js";import{u as Ei}from"./Czb6vWdC.js";import{u as ts}from"./CJsX1qrP.js";import"./CiEDGshs.js";import"./2BvrFYEm.js";import"./CHEUhdok.js";import"./DDAgXY8S.js";import"./9BQeByXX.js";import"./D41R7u62.js";import"./uQ15kqef.js";const Si={class:"h-full flex flex-col bg-(--ui-bg-elevated) border-r border-(--ui-border)"},Ri={class:"flex-1 overflow-y-auto p-2 space-y-2"},Ti=["onClick"],Ai={class:"flex items-center gap-3"},Ii={class:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden ring-1 ring-(--ui-border)"},Ci=["src"],Li={class:"flex-1 min-w-0"},Pi={class:"text-base font-medium truncate flex items-center gap-1.5"},Oi={class:"text-sm text-(--ui-text-muted)"},Di={key:0,class:"w-2 h-2 rounded-full bg-(--ui-primary) flex-shrink-0"},$i=nt({__name:"AssistantList",props:{assistants:{},currentAssistantId:{}},emits:["select","create"],setup(n,{emit:e}){const t=n,r=e,s=re(()=>[...t.assistants].sort((i,o)=>i.isDefault&&!o.isDefault?-1:!i.isDefault&&o.isDefault?1:0));return(i,o)=>{const l=lt;return E(),P("div",Si,[o[2]||(o[2]=v("div",{class:"p-4 border-b border-(--ui-border)"},[v("h3",{class:"font-medium text-base"},"助手列表")],-1)),v("div",Ri,[(E(!0),P(fe,null,pt(k(s),a=>(E(),P("button",{key:a.id,class:we(["w-full p-3 text-left rounded-lg transition-colors",a.id===n.currentAssistantId?"bg-(--ui-primary)/10 ring-1 ring-(--ui-primary)/30":"hover:bg-(--ui-bg) ring-1 ring-(--ui-border-accented)"]),onClick:u=>r("select",a.id)},[v("div",Ai,[v("div",Ii,[a.avatar?(E(),P("img",{key:0,src:a.avatar,class:"w-full h-full object-cover"},null,8,Ci)):(E(),Ee(l,{key:1,name:"i-heroicons-user-circle",class:"w-7 h-7 text-(--ui-text-muted)"}))]),v("div",Li,[v("div",Pi,[ue(Z(a.name)+" ",1),a.isDefault?(E(),Ee(l,{key:0,name:"i-heroicons-star-solid",class:"w-4 h-4 text-yellow-500"})):K("",!0)]),v("div",Oi,Z(a.conversationCount)+" 个对话 ",1)]),a.id===n.currentAssistantId?(E(),P("span",Di)):K("",!0)])],10,Ti))),128)),v("button",{class:"w-full p-3 rounded-lg border-2 border-dashed border-(--ui-border) hover:border-(--ui-primary) hover:bg-(--ui-primary)/5 transition-colors flex items-center justify-center gap-2 text-(--ui-text-muted) hover:text-(--ui-primary)",onClick:o[0]||(o[0]=a=>r("create"))},[S(l,{name:"i-heroicons-plus",class:"w-5 h-5"}),o[1]||(o[1]=v("span",null,"新建助手",-1))])])])}}}),Ni=Object.assign($i,{__name:"ChatAssistantList"}),Mi={class:"mj-drawing-container my-3 bg-(--ui-bg-elevated) rounded-lg border border-(--ui-border) overflow-hidden max-w-md"},Vi=["src","alt"],Bi={key:1,class:"w-full h-full flex flex-col p-5"},Ui={class:"flex-1 flex flex-col items-center justify-center"},ji={key:2,class:"text-(--ui-error) text-xs leading-relaxed line-clamp-2 mt-2 max-w-[90%] text-center"},zi={class:"pt-3 border-t border-(--ui-border-muted)"},Gi=["title"],Fi=["title"],qi={key:3,class:"absolute bottom-2 left-2 px-2 py-1 rounded-full text-xs text-white font-medium bg-indigo-500/80"},Hi={key:4,class:"absolute bottom-0 left-0 right-0 h-[3px] bg-black/20 overflow-hidden"},Wi={class:"relative bg-(--ui-bg) flex items-center justify-center"},Ki=["src","alt"],Qi={class:"space-y-3 text-sm"},Ji={class:"text-(--ui-text) font-mono text-xs"},Zi={class:"text-(--ui-text) bg-(--ui-bg-muted) rounded p-2 text-xs break-all"},Xi={key:0,class:"flex justify-between"},Yi={class:"text-(--ui-text) font-mono text-xs"},eo={key:1},to={class:"text-(--ui-text) bg-(--ui-bg-muted) rounded p-2 text-xs break-all"},no=nt({__name:"MjDrawingBlock",props:{params:{}},setup(n){const e=n,{on:t}=Zr(),r=z("idle"),s=z(null),i=z(null),o=z(null),l=z(null),a=z(null),u=z(!0),d=z(!1),p=z(!1),f=z(!1),_=z(Date.now());let h=null;const T=re(()=>["pending","submitting","processing"].includes(r.value)),y=re(()=>{switch(r.value){case"idle":return{text:"等待提交",color:"text-(--ui-text-muted)",icon:"i-heroicons-sparkles",showBars:!1};case"pending":return{text:"排队中...",color:"text-(--ui-warning)",icon:"i-heroicons-clock",showBars:!1};case"submitting":return{text:"正在提交...",color:"text-(--ui-info)",icon:null,showBars:!0};case"processing":return{text:s.value||"正在创作中...",color:"text-(--ui-primary)",icon:null,showBars:!0};case"success":return{text:"已完成",color:"text-(--ui-success)",icon:"i-heroicons-check-circle",showBars:!1};case"failed":return{text:"生成失败",color:"text-(--ui-error)",icon:"i-heroicons-exclamation-triangle",showBars:!1};default:return{text:"未知状态",color:"text-(--ui-text-muted)",icon:"i-heroicons-question-mark-circle",showBars:!1}}}),g=re(()=>{if(!T.value||!a.value)return 0;const V=a.value.getTime(),B=(_.value-V)/1e3,Ae=hi*fi;return Math.min(B/Ae*100,100)});tt(T,V=>{V?(_.value=Date.now(),h=Mn(()=>{_.value=Date.now()},gi)):h&&(clearInterval(h),h=null)},{immediate:!0});async function x(V=!1){if(!e.params.uniqueId||!e.params.prompt){l.value="缺少必要参数",r.value="failed";return}r.value="pending",l.value=null,a.value=new Date;try{const B=await $fetch("/api/illustrations",{method:"POST",body:{uniqueId:e.params.uniqueId,prompt:e.params.prompt,model:e.params.model,negative:e.params.negative,autostart:V}});o.value=B.taskId,b(B,V)}catch(B){l.value=B.data?.message||B.message||"请求失败",r.value="failed"}}function b(V,B=!0){s.value=V.progress,i.value=V.resourceUrl,l.value=V.error,V.isBlurred!==void 0&&(u.value=V.isBlurred),V.status==="success"?r.value="success":V.status==="failed"?r.value="failed":V.status==="submitting"?r.value="submitting":V.status==="processing"?r.value="processing":V.status==="pending"?r.value=B?"pending":"idle":r.value="idle"}function D(){if(!i.value)return;const V=document.createElement("a");V.href=i.value,V.download=`illustration-${e.params.uniqueId}.png`,V.target="_blank",V.click()}async function M(){const V=!u.value;u.value=V;try{await $fetch("/api/illustrations/blur",{method:"PATCH",body:{uniqueId:e.params.uniqueId,isBlurred:V}})}catch(B){console.error("保存模糊状态失败:",B)}}async function U(){if(!e.params.uniqueId||!e.params.prompt){l.value="缺少必要参数",r.value="failed";return}r.value="pending",l.value=null,i.value=null,a.value=new Date;try{const V=await $fetch("/api/illustrations/regenerate",{method:"POST",body:{uniqueId:e.params.uniqueId,prompt:e.params.prompt,model:e.params.model,negative:e.params.negative}});o.value=V.taskId,b(V,!0)}catch(V){l.value=V.data?.message||V.message||"重新生成失败",r.value="failed"}}function X(V){if(V.taskId!==o.value)return;V.progress!==void 0&&(s.value=`${V.progress}%`),V.resourceUrl!==void 0&&(i.value=V.resourceUrl),V.error!==void 0&&(l.value=V.error);const B={pending:"pending",submitting:"submitting",processing:"processing",success:"success",failed:"failed",cancelled:"failed"};V.status in B&&(r.value=B[V.status])}function Te(V){V.taskId===o.value&&(u.value=V.isBlurred)}let le=null,Y=null;return Xr(()=>{x(e.params.autostart??!1),le=t("task.status.updated",X),Y=t("task.blur.updated",Te)}),tn(()=>{h&&clearInterval(h),le?.(),Y?.()}),(V,B)=>{const Ae=mi,te=lt,pe=wt,ye=gn;return E(),P("div",Mi,[v("div",{class:"aspect-[4/3] bg-black/10 relative group",onMouseenter:B[4]||(B[4]=be=>f.value=!0),onMouseleave:B[5]||(B[5]=be=>f.value=!1)},[k(r)==="success"&&k(i)?(E(),P("img",{key:0,src:k(i),alt:n.params.prompt,class:we(["w-full h-full object-contain cursor-pointer transition-all duration-300",k(u)?"blur-xl scale-105":"hover:opacity-90"]),onClick:B[0]||(B[0]=be=>{M(),f.value=!k(f)})},null,10,Vi)):(E(),P("div",Bi,[v("div",Ui,[k(y).showBars?(E(),Ee(Ae,{key:0,class:we(["w-10 h-10",k(y).color])},null,8,["class"])):k(y).icon?(E(),Ee(te,{key:1,name:k(y).icon,class:we(["w-10 h-10",k(y).color])},null,8,["name","class"])):K("",!0),v("p",{class:we(["text-sm font-medium mt-3",k(y).color])},Z(k(y).text),3),k(l)&&k(r)==="failed"?(E(),P("p",ji,Z(k(l)),1)):K("",!0),k(r)==="idle"?(E(),Ee(pe,{key:3,size:"sm",class:"mt-4",onClick:B[1]||(B[1]=be=>x(!0))},{default:G(()=>[S(te,{name:"i-heroicons-sparkles",class:"w-4 h-4 mr-1"}),B[9]||(B[9]=ue(" 生成插图 ",-1))]),_:1})):K("",!0),k(r)==="failed"?(E(),Ee(pe,{key:4,size:"sm",variant:"outline",class:"mt-3",onClick:U},{default:G(()=>[S(te,{name:"i-heroicons-arrow-path",class:"w-4 h-4 mr-1"}),B[10]||(B[10]=ue(" 重试 ",-1))]),_:1})):K("",!0)]),v("div",zi,[v("p",{class:"text-sm font-medium text-(--ui-text) truncate",title:n.params.uniqueId},Z(n.params.uniqueId),9,Gi),v("p",{class:"text-xs text-(--ui-text-muted) line-clamp-2 leading-relaxed mt-1",title:n.params.prompt},Z(n.params.prompt),9,Fi)])])),k(r)==="success"&&k(i)?(E(),P("div",{key:2,class:we(["absolute top-2 left-2 flex gap-1 transition-opacity",k(f)?"opacity-100":"opacity-0 md:group-hover:opacity-100"])},[v("button",{class:"w-8 h-8 flex items-center justify-center rounded-full bg-black/50 backdrop-blur-sm hover:bg-black/70 transition-colors",title:"下载图片",onClick:Ke(D,["stop"])},[S(te,{name:"i-heroicons-arrow-down-tray",class:"w-4 h-4 text-white"})]),v("button",{class:"w-8 h-8 flex items-center justify-center rounded-full bg-black/50 backdrop-blur-sm hover:bg-black/70 transition-colors",title:"放大查看",onClick:B[2]||(B[2]=Ke(be=>d.value=!0,["stop"]))},[S(te,{name:"i-heroicons-magnifying-glass-plus",class:"w-4 h-4 text-white"})]),v("button",{class:"w-8 h-8 flex items-center justify-center rounded-full bg-black/50 backdrop-blur-sm hover:bg-black/70 transition-colors",title:"重新生成",onClick:Ke(U,["stop"])},[S(te,{name:"i-heroicons-arrow-path",class:"w-4 h-4 text-white"})]),v("button",{class:"w-8 h-8 flex items-center justify-center rounded-full bg-black/50 backdrop-blur-sm hover:bg-black/70 transition-colors",title:"查看详情",onClick:B[3]||(B[3]=Ke(be=>p.value=!0,["stop"]))},[S(te,{name:"i-heroicons-information-circle",class:"w-4 h-4 text-white"})])],2)):K("",!0),n.params.model?(E(),P("div",qi,Z(n.params.model),1)):K("",!0),k(T)?(E(),P("div",Hi,[v("div",{class:"h-full transition-all duration-500 ease-out animate-shimmer",style:ei({width:`${k(g)}%`,backgroundImage:"linear-gradient(90deg, #8b5cf6, #ec4899, #06b6d4, #8b5cf6)",backgroundSize:"200% 100%"})},null,4)])):K("",!0)],32),S(ye,{open:k(d),"onUpdate:open":B[7]||(B[7]=be=>$e(d)?d.value=be:null),ui:{content:"sm:max-w-4xl"}},{content:G(()=>[v("div",Wi,[v("img",{src:k(i),alt:n.params.prompt,class:"max-h-[85vh] object-contain"},null,8,Ki),v("button",{class:"absolute top-3 right-3 w-9 h-9 flex items-center justify-center rounded-full bg-black/50 backdrop-blur-sm hover:bg-black/70 transition-colors",onClick:B[6]||(B[6]=be=>d.value=!1)},[S(te,{name:"i-heroicons-x-mark",class:"w-5 h-5 text-white"})]),v("button",{class:"absolute top-3 left-3 w-9 h-9 flex items-center justify-center rounded-full bg-black/50 backdrop-blur-sm hover:bg-black/70 transition-colors",title:"下载图片",onClick:D},[S(te,{name:"i-heroicons-arrow-down-tray",class:"w-5 h-5 text-white"})])])]),_:1},8,["open"]),S(ye,{open:k(p),"onUpdate:open":B[8]||(B[8]=be=>$e(p)?p.value=be:null),title:"插图详情"},{body:G(()=>[v("div",Qi,[v("div",null,[B[11]||(B[11]=v("span",{class:"text-(--ui-text-muted) block mb-1"},"标识",-1)),v("p",Ji,Z(n.params.uniqueId),1)]),v("div",null,[B[12]||(B[12]=v("span",{class:"text-(--ui-text-muted) block mb-1"},"提示词",-1)),v("p",Zi,Z(n.params.prompt),1)]),n.params.model?(E(),P("div",Xi,[B[13]||(B[13]=v("span",{class:"text-(--ui-text-muted)"},"模型",-1)),v("span",Yi,Z(n.params.model),1)])):K("",!0),n.params.negative?(E(),P("div",eo,[B[14]||(B[14]=v("span",{class:"text-(--ui-text-muted) block mb-1"},"负面提示词",-1)),v("p",to,Z(n.params.negative),1)])):K("",!0)])]),_:1},8,["open"])])}}}),ro=Object.assign(no,{__name:"ChatMjDrawingBlock"}),so={class:"markdown-content-wrapper"},io=["innerHTML"],oo=nt({__name:"MarkdownContent",props:{html:{}},setup(n){const e=n;function t(i){return decodeURIComponent(escape(atob(i)))}const r=re(()=>{if(!e.html)return[];const i=[],o=/<div class="mj-drawing-block" data-mj-drawing="([^"]+)"><\/div>/g;let l=0,a;for(;(a=o.exec(e.html))!==null;){if(a.index>l){const u=e.html.slice(l,a.index);u.trim()&&i.push({type:"html",content:u})}i.push({type:"drawing",content:a[1]}),l=a.index+a[0].length}if(l<e.html.length){const u=e.html.slice(l);u.trim()&&i.push({type:"html",content:u})}return i.length===0&&e.html.trim()&&i.push({type:"html",content:e.html}),i});function s(i){try{return JSON.parse(t(i))}catch{return{uniqueId:"",prompt:""}}}return(i,o)=>{const l=ro;return E(),P("div",so,[(E(!0),P(fe,null,pt(k(r),(a,u)=>(E(),P(fe,{key:u},[a.type==="html"?(E(),P("div",{key:0,innerHTML:a.content,class:"markdown-content"},null,8,io)):(E(),Ee(l,{key:1,params:s(a.content)},null,8,["params"]))],64))),128))])}}}),ao=Object.assign(oo,{__name:"ChatMarkdownContent"});function Yn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ht=Yn();function ns(n){ht=n}var Dt={exec:()=>null};function ee(n,e=""){let t=typeof n=="string"?n:n.source,r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Ie.caret,"$1"),t=t.replace(s,o),r},getRegex:()=>new RegExp(t,e)};return r}var lo=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ie={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},uo=/^(?:[ \t]*(?:\n|$))+/,co=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,po=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ut=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,mo=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,er=/(?:[*+-]|\d{1,9}[.)])/,rs=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ss=ee(rs).replace(/bull/g,er).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ho=ee(rs).replace(/bull/g,er).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),tr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,fo=/^[^\n]+/,nr=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,go=ee(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",nr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),_o=ee(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,er).getRegex(),vn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",rr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,vo=ee("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",rr).replace("tag",vn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),is=ee(tr).replace("hr",Ut).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vn).getRegex(),yo=ee(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",is).getRegex(),sr={blockquote:yo,code:co,def:go,fences:po,heading:mo,hr:Ut,html:vo,lheading:ss,list:_o,newline:uo,paragraph:is,table:Dt,text:fo},kr=ee("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ut).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vn).getRegex(),bo={...sr,lheading:ho,table:kr,paragraph:ee(tr).replace("hr",Ut).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",kr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",vn).getRegex()},ko={...sr,html:ee(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",rr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Dt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ee(tr).replace("hr",Ut).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ss).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},xo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,wo=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,os=/^( {2,}|\\)\n(?!\s*$)/,Eo=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,yn=/[\p{P}\p{S}]/u,ir=/[\s\p{P}\p{S}]/u,as=/[^\s\p{P}\p{S}]/u,So=ee(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ir).getRegex(),ls=/(?!~)[\p{P}\p{S}]/u,Ro=/(?!~)[\s\p{P}\p{S}]/u,To=/(?:[^\s\p{P}\p{S}]|~)/u,Ao=ee(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",lo?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),us=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Io=ee(us,"u").replace(/punct/g,yn).getRegex(),Co=ee(us,"u").replace(/punct/g,ls).getRegex(),cs="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Lo=ee(cs,"gu").replace(/notPunctSpace/g,as).replace(/punctSpace/g,ir).replace(/punct/g,yn).getRegex(),Po=ee(cs,"gu").replace(/notPunctSpace/g,To).replace(/punctSpace/g,Ro).replace(/punct/g,ls).getRegex(),Oo=ee("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,as).replace(/punctSpace/g,ir).replace(/punct/g,yn).getRegex(),Do=ee(/\\(punct)/,"gu").replace(/punct/g,yn).getRegex(),$o=ee(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),No=ee(rr).replace("(?:-->|$)","-->").getRegex(),Mo=ee("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",No).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),nn=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Vo=ee(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",nn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ds=ee(/^!?\[(label)\]\[(ref)\]/).replace("label",nn).replace("ref",nr).getRegex(),ps=ee(/^!?\[(ref)\](?:\[\])?/).replace("ref",nr).getRegex(),Bo=ee("reflink|nolink(?!\\()","g").replace("reflink",ds).replace("nolink",ps).getRegex(),xr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,or={_backpedal:Dt,anyPunctuation:Do,autolink:$o,blockSkip:Ao,br:os,code:wo,del:Dt,emStrongLDelim:Io,emStrongRDelimAst:Lo,emStrongRDelimUnd:Oo,escape:xo,link:Vo,nolink:ps,punctuation:So,reflink:ds,reflinkSearch:Bo,tag:Mo,text:Eo,url:Dt},Uo={...or,link:ee(/^!?\[(label)\]\((.*?)\)/).replace("label",nn).getRegex(),reflink:ee(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",nn).getRegex()},Vn={...or,emStrongRDelimAst:Po,emStrongLDelim:Co,url:ee(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",xr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:ee(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",xr).getRegex()},jo={...Vn,br:ee(os).replace("{2,}","*").getRegex(),text:ee(Vn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Wt={normal:sr,gfm:bo,pedantic:ko},At={normal:or,gfm:Vn,breaks:jo,pedantic:Uo},zo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wr=n=>zo[n];function et(n,e){if(e){if(Ie.escapeTest.test(n))return n.replace(Ie.escapeReplace,wr)}else if(Ie.escapeTestNoEncode.test(n))return n.replace(Ie.escapeReplaceNoEncode,wr);return n}function Er(n){try{n=encodeURI(n).replace(Ie.percentDecode,"%")}catch{return null}return n}function Sr(n,e){let t=n.replace(Ie.findPipe,(i,o,l)=>{let a=!1,u=o;for(;--u>=0&&l[u]==="\\";)a=!a;return a?"|":" |"}),r=t.split(Ie.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Ie.slashPipe,"|");return r}function It(n,e,t){let r=n.length;if(r===0)return"";let s=0;for(;s<r&&n.charAt(r-s-1)===e;)s++;return n.slice(0,r-s)}function Go(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function Rr(n,e,t,r,s){let i=e.href,o=e.title||null,l=n[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;let a={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:o,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,a}function Fo(n,e,t){let r=n.match(t.other.indentCodeCompensation);if(r===null)return e;let s=r[1];return e.split(`
`).map(i=>{let o=i.match(t.other.beginningSpace);if(o===null)return i;let[l]=o;return l.length>=s.length?i.slice(s.length):i}).join(`
`)}var rn=class{options;rules;lexer;constructor(n){this.options=n||ht}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:It(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],r=Fo(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let r=It(t,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:It(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=It(e[0],`
`).split(`
`),r="",s="",i=[];for(;t.length>0;){let o=!1,l=[],a;for(a=0;a<t.length;a++)if(this.rules.other.blockquoteStart.test(t[a]))l.push(t[a]),o=!0;else if(!o)l.push(t[a]);else break;t=t.slice(a);let u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,s=s?`${s}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,i,!0),this.lexer.state.top=p,t.length===0)break;let f=i.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){let _=f,h=_.raw+`
`+t.join(`
`),T=this.blockquote(h);i[i.length-1]=T,r=r.substring(0,r.length-_.raw.length)+T.raw,s=s.substring(0,s.length-_.text.length)+T.text;break}else if(f?.type==="list"){let _=f,h=_.raw+`
`+t.join(`
`),T=this.list(h);i[i.length-1]=T,r=r.substring(0,r.length-f.raw.length)+T.raw,s=s.substring(0,s.length-_.raw.length)+T.raw,t=h.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:s}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),r=t.length>1,s={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");let i=this.rules.other.listItemRegex(t),o=!1;for(;n;){let a=!1,u="",d="";if(!(e=i.exec(n))||this.rules.block.hr.test(n))break;u=e[0],n=n.substring(u.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),f=n.split(`
`,1)[0],_=!p.trim(),h=0;if(this.options.pedantic?(h=2,d=p.trimStart()):_?h=e[1].length+1:(h=e[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,d=p.slice(h),h+=e[1].length),_&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,n=n.substring(f.length+1),a=!0),!a){let T=this.rules.other.nextBulletRegex(h),y=this.rules.other.hrRegex(h),g=this.rules.other.fencesBeginRegex(h),x=this.rules.other.headingBeginRegex(h),b=this.rules.other.htmlBeginRegex(h);for(;n;){let D=n.split(`
`,1)[0],M;if(f=D,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),M=f):M=f.replace(this.rules.other.tabCharGlobal,"    "),g.test(f)||x.test(f)||b.test(f)||T.test(f)||y.test(f))break;if(M.search(this.rules.other.nonSpaceChar)>=h||!f.trim())d+=`
`+M.slice(h);else{if(_||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||g.test(p)||x.test(p)||y.test(p))break;d+=`
`+f}!_&&!f.trim()&&(_=!0),u+=D+`
`,n=n.substring(D.length+1),p=M.slice(h)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0)),s.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),s.raw+=u}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let a of s.items){if(this.lexer.state.top=!1,a.tokens=this.lexer.blockTokens(a.text,[]),a.task){if(a.text=a.text.replace(this.rules.other.listReplaceTask,""),a.tokens[0]?.type==="text"||a.tokens[0]?.type==="paragraph"){a.tokens[0].raw=a.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),a.tokens[0].text=a.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(a.raw);if(u){let d={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};a.checked=d.checked,s.loose?a.tokens[0]&&["paragraph","text"].includes(a.tokens[0].type)&&"tokens"in a.tokens[0]&&a.tokens[0].tokens?(a.tokens[0].raw=d.raw+a.tokens[0].raw,a.tokens[0].text=d.raw+a.tokens[0].text,a.tokens[0].tokens.unshift(d)):a.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):a.tokens.unshift(d)}}if(!s.loose){let u=a.tokens.filter(p=>p.type==="space"),d=u.length>0&&u.some(p=>this.rules.other.anyLine.test(p.raw));s.loose=d}}if(s.loose)for(let a of s.items){a.loose=!0;for(let u of a.tokens)u.type==="text"&&(u.type="paragraph")}return s}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:s}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Sr(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(let o of r)this.rules.other.tableAlignRight.test(o)?i.align.push("right"):this.rules.other.tableAlignCenter.test(o)?i.align.push("center"):this.rules.other.tableAlignLeft.test(o)?i.align.push("left"):i.align.push(null);for(let o=0;o<t.length;o++)i.header.push({text:t[o],tokens:this.lexer.inline(t[o]),header:!0,align:i.align[o]});for(let o of s)i.rows.push(Sr(o,i.header.length).map((l,a)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[a]})));return i}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let i=It(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{let i=Go(e[2],"()");if(i===-2)return;if(i>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],s=i[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r=r.slice(1):r=r.slice(1,-1)),Rr(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let r=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){let i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Rr(t,s,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!(!r||r[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!t||this.rules.inline.punctuation.exec(t))){let s=[...r[0]].length-1,i,o,l=s,a=0,u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+s);(r=u.exec(e))!=null;){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=[...i].length,r[3]||r[4]){l+=o;continue}else if((r[5]||r[6])&&s%3&&!((s+o)%3)){a+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+a);let d=[...r[0]][0].length,p=n.slice(0,s+r.index+d+o);if(Math.min(s,o)%2){let _=p.slice(1,-1);return{type:"em",raw:p,text:_,tokens:this.lexer.inlineTokens(_)}}let f=p.slice(2,-2);return{type:"strong",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(t),s=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&s&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,r;if(e[2]==="@")t=e[0],r="mailto:"+t;else{let s;do s=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(s!==e[0]);t=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},ze=class Bn{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ht,this.options.tokenizer=this.options.tokenizer||new rn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Ie,block:Wt.normal,inline:At.normal};this.options.pedantic?(t.block=Wt.pedantic,t.inline=At.pedantic):this.options.gfm&&(t.block=Wt.gfm,this.options.breaks?t.inline=At.breaks:t.inline=At.gfm),this.tokenizer.rules=t}static get rules(){return{block:Wt,inline:At}}static lex(e,t){return new Bn(t).lex(e)}static lexInline(e,t){return new Bn(t).inlineTokens(e)}lex(e){e=e.replace(Ie.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(Ie.tabCharGlobal,"    ").replace(Ie.spaceLine,""));e;){let s;if(this.options.extensions?.block?.some(o=>(s=o.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))continue;if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length);let o=t.at(-1);s.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.at(-1).src=o.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},t.push(s));continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}let i=e;if(this.options.extensions?.startBlock){let o=1/0,l=e.slice(1),a;this.options.extensions.startBlock.forEach(u=>{a=u.call({lexer:this},l),typeof a=="number"&&a>=0&&(o=Math.min(o,a))}),o<1/0&&o>=0&&(i=e.substring(0,o+1))}if(this.state.top&&(s=this.tokenizer.paragraph(i))){let o=t.at(-1);r&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(s),r=i.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length);let o=t.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(s);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,s=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)i=s[2]?s[2].length:0,r=r.slice(0,s.index+i)+"["+"a".repeat(s[0].length-i-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let o=!1,l="";for(;e;){o||(l=""),o=!1;let a;if(this.options.extensions?.inline?.some(d=>(a=d.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let d=t.at(-1);a.type==="text"&&d?.type==="text"?(d.raw+=a.raw,d.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,r,l)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let u=e;if(this.options.extensions?.startInline){let d=1/0,p=e.slice(1),f;this.options.extensions.startInline.forEach(_=>{f=_.call({lexer:this},p),typeof f=="number"&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(u=e.substring(0,d+1))}if(a=this.tokenizer.inlineText(u)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(l=a.raw.slice(-1)),o=!0;let d=t.at(-1);d?.type==="text"?(d.raw+=a.raw,d.text+=a.text):t.push(a);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},sn=class{options;parser;constructor(n){this.options=n||ht}space(n){return""}code({text:n,lang:e,escaped:t}){let r=(e||"").match(Ie.notSpaceStart)?.[0],s=n.replace(Ie.endingNewline,"")+`
`;return r?'<pre><code class="language-'+et(r)+'">'+(t?s:et(s,!0))+`</code></pre>
`:"<pre><code>"+(t?s:et(s,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,r="";for(let o=0;o<n.items.length;o++){let l=n.items[o];r+=this.listitem(l)}let s=e?"ol":"ul",i=e&&t!==1?' start="'+t+'"':"";return"<"+s+i+`>
`+r+"</"+s+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let s=0;s<n.header.length;s++)t+=this.tablecell(n.header[s]);e+=this.tablerow({text:t});let r="";for(let s=0;s<n.rows.length;s++){let i=n.rows[s];t="";for(let o=0;o<i.length;o++)t+=this.tablecell(i[o]);r+=this.tablerow({text:t})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${et(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let r=this.parser.parseInline(t),s=Er(n);if(s===null)return r;n=s;let i='<a href="'+n+'"';return e&&(i+=' title="'+et(e)+'"'),i+=">"+r+"</a>",i}image({href:n,title:e,text:t,tokens:r}){r&&(t=this.parser.parseInline(r,this.parser.textRenderer));let s=Er(n);if(s===null)return et(t);n=s;let i=`<img src="${n}" alt="${t}"`;return e&&(i+=` title="${et(e)}"`),i+=">",i}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:et(n.text)}},ar=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},Ge=class Un{options;renderer;textRenderer;constructor(e){this.options=e||ht,this.options.renderer=this.options.renderer||new sn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ar}static parse(e,t){return new Un(t).parse(e)}static parseInline(e,t){return new Un(t).parseInline(e)}parse(e){let t="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let o=s,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){t+=l||"";continue}}let i=s;switch(i.type){case"space":{t+=this.renderer.space(i);break}case"hr":{t+=this.renderer.hr(i);break}case"heading":{t+=this.renderer.heading(i);break}case"code":{t+=this.renderer.code(i);break}case"table":{t+=this.renderer.table(i);break}case"blockquote":{t+=this.renderer.blockquote(i);break}case"list":{t+=this.renderer.list(i);break}case"checkbox":{t+=this.renderer.checkbox(i);break}case"html":{t+=this.renderer.html(i);break}case"def":{t+=this.renderer.def(i);break}case"paragraph":{t+=this.renderer.paragraph(i);break}case"text":{t+=this.renderer.text(i);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(e,t=this.renderer){let r="";for(let s=0;s<e.length;s++){let i=e[s];if(this.options.extensions?.renderers?.[i.type]){let l=this.options.extensions.renderers[i.type].call({parser:this},i);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=l||"";continue}}let o=i;switch(o.type){case"escape":{r+=t.text(o);break}case"html":{r+=t.html(o);break}case"link":{r+=t.link(o);break}case"image":{r+=t.image(o);break}case"checkbox":{r+=t.checkbox(o);break}case"strong":{r+=t.strong(o);break}case"em":{r+=t.em(o);break}case"codespan":{r+=t.codespan(o);break}case"br":{r+=t.br(o);break}case"del":{r+=t.del(o);break}case"text":{r+=t.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}},Lt=class{options;block;constructor(n){this.options=n||ht}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?ze.lex:ze.lexInline}provideParser(){return this.block?Ge.parse:Ge.parseInline}},ms=class{defaults=Yn();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ge;Renderer=sn;TextRenderer=ar;Lexer=ze;Tokenizer=rn;Hooks=Lt;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let r of n)switch(t=t.concat(e.call(this,r)),r.type){case"table":{let s=r;for(let i of s.header)t=t.concat(this.walkTokens(i.tokens,e));for(let i of s.rows)for(let o of i)t=t.concat(this.walkTokens(o.tokens,e));break}case"list":{let s=r;t=t.concat(this.walkTokens(s.items,e));break}default:{let s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(i=>{let o=s[i].flat(1/0);t=t.concat(this.walkTokens(o,e))}):s.tokens&&(t=t.concat(this.walkTokens(s.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let r={...t};if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let i=e.renderers[s.name];i?e.renderers[s.name]=function(...o){let l=s.renderer.apply(this,o);return l===!1&&(l=i.apply(this,o)),l}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[s.level];i?i.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),t.renderer){let s=this.defaults.renderer||new sn(this.defaults);for(let i in t.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let o=i,l=t.renderer[o],a=s[o];s[o]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=a.apply(s,u)),d||""}}r.renderer=s}if(t.tokenizer){let s=this.defaults.tokenizer||new rn(this.defaults);for(let i in t.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let o=i,l=t.tokenizer[o],a=s[o];s[o]=(...u)=>{let d=l.apply(s,u);return d===!1&&(d=a.apply(s,u)),d}}r.tokenizer=s}if(t.hooks){let s=this.defaults.hooks||new Lt;for(let i in t.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let o=i,l=t.hooks[o],a=s[o];Lt.passThroughHooks.has(i)?s[o]=u=>{if(this.defaults.async&&Lt.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await l.call(s,u);return a.call(s,p)})();let d=l.call(s,u);return a.call(s,d)}:s[o]=(...u)=>{if(this.defaults.async)return(async()=>{let p=await l.apply(s,u);return p===!1&&(p=await a.apply(s,u)),p})();let d=l.apply(s,u);return d===!1&&(d=a.apply(s,u)),d}}r.hooks=s}if(t.walkTokens){let s=this.defaults.walkTokens,i=t.walkTokens;r.walkTokens=function(o){let l=[];return l.push(i.call(this,o)),s&&(l=l.concat(s.call(this,o))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return ze.lex(n,e??this.defaults)}parser(n,e){return Ge.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let r={...t},s={...this.defaults,...r},i=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=n),s.async)return(async()=>{let o=s.hooks?await s.hooks.preprocess(e):e,l=await(s.hooks?await s.hooks.provideLexer():n?ze.lex:ze.lexInline)(o,s),a=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(a,s.walkTokens));let u=await(s.hooks?await s.hooks.provideParser():n?Ge.parse:Ge.parseInline)(a,s);return s.hooks?await s.hooks.postprocess(u):u})().catch(i);try{s.hooks&&(e=s.hooks.preprocess(e));let o=(s.hooks?s.hooks.provideLexer():n?ze.lex:ze.lexInline)(e,s);s.hooks&&(o=s.hooks.processAllTokens(o)),s.walkTokens&&this.walkTokens(o,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():n?Ge.parse:Ge.parseInline)(o,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(o){return i(o)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+et(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},mt=new ms;function se(n,e){return mt.parse(n,e)}se.options=se.setOptions=function(n){return mt.setOptions(n),se.defaults=mt.defaults,ns(se.defaults),se};se.getDefaults=Yn;se.defaults=ht;se.use=function(...n){return mt.use(...n),se.defaults=mt.defaults,ns(se.defaults),se};se.walkTokens=function(n,e){return mt.walkTokens(n,e)};se.parseInline=mt.parseInline;se.Parser=Ge;se.parser=Ge.parse;se.Renderer=sn;se.TextRenderer=ar;se.Lexer=ze;se.lexer=ze.lex;se.Tokenizer=rn;se.Hooks=Lt;se.parse=se;se.options;se.setOptions;se.use;se.walkTokens;se.parseInline;Ge.parse;ze.lex;let ge=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function qo(n){return lr(n)}function lr(n){return Array.isArray(n)?Ho(n):n instanceof RegExp?n:typeof n=="object"?Wo(n):n}function Ho(n){let e=[];for(let t=0,r=n.length;t<r;t++)e[t]=lr(n[t]);return e}function Wo(n){let e={};for(let t in n)e[t]=lr(n[t]);return e}function hs(n,...e){return e.forEach(t=>{for(let r in t)n[r]=t[r]}),n}function fs(n){const e=~n.lastIndexOf("/")||~n.lastIndexOf("\\");return e===0?n:~e===n.length-1?fs(n.substring(0,n.length-1)):n.substr(~e+1)}var Tn=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Kt=class{static hasCaptures(n){return n===null?!1:(Tn.lastIndex=0,Tn.test(n))}static replaceCaptures(n,e,t){return n.replace(Tn,(r,s,i,o)=>{let l=t[parseInt(s||i,10)];if(l){let a=e.substring(l.start,l.end);for(;a[0]===".";)a=a.substring(1);switch(o){case"downcase":return a.toLowerCase();case"upcase":return a.toUpperCase();default:return a}}else return r})}};function gs(n,e){return n<e?-1:n>e?1:0}function _s(n,e){if(n===null&&e===null)return 0;if(!n)return-1;if(!e)return 1;let t=n.length,r=e.length;if(t===r){for(let s=0;s<t;s++){let i=gs(n[s],e[s]);if(i!==0)return i}return 0}return t-r}function Tr(n){return!!(/^#[0-9a-f]{6}$/i.test(n)||/^#[0-9a-f]{8}$/i.test(n)||/^#[0-9a-f]{3}$/i.test(n)||/^#[0-9a-f]{4}$/i.test(n))}function vs(n){return n.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var ys=class{constructor(n){this.fn=n}cache=new Map;get(n){if(this.cache.has(n))return this.cache.get(n);const e=this.fn(n);return this.cache.set(n,e),e}},on=class{constructor(n,e,t){this._colorMap=n,this._defaults=e,this._root=t}static createFromRawTheme(n,e){return this.createFromParsedTheme(Jo(n),e)}static createFromParsedTheme(n,e){return Xo(n,e)}_cachedMatchRoot=new ys(n=>this._root.match(n));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(n){if(n===null)return this._defaults;const e=n.scopeName,r=this._cachedMatchRoot.get(e).find(s=>Ko(n.parent,s.parentScopes));return r?new bs(r.fontStyle,r.foreground,r.background):null}},An=class Yt{constructor(e,t){this.parent=e,this.scopeName=t}static push(e,t){for(const r of t)e=new Yt(e,r);return e}static from(...e){let t=null;for(let r=0;r<e.length;r++)t=new Yt(t,e[r]);return t}push(e){return new Yt(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let r=this;for(;r&&r!==e;)t.push(r.scopeName),r=r.parent;return r===e?t.reverse():void 0}};function Ko(n,e){if(e.length===0)return!0;for(let t=0;t<e.length;t++){let r=e[t],s=!1;if(r===">"){if(t===e.length-1)return!1;r=e[++t],s=!0}for(;n&&!Qo(n.scopeName,r);){if(s)return!1;n=n.parent}if(!n)return!1;n=n.parent}return!0}function Qo(n,e){return e===n||n.startsWith(e)&&n[e.length]==="."}var bs=class{constructor(n,e,t){this.fontStyle=n,this.foregroundId=e,this.backgroundId=t}};function Jo(n){if(!n)return[];if(!n.settings||!Array.isArray(n.settings))return[];let e=n.settings,t=[],r=0;for(let s=0,i=e.length;s<i;s++){let o=e[s];if(!o.settings)continue;let l;if(typeof o.scope=="string"){let p=o.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),l=p.split(",")}else Array.isArray(o.scope)?l=o.scope:l=[""];let a=-1;if(typeof o.settings.fontStyle=="string"){a=0;let p=o.settings.fontStyle.split(" ");for(let f=0,_=p.length;f<_;f++)switch(p[f]){case"italic":a=a|1;break;case"bold":a=a|2;break;case"underline":a=a|4;break;case"strikethrough":a=a|8;break}}let u=null;typeof o.settings.foreground=="string"&&Tr(o.settings.foreground)&&(u=o.settings.foreground);let d=null;typeof o.settings.background=="string"&&Tr(o.settings.background)&&(d=o.settings.background);for(let p=0,f=l.length;p<f;p++){let h=l[p].trim().split(" "),T=h[h.length-1],y=null;h.length>1&&(y=h.slice(0,h.length-1),y.reverse()),t[r++]=new Zo(T,y,s,a,u,d)}}return t}var Zo=class{constructor(n,e,t,r,s,i){this.scope=n,this.parentScopes=e,this.index=t,this.fontStyle=r,this.foreground=s,this.background=i}},Re=(n=>(n[n.NotSet=-1]="NotSet",n[n.None=0]="None",n[n.Italic=1]="Italic",n[n.Bold=2]="Bold",n[n.Underline=4]="Underline",n[n.Strikethrough=8]="Strikethrough",n))(Re||{});function Xo(n,e){n.sort((a,u)=>{let d=gs(a.scope,u.scope);return d!==0||(d=_s(a.parentScopes,u.parentScopes),d!==0)?d:a.index-u.index});let t=0,r="#000000",s="#ffffff";for(;n.length>=1&&n[0].scope==="";){let a=n.shift();a.fontStyle!==-1&&(t=a.fontStyle),a.foreground!==null&&(r=a.foreground),a.background!==null&&(s=a.background)}let i=new Yo(e),o=new bs(t,i.getId(r),i.getId(s)),l=new ta(new jn(0,null,-1,0,0),[]);for(let a=0,u=n.length;a<u;a++){let d=n[a];l.insert(0,d.scope,d.parentScopes,d.fontStyle,i.getId(d.foreground),i.getId(d.background))}return new on(i,o,l)}var Yo=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(n){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(n)){this._isFrozen=!0;for(let e=0,t=n.length;e<t;e++)this._color2id[n[e]]=e,this._id2color[e]=n[e]}else this._isFrozen=!1}getId(n){if(n===null)return 0;n=n.toUpperCase();let e=this._color2id[n];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${n}`);return e=++this._lastColorId,this._color2id[n]=e,this._id2color[e]=n,e}getColorMap(){return this._id2color.slice(0)}},ea=Object.freeze([]),jn=class ks{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,t,r,s,i){this.scopeDepth=e,this.parentScopes=t||ea,this.fontStyle=r,this.foreground=s,this.background=i}clone(){return new ks(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let r=0,s=e.length;r<s;r++)t[r]=e[r].clone();return t}acceptOverwrite(e,t,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,t!==-1&&(this.fontStyle=t),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},ta=class zn{constructor(e,t=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=t}_rulesWithParentScopes;static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,t.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=t.parentScopes.length);){const i=t.parentScopes[s].length-e.parentScopes[r].length;if(i!==0)return i;r++,s++}return t.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,i;if(r===-1?(s=e,i=""):(s=e.substring(0,r),i=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(i)}const t=this._rulesWithParentScopes.concat(this._mainRule);return t.sort(zn._cmpBySpecificity),t}insert(e,t,r,s,i,o){if(t===""){this._doInsertHere(e,r,s,i,o);return}let l=t.indexOf("."),a,u;l===-1?(a=t,u=""):(a=t.substring(0,l),u=t.substring(l+1));let d;this._children.hasOwnProperty(a)?d=this._children[a]:(d=new zn(this._mainRule.clone(),jn.cloneArr(this._rulesWithParentScopes)),this._children[a]=d),d.insert(e+1,u,r,s,i,o)}_doInsertHere(e,t,r,s,i){if(t===null){this._mainRule.acceptOverwrite(e,r,s,i);return}for(let o=0,l=this._rulesWithParentScopes.length;o<l;o++){let a=this._rulesWithParentScopes[o];if(_s(a.parentScopes,t)===0){a.acceptOverwrite(e,r,s,i);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new jn(e,t,r,s,i))}},xt=class Me{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const t=Me.getLanguageId(e),r=Me.getTokenType(e),s=Me.getFontStyle(e),i=Me.getForeground(e),o=Me.getBackground(e);console.log({languageId:t,tokenType:r,fontStyle:s,foreground:i,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,t,r,s,i,o,l){let a=Me.getLanguageId(e),u=Me.getTokenType(e),d=Me.containsBalancedBrackets(e)?1:0,p=Me.getFontStyle(e),f=Me.getForeground(e),_=Me.getBackground(e);return t!==0&&(a=t),r!==8&&(u=r),s!==null&&(d=s?1:0),i!==-1&&(p=i),o!==0&&(f=o),l!==0&&(_=l),(a<<0|u<<8|d<<10|p<<11|f<<15|_<<24)>>>0}};function an(n,e){const t=[],r=na(n);let s=r.next();for(;s!==null;){let a=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":a=1;break;case"L":a=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let u=o();if(t.push({matcher:u,priority:a}),s!==",")break;s=r.next()}return t;function i(){if(s==="-"){s=r.next();const a=i();return u=>!!a&&!a(u)}if(s==="("){s=r.next();const a=l();return s===")"&&(s=r.next()),a}if(Ar(s)){const a=[];do a.push(s),s=r.next();while(Ar(s));return u=>e(a,u)}return null}function o(){const a=[];let u=i();for(;u;)a.push(u),u=i();return d=>a.every(p=>p(d))}function l(){const a=[];let u=o();for(;u&&(a.push(u),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");u=o()}return d=>a.some(p=>p(d))}}function Ar(n){return!!n&&!!n.match(/[\w\.:]+/)}function na(n){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,t=e.exec(n);return{next:()=>{if(!t)return null;const r=t[0];return t=e.exec(n),r}}}function xs(n){typeof n.dispose=="function"&&n.dispose()}var Nt=class{constructor(n){this.scopeName=n}toKey(){return this.scopeName}},ra=class{constructor(n,e){this.scopeName=n,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},sa=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(n){const e=n.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(n))}},ia=class{constructor(n,e){this.repo=n,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Nt(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const n=this.Q;this.Q=[];const e=new sa;for(const t of n)oa(t,this.initialScopeName,this.repo,e);for(const t of e.references)if(t instanceof Nt){if(this.seenFullScopeRequests.has(t.scopeName))continue;this.seenFullScopeRequests.add(t.scopeName),this.Q.push(t)}else{if(this.seenFullScopeRequests.has(t.scopeName)||this.seenPartialScopeRequests.has(t.toKey()))continue;this.seenPartialScopeRequests.add(t.toKey()),this.Q.push(t)}}};function oa(n,e,t,r){const s=t.lookup(n.scopeName);if(!s){if(n.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const i=t.lookup(e);n instanceof Nt?en({baseGrammar:i,selfGrammar:s},r):Gn(n.ruleName,{baseGrammar:i,selfGrammar:s,repository:s.repository},r);const o=t.injections(n.scopeName);if(o)for(const l of o)r.add(new Nt(l))}function Gn(n,e,t){if(e.repository&&e.repository[n]){const r=e.repository[n];ln([r],e,t)}}function en(n,e){n.selfGrammar.patterns&&Array.isArray(n.selfGrammar.patterns)&&ln(n.selfGrammar.patterns,{...n,repository:n.selfGrammar.repository},e),n.selfGrammar.injections&&ln(Object.values(n.selfGrammar.injections),{...n,repository:n.selfGrammar.repository},e)}function ln(n,e,t){for(const r of n){if(t.visitedRule.has(r))continue;t.visitedRule.add(r);const s=r.repository?hs({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&ln(r.patterns,{...e,repository:s},t);const i=r.include;if(!i)continue;const o=ws(i);switch(o.kind){case 0:en({...e,selfGrammar:e.baseGrammar},t);break;case 1:en(e,t);break;case 2:Gn(o.ruleName,{...e,repository:s},t);break;case 3:case 4:const l=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(l){const a={baseGrammar:e.baseGrammar,selfGrammar:l,repository:s};o.kind===4?Gn(o.ruleName,a,t):en(a,t)}else o.kind===4?t.add(new ra(o.scopeName,o.ruleName)):t.add(new Nt(o.scopeName));break}}}var aa=class{kind=0},la=class{kind=1},ua=class{constructor(n){this.ruleName=n}kind=2},ca=class{constructor(n){this.scopeName=n}kind=3},da=class{constructor(n,e){this.scopeName=n,this.ruleName=e}kind=4};function ws(n){if(n==="$base")return new aa;if(n==="$self")return new la;const e=n.indexOf("#");if(e===-1)return new ca(n);if(e===0)return new ua(n.substring(1));{const t=n.substring(0,e),r=n.substring(e+1);return new da(t,r)}}var pa=/\\(\d+)/,Ir=/\\(\d+)/g,ma=-1,Es=-2;var jt=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(n,e,t,r){this.$location=n,this.id=e,this._name=t||null,this._nameIsCapturing=Kt.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Kt.hasCaptures(this._contentName)}get debugName(){const n=this.$location?`${fs(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${n}`}getName(n,e){return!this._nameIsCapturing||this._name===null||n===null||e===null?this._name:Kt.replaceCaptures(this._name,n,e)}getContentName(n,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Kt.replaceCaptures(this._contentName,n,e)}},ha=class extends jt{retokenizeCapturedWithRuleId;constructor(n,e,t,r,s){super(n,e,t,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(n,e){throw new Error("Not supported!")}compile(n,e){throw new Error("Not supported!")}compileAG(n,e,t,r){throw new Error("Not supported!")}},fa=class extends jt{_match;captures;_cachedCompiledPatterns;constructor(n,e,t,r,s){super(n,e,t,null),this._match=new Mt(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(n,e){e.push(this._match)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,r){return this._getCachedCompiledPatterns(n).compileAG(n,t,r)}_getCachedCompiledPatterns(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Vt,this.collectPatterns(n,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Cr=class extends jt{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(n,e,t,r,s){super(n,e,t,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(n,e){for(const t of this.patterns)n.getRule(t).collectPatterns(n,e)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,r){return this._getCachedCompiledPatterns(n).compileAG(n,t,r)}_getCachedCompiledPatterns(n){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Vt,this.collectPatterns(n,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Fn=class extends jt{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(n,e,t,r,s,i,o,l,a,u){super(n,e,t,r),this._begin=new Mt(s,this.id),this.beginCaptures=i,this._end=new Mt(o||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=a||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(n,e){return this._end.resolveBackReferences(n,e)}collectPatterns(n,e){e.push(this._begin)}compile(n,e){return this._getCachedCompiledPatterns(n,e).compile(n)}compileAG(n,e,t,r){return this._getCachedCompiledPatterns(n,e).compileAG(n,t,r)}_getCachedCompiledPatterns(n,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Vt;for(const t of this.patterns)n.getRule(t).collectPatterns(n,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},un=class extends jt{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(n,e,t,r,s,i,o,l,a){super(n,e,t,r),this._begin=new Mt(s,this.id),this.beginCaptures=i,this.whileCaptures=l,this._while=new Mt(o,Es),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=a.patterns,this.hasMissingPatterns=a.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(n,e){return this._while.resolveBackReferences(n,e)}collectPatterns(n,e){e.push(this._begin)}compile(n,e){return this._getCachedCompiledPatterns(n).compile(n)}compileAG(n,e,t,r){return this._getCachedCompiledPatterns(n).compileAG(n,t,r)}_getCachedCompiledPatterns(n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Vt;for(const e of this.patterns)n.getRule(e).collectPatterns(n,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(n,e){return this._getCachedCompiledWhilePatterns(n,e).compile(n)}compileWhileAG(n,e,t,r){return this._getCachedCompiledWhilePatterns(n,e).compileAG(n,t,r)}_getCachedCompiledWhilePatterns(n,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Vt,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||"￿"),this._cachedCompiledWhilePatterns}},Ss=class Se{static createCaptureRule(e,t,r,s,i){return e.registerRule(o=>new ha(t,o,r,s,i))}static getCompiledRuleId(e,t,r){return e.id||t.registerRule(s=>{if(e.id=s,e.match)return new fa(e.$vscodeTextmateLocation,e.id,e.name,e.match,Se._compileCaptures(e.captures,t,r));if(typeof e.begin>"u"){e.repository&&(r=hs({},r,e.repository));let i=e.patterns;return typeof i>"u"&&e.include&&(i=[{include:e.include}]),new Cr(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Se._compilePatterns(i,t,r))}return e.while?new un(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Se._compileCaptures(e.beginCaptures||e.captures,t,r),e.while,Se._compileCaptures(e.whileCaptures||e.captures,t,r),Se._compilePatterns(e.patterns,t,r)):new Fn(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Se._compileCaptures(e.beginCaptures||e.captures,t,r),e.end,Se._compileCaptures(e.endCaptures||e.captures,t,r),e.applyEndPatternLast,Se._compilePatterns(e.patterns,t,r))}),e.id}static _compileCaptures(e,t,r){let s=[];if(e){let i=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const l=parseInt(o,10);l>i&&(i=l)}for(let o=0;o<=i;o++)s[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const l=parseInt(o,10);let a=0;e[o].patterns&&(a=Se.getCompiledRuleId(e[o],t,r)),s[l]=Se.createCaptureRule(t,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,a)}}return s}static _compilePatterns(e,t,r){let s=[];if(e)for(let i=0,o=e.length;i<o;i++){const l=e[i];let a=-1;if(l.include){const u=ws(l.include);switch(u.kind){case 0:case 1:a=Se.getCompiledRuleId(r[l.include],t,r);break;case 2:let d=r[u.ruleName];d&&(a=Se.getCompiledRuleId(d,t,r));break;case 3:case 4:const p=u.scopeName,f=u.kind===4?u.ruleName:null,_=t.getExternalGrammar(p,r);if(_)if(f){let h=_.repository[f];h&&(a=Se.getCompiledRuleId(h,t,_.repository))}else a=Se.getCompiledRuleId(_.repository.$self,t,_.repository);break}}else a=Se.getCompiledRuleId(l,t,r);if(a!==-1){const u=t.getRule(a);let d=!1;if((u instanceof Cr||u instanceof Fn||u instanceof un)&&u.hasMissingPatterns&&u.patterns.length===0&&(d=!0),d)continue;s.push(a)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},Mt=class Rs{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,t){if(e&&typeof e=="string"){const r=e.length;let s=0,i=[],o=!1;for(let l=0;l<r;l++)if(e.charAt(l)==="\\"&&l+1<r){const u=e.charAt(l+1);u==="z"?(i.push(e.substring(s,l)),i.push("$(?!\\n)(?<!\\n)"),s=l+2):(u==="A"||u==="G")&&(o=!0),l++}this.hasAnchor=o,s===0?this.source=e:(i.push(e.substring(s,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,typeof this.source=="string"?this.hasBackReferences=pa.test(this.source):this.hasBackReferences=!1}clone(){return new Rs(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=t.map(s=>e.substring(s.start,s.end));return Ir.lastIndex=0,this.source.replace(Ir,(s,i)=>vs(r[parseInt(i,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],t=[],r=[],s=[],i,o,l,a;for(i=0,o=this.source.length;i<o;i++)l=this.source.charAt(i),e[i]=l,t[i]=l,r[i]=l,s[i]=l,l==="\\"&&i+1<o&&(a=this.source.charAt(i+1),a==="A"?(e[i+1]="￿",t[i+1]="￿",r[i+1]="A",s[i+1]="A"):a==="G"?(e[i+1]="￿",t[i+1]="G",r[i+1]="￿",s[i+1]="G"):(e[i+1]=a,t[i+1]=a,r[i+1]=a,s[i+1]=a),i++);return{A0_G0:e.join(""),A0_G1:t.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,t){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Vt=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(n){this._items.push(n),this._hasAnchors=this._hasAnchors||n.hasAnchor}unshift(n){this._items.unshift(n),this._hasAnchors=this._hasAnchors||n.hasAnchor}length(){return this._items.length}setSource(n,e){this._items[n].source!==e&&(this._disposeCaches(),this._items[n].setSource(e))}compile(n){if(!this._cached){let e=this._items.map(t=>t.source);this._cached=new Lr(n,e,this._items.map(t=>t.ruleId))}return this._cached}compileAG(n,e,t){return this._hasAnchors?e?t?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(n,e,t)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(n,e,t)),this._anchorCache.A1_G0):t?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(n,e,t)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(n,e,t)),this._anchorCache.A0_G0):this.compile(n)}_resolveAnchors(n,e,t){let r=this._items.map(s=>s.resolveAnchors(e,t));return new Lr(n,r,this._items.map(s=>s.ruleId))}},Lr=class{constructor(n,e,t){this.regExps=e,this.rules=t,this.scanner=n.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const n=[];for(let e=0,t=this.rules.length;e<t;e++)n.push("   - "+this.rules[e]+": "+this.regExps[e]);return n.join(`
`)}findNextMatchSync(n,e,t){const r=this.scanner.findNextMatchSync(n,e,t);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},In=class{constructor(n,e){this.languageId=n,this.tokenType=e}},ga=class qn{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,t){this._defaultAttributes=new In(e,8),this._embeddedLanguagesMatcher=new _a(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?qn._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new In(0,0);_getBasicScopeAttributes=new ys(e=>{const t=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new In(t,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(qn.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},_a=class{values;scopesRegExp;constructor(n){if(n.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(n);const e=n.map(([t,r])=>vs(t));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(n){if(!this.scopesRegExp)return;const e=n.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},Pr=class{constructor(n,e){this.stack=n,this.stoppedEarly=e}};function Ts(n,e,t,r,s,i,o,l){const a=e.content.length;let u=!1,d=-1;if(o){const _=va(n,e,t,r,s,i);s=_.stack,r=_.linePos,t=_.isFirstLine,d=_.anchorPosition}const p=Date.now();for(;!u;){if(l!==0&&Date.now()-p>l)return new Pr(s,!0);f()}return new Pr(s,!1);function f(){const _=ya(n,e,t,r,s,d);if(!_){i.produce(s,a),u=!0;return}const h=_.captureIndices,T=_.matchedRuleId,y=h&&h.length>0?h[0].end>r:!1;if(T===ma){const g=s.getRule(n);i.produce(s,h[0].start),s=s.withContentNameScopesList(s.nameScopesList),Pt(n,e,t,s,i,g.endCaptures,h),i.produce(s,h[0].end);const x=s;if(s=s.parent,d=x.getAnchorPos(),!y&&x.getEnterPos()===r){s=x,i.produce(s,a),u=!0;return}}else{const g=n.getRule(T);i.produce(s,h[0].start);const x=s,b=g.getName(e.content,h),D=s.contentNameScopesList.pushAttributed(b,n);if(s=s.push(T,r,d,h[0].end===a,null,D,D),g instanceof Fn){const M=g;Pt(n,e,t,s,i,M.beginCaptures,h),i.produce(s,h[0].end),d=h[0].end;const U=M.getContentName(e.content,h),X=D.pushAttributed(U,n);if(s=s.withContentNameScopesList(X),M.endHasBackReferences&&(s=s.withEndRule(M.getEndWithResolvedBackReferences(e.content,h))),!y&&x.hasSameRuleAs(s)){s=s.pop(),i.produce(s,a),u=!0;return}}else if(g instanceof un){const M=g;Pt(n,e,t,s,i,M.beginCaptures,h),i.produce(s,h[0].end),d=h[0].end;const U=M.getContentName(e.content,h),X=D.pushAttributed(U,n);if(s=s.withContentNameScopesList(X),M.whileHasBackReferences&&(s=s.withEndRule(M.getWhileWithResolvedBackReferences(e.content,h))),!y&&x.hasSameRuleAs(s)){s=s.pop(),i.produce(s,a),u=!0;return}}else if(Pt(n,e,t,s,i,g.captures,h),i.produce(s,h[0].end),s=s.pop(),!y){s=s.safePop(),i.produce(s,a),u=!0;return}}h[0].end>r&&(r=h[0].end,t=!1)}}function va(n,e,t,r,s,i){let o=s.beginRuleCapturedEOL?0:-1;const l=[];for(let a=s;a;a=a.pop()){const u=a.getRule(n);u instanceof un&&l.push({rule:u,stack:a})}for(let a=l.pop();a;a=l.pop()){const{ruleScanner:u,findOptions:d}=xa(a.rule,n,a.stack.endRule,t,r===o),p=u.findNextMatchSync(e,r,d);if(p){if(p.ruleId!==Es){s=a.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(i.produce(a.stack,p.captureIndices[0].start),Pt(n,e,t,a.stack,i,a.rule.whileCaptures,p.captureIndices),i.produce(a.stack,p.captureIndices[0].end),o=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,t=!1))}else{s=a.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:o,isFirstLine:t}}function ya(n,e,t,r,s,i){const o=ba(n,e,t,r,s,i),l=n.getInjections();if(l.length===0)return o;const a=ka(l,n,e,t,r,s,i);if(!a)return o;if(!o)return a;const u=o.captureIndices[0].start,d=a.captureIndices[0].start;return d<u||a.priorityMatch&&d===u?a:o}function ba(n,e,t,r,s,i){const o=s.getRule(n),{ruleScanner:l,findOptions:a}=As(o,n,s.endRule,t,r===i),u=l.findNextMatchSync(e,r,a);return u?{captureIndices:u.captureIndices,matchedRuleId:u.ruleId}:null}function ka(n,e,t,r,s,i,o){let l=Number.MAX_VALUE,a=null,u,d=0;const p=i.contentNameScopesList.getScopeNames();for(let f=0,_=n.length;f<_;f++){const h=n[f];if(!h.matcher(p))continue;const T=e.getRule(h.ruleId),{ruleScanner:y,findOptions:g}=As(T,e,null,r,s===o),x=y.findNextMatchSync(t,s,g);if(!x)continue;const b=x.captureIndices[0].start;if(!(b>=l)&&(l=b,a=x.captureIndices,u=x.ruleId,d=h.priority,l===s))break}return a?{priorityMatch:d===-1,captureIndices:a,matchedRuleId:u}:null}function As(n,e,t,r,s){return{ruleScanner:n.compileAG(e,t,r,s),findOptions:0}}function xa(n,e,t,r,s){return{ruleScanner:n.compileWhileAG(e,t,r,s),findOptions:0}}function Pt(n,e,t,r,s,i,o){if(i.length===0)return;const l=e.content,a=Math.min(i.length,o.length),u=[],d=o[0].end;for(let p=0;p<a;p++){const f=i[p];if(f===null)continue;const _=o[p];if(_.length===0)continue;if(_.start>d)break;for(;u.length>0&&u[u.length-1].endPos<=_.start;)s.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?s.produceFromScopes(u[u.length-1].scopes,_.start):s.produce(r,_.start),f.retokenizeCapturedWithRuleId){const T=f.getName(l,o),y=r.contentNameScopesList.pushAttributed(T,n),g=f.getContentName(l,o),x=y.pushAttributed(g,n),b=r.push(f.retokenizeCapturedWithRuleId,_.start,-1,!1,null,y,x),D=n.createOnigString(l.substring(0,_.end));Ts(n,D,t&&_.start===0,_.start,b,s,!1,0),xs(D);continue}const h=f.getName(l,o);if(h!==null){const y=(u.length>0?u[u.length-1].scopes:r.contentNameScopesList).pushAttributed(h,n);u.push(new wa(y,_.end))}}for(;u.length>0;)s.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}var wa=class{scopes;endPos;constructor(n,e){this.scopes=n,this.endPos=e}};function Ea(n,e,t,r,s,i,o,l){return new Ra(n,e,t,r,s,i,o,l)}function Or(n,e,t,r,s){const i=an(e,cn),o=Ss.getCompiledRuleId(t,r,s.repository);for(const l of i)n.push({debugSelector:e,matcher:l.matcher,ruleId:o,grammar:s,priority:l.priority})}function cn(n,e){if(e.length<n.length)return!1;let t=0;return n.every(r=>{for(let s=t;s<e.length;s++)if(Sa(e[s],r))return t=s+1,!0;return!1})}function Sa(n,e){if(!n)return!1;if(n===e)return!0;const t=e.length;return n.length>t&&n.substr(0,t)===e&&n[t]==="."}var Ra=class{constructor(n,e,t,r,s,i,o,l){if(this._rootScopeName=n,this.balancedBracketSelectors=i,this._onigLib=l,this._basicScopeAttributesProvider=new ga(t,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=Dr(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const a of Object.keys(s)){const u=an(a,cn);for(const d of u)this._tokenTypeMatchers.push({matcher:d.matcher,type:s[a]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const n of this._ruleId2desc)n&&n.dispose()}createOnigScanner(n){return this._onigLib.createOnigScanner(n)}createOnigString(n){return this._onigLib.createOnigString(n)}getMetadataForScope(n){return this._basicScopeAttributesProvider.getBasicScopeAttributes(n)}_collectInjections(){const n={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],t=this._rootScopeName,r=n.lookup(t);if(r){const s=r.injections;if(s)for(let o in s)Or(e,o,s[o],this,r);const i=this._grammarRepository.injections(t);i&&i.forEach(o=>{const l=this.getExternalGrammar(o);if(l){const a=l.injectionSelector;a&&Or(e,a,l,this,l)}})}return e.sort((s,i)=>s.priority-i.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(n){const e=++this._lastRuleId,t=n(e);return this._ruleId2desc[e]=t,t}getRule(n){return this._ruleId2desc[n]}getExternalGrammar(n,e){if(this._includedGrammars[n])return this._includedGrammars[n];if(this._grammarRepository){const t=this._grammarRepository.lookup(n);if(t)return this._includedGrammars[n]=Dr(t,e&&e.$base),this._includedGrammars[n]}}tokenizeLine(n,e,t=0){const r=this._tokenize(n,e,!1,t);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(n,e,t=0){const r=this._tokenize(n,e,!0,t);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(n,e,t,r){this._rootId===-1&&(this._rootId=Ss.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===Hn.NULL){s=!0;const u=this._basicScopeAttributesProvider.getDefaultAttributes(),d=this.themeProvider.getDefaults(),p=xt.set(0,u.languageId,u.tokenType,null,d.fontStyle,d.foregroundId,d.backgroundId),f=this.getRule(this._rootId).getName(null,null);let _;f?_=$t.createRootAndLookUpScopeName(f,p,this):_=$t.createRoot("unknown",p),e=new Hn(null,this._rootId,-1,-1,!1,null,_,_)}else s=!1,e.reset();n=n+`
`;const i=this.createOnigString(n),o=i.content.length,l=new Aa(t,n,this._tokenTypeMatchers,this.balancedBracketSelectors),a=Ts(this,i,s,0,e,l,!0,r);return xs(i),{lineLength:o,lineTokens:l,ruleStack:a.stack,stoppedEarly:a.stoppedEarly}}};function Dr(n,e){return n=qo(n),n.repository=n.repository||{},n.repository.$self={$vscodeTextmateLocation:n.$vscodeTextmateLocation,patterns:n.patterns,name:n.scopeName},n.repository.$base=e||n.repository.$self,n}var $t=class qe{constructor(e,t,r){this.parent=e,this.scopePath=t,this.tokenAttributes=r}static fromExtension(e,t){let r=e,s=e?.scopePath??null;for(const i of t)s=An.push(s,i.scopeNames),r=new qe(r,s,i.encodedTokenAttributes);return r}static createRoot(e,t){return new qe(null,new An(null,e),t)}static createRootAndLookUpScopeName(e,t,r){const s=r.getMetadataForScope(e),i=new An(null,e),o=r.themeProvider.themeMatch(i),l=qe.mergeAttributes(t,s,o);return new qe(null,i,l)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return qe.equals(this,e)}static equals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}while(!0)}static mergeAttributes(e,t,r){let s=-1,i=0,o=0;return r!==null&&(s=r.fontStyle,i=r.foregroundId,o=r.backgroundId),xt.set(e,t.languageId,t.tokenType,null,s,i,o)}pushAttributed(e,t){if(e===null)return this;if(e.indexOf(" ")===-1)return qe._pushAttributed(this,e,t);const r=e.split(/ /g);let s=this;for(const i of r)s=qe._pushAttributed(s,i,t);return s}static _pushAttributed(e,t,r){const s=r.getMetadataForScope(t),i=e.scopePath.push(t),o=r.themeProvider.themeMatch(i),l=qe.mergeAttributes(e.tokenAttributes,s,o);return new qe(e,i,l)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const t=[];let r=this;for(;r&&r!==e;)t.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?t.reverse():void 0}},Hn=class ct{constructor(e,t,r,s,i,o,l,a){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=i,this.endRule=o,this.nameScopesList=l,this.contentNameScopesList=a,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new ct(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:ct._equals(this,e)}static _equals(e,t){return e===t?!0:this._structuralEquals(e,t)?$t.equals(e.contentNameScopesList,t.contentNameScopesList):!1}static _structuralEquals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){ct._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,r,s,i,o,l){return new ct(this,e,t,r,s,i,o,l)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new ct(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,t){const r=$t.fromExtension(e?.nameScopesList??null,t.nameScopesList);return new ct(e,t.ruleId,t.enterPos??-1,t.anchorPos??-1,t.beginRuleCapturedEOL,t.endRule,r,$t.fromExtension(r,t.contentNameScopesList))}},Ta=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(n,e){this.balancedBracketScopes=n.flatMap(t=>t==="*"?(this.allowAny=!0,[]):an(t,cn).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(t=>an(t,cn).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(n){for(const e of this.unbalancedBracketScopes)if(e(n))return!1;for(const e of this.balancedBracketScopes)if(e(n))return!0;return this.allowAny}},Aa=class{constructor(n,e,t,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=n,this._tokenTypeOverrides=t,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(n,e){this.produceFromScopes(n.contentNameScopesList,e)}produceFromScopes(n,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=n?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=n?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(i)&&(r=xt.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(i))}if(s&&(r=xt.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const t=n?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:t}),this._lastTokenEndIndex=e}getResult(n,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(n,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(n,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(n,e),this._binaryTokens[this._binaryTokens.length-2]=0);const t=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)t[r]=this._binaryTokens[r];return t}},Ia=class{constructor(n,e){this._onigLib=e,this._theme=n}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const n of this._grammars.values())n.dispose()}setTheme(n){this._theme=n}getColorMap(){return this._theme.getColorMap()}addGrammar(n,e){this._rawGrammars.set(n.scopeName,n),e&&this._injectionGrammars.set(n.scopeName,e)}lookup(n){return this._rawGrammars.get(n)}injections(n){return this._injectionGrammars.get(n)}getDefaults(){return this._theme.getDefaults()}themeMatch(n){return this._theme.match(n)}grammarForScopeName(n,e,t,r,s){if(!this._grammars.has(n)){let i=this._rawGrammars.get(n);if(!i)return null;this._grammars.set(n,Ea(n,i,e,t,r,s,this,this._onigLib))}return this._grammars.get(n)}},Ca=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new Ia(on.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(on.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,r){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,t,r){return this._loadGrammar(e,t,r.embeddedLanguages,r.tokenTypes,new Ta(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,r,s,i){const o=new ia(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(l=>this._loadSingleGrammar(l.scopeName)),o.processQueue();return this._grammarForScopeName(e,t,r,s,i)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const t=this._options.loadGrammar(e);if(t){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,r)}}addGrammar(e,t=[],r=0,s=null){return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,t=0,r=null,s=null,i=null){return this._syncRegistry.grammarForScopeName(e,t,r,s,i)}},Wn=Hn.NULL;const La=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class zt{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}zt.prototype.normal={};zt.prototype.property={};zt.prototype.space=void 0;function Is(n,e){const t={},r={};for(const s of n)Object.assign(t,s.property),Object.assign(r,s.normal);return new zt(t,r,e)}function Kn(n){return n.toLowerCase()}class Le{constructor(e,t){this.attribute=t,this.property=e}}Le.prototype.attribute="";Le.prototype.booleanish=!1;Le.prototype.boolean=!1;Le.prototype.commaOrSpaceSeparated=!1;Le.prototype.commaSeparated=!1;Le.prototype.defined=!1;Le.prototype.mustUseProperty=!1;Le.prototype.number=!1;Le.prototype.overloadedBoolean=!1;Le.prototype.property="";Le.prototype.spaceSeparated=!1;Le.prototype.space=void 0;let Pa=0;const W=ft(),he=ft(),Qn=ft(),I=ft(),ae=ft(),bt=ft(),De=ft();function ft(){return 2**++Pa}const Jn=Object.freeze(Object.defineProperty({__proto__:null,boolean:W,booleanish:he,commaOrSpaceSeparated:De,commaSeparated:bt,number:I,overloadedBoolean:Qn,spaceSeparated:ae},Symbol.toStringTag,{value:"Module"})),Cn=Object.keys(Jn);class ur extends Le{constructor(e,t,r,s){let i=-1;if(super(e,t),$r(this,"space",s),typeof r=="number")for(;++i<Cn.length;){const o=Cn[i];$r(this,Cn[i],(r&Jn[o])===Jn[o])}}}ur.prototype.defined=!0;function $r(n,e,t){t&&(n[e]=t)}function Et(n){const e={},t={};for(const[r,s]of Object.entries(n.properties)){const i=new ur(r,n.transform(n.attributes||{},r),s,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,t[Kn(r)]=r,t[Kn(i.attribute)]=r}return new zt(e,t,n.space)}const Cs=Et({properties:{ariaActiveDescendant:null,ariaAtomic:he,ariaAutoComplete:null,ariaBusy:he,ariaChecked:he,ariaColCount:I,ariaColIndex:I,ariaColSpan:I,ariaControls:ae,ariaCurrent:null,ariaDescribedBy:ae,ariaDetails:null,ariaDisabled:he,ariaDropEffect:ae,ariaErrorMessage:null,ariaExpanded:he,ariaFlowTo:ae,ariaGrabbed:he,ariaHasPopup:null,ariaHidden:he,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ae,ariaLevel:I,ariaLive:null,ariaModal:he,ariaMultiLine:he,ariaMultiSelectable:he,ariaOrientation:null,ariaOwns:ae,ariaPlaceholder:null,ariaPosInSet:I,ariaPressed:he,ariaReadOnly:he,ariaRelevant:null,ariaRequired:he,ariaRoleDescription:ae,ariaRowCount:I,ariaRowIndex:I,ariaRowSpan:I,ariaSelected:he,ariaSetSize:I,ariaSort:null,ariaValueMax:I,ariaValueMin:I,ariaValueNow:I,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Ls(n,e){return e in n?n[e]:e}function Ps(n,e){return Ls(n,e.toLowerCase())}const Oa=Et({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:bt,acceptCharset:ae,accessKey:ae,action:null,allow:null,allowFullScreen:W,allowPaymentRequest:W,allowUserMedia:W,alt:null,as:null,async:W,autoCapitalize:null,autoComplete:ae,autoFocus:W,autoPlay:W,blocking:ae,capture:null,charSet:null,checked:W,cite:null,className:ae,cols:I,colSpan:null,content:null,contentEditable:he,controls:W,controlsList:ae,coords:I|bt,crossOrigin:null,data:null,dateTime:null,decoding:null,default:W,defer:W,dir:null,dirName:null,disabled:W,download:Qn,draggable:he,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:W,formTarget:null,headers:ae,height:I,hidden:Qn,high:I,href:null,hrefLang:null,htmlFor:ae,httpEquiv:ae,id:null,imageSizes:null,imageSrcSet:null,inert:W,inputMode:null,integrity:null,is:null,isMap:W,itemId:null,itemProp:ae,itemRef:ae,itemScope:W,itemType:ae,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:W,low:I,manifest:null,max:null,maxLength:I,media:null,method:null,min:null,minLength:I,multiple:W,muted:W,name:null,nonce:null,noModule:W,noValidate:W,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:W,optimum:I,pattern:null,ping:ae,placeholder:null,playsInline:W,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:W,referrerPolicy:null,rel:ae,required:W,reversed:W,rows:I,rowSpan:I,sandbox:ae,scope:null,scoped:W,seamless:W,selected:W,shadowRootClonable:W,shadowRootDelegatesFocus:W,shadowRootMode:null,shape:null,size:I,sizes:null,slot:null,span:I,spellCheck:he,src:null,srcDoc:null,srcLang:null,srcSet:null,start:I,step:null,style:null,tabIndex:I,target:null,title:null,translate:null,type:null,typeMustMatch:W,useMap:null,value:he,width:I,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ae,axis:null,background:null,bgColor:null,border:I,borderColor:null,bottomMargin:I,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:W,declare:W,event:null,face:null,frame:null,frameBorder:null,hSpace:I,leftMargin:I,link:null,longDesc:null,lowSrc:null,marginHeight:I,marginWidth:I,noResize:W,noHref:W,noShade:W,noWrap:W,object:null,profile:null,prompt:null,rev:null,rightMargin:I,rules:null,scheme:null,scrolling:he,standby:null,summary:null,text:null,topMargin:I,valueType:null,version:null,vAlign:null,vLink:null,vSpace:I,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:W,disableRemotePlayback:W,prefix:null,property:null,results:I,security:null,unselectable:null},space:"html",transform:Ps}),Da=Et({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:De,accentHeight:I,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:I,amplitude:I,arabicForm:null,ascent:I,attributeName:null,attributeType:null,azimuth:I,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:I,by:null,calcMode:null,capHeight:I,className:ae,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:I,diffuseConstant:I,direction:null,display:null,dur:null,divisor:I,dominantBaseline:null,download:W,dx:null,dy:null,edgeMode:null,editable:null,elevation:I,enableBackground:null,end:null,event:null,exponent:I,externalResourcesRequired:null,fill:null,fillOpacity:I,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:bt,g2:bt,glyphName:bt,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:I,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:I,horizOriginX:I,horizOriginY:I,id:null,ideographic:I,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:I,k:I,k1:I,k2:I,k3:I,k4:I,kernelMatrix:De,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:I,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:I,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:I,overlineThickness:I,paintOrder:null,panose1:null,path:null,pathLength:I,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ae,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:I,pointsAtY:I,pointsAtZ:I,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:De,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:De,rev:De,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:De,requiredFeatures:De,requiredFonts:De,requiredFormats:De,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:I,specularExponent:I,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:I,strikethroughThickness:I,string:null,stroke:null,strokeDashArray:De,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:I,strokeOpacity:I,strokeWidth:null,style:null,surfaceScale:I,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:De,tabIndex:I,tableValues:null,target:null,targetX:I,targetY:I,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:De,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:I,underlineThickness:I,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:I,values:null,vAlphabetic:I,vMathematical:I,vectorEffect:null,vHanging:I,vIdeographic:I,version:null,vertAdvY:I,vertOriginX:I,vertOriginY:I,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:I,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ls}),Os=Et({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),Ds=Et({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Ps}),$s=Et({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),$a=/[A-Z]/g,Nr=/-[a-z]/g,Na=/^data[-\w.:]+$/i;function Ma(n,e){const t=Kn(e);let r=e,s=Le;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&Na.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(Nr,Ba);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!Nr.test(i)){let o=i.replace($a,Va);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=ur}return new s(r,e)}function Va(n){return"-"+n.toLowerCase()}function Ba(n){return n.charAt(1).toUpperCase()}const Ua=Is([Cs,Oa,Os,Ds,$s],"html"),Ns=Is([Cs,Da,Os,Ds,$s],"svg"),Mr={}.hasOwnProperty;function ja(n,e){const t=e||{};function r(s,...i){let o=r.invalid;const l=r.handlers;if(s&&Mr.call(s,n)){const a=String(s[n]);o=Mr.call(l,a)?l[a]:r.unknown}if(o)return o.call(this,s,...i)}return r.handlers=t.handlers||{},r.invalid=t.invalid,r.unknown=t.unknown,r}const za=/["&'<>`]/g,Ga=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fa=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,qa=/[|\\{}()[\]^$+*?.]/g,Vr=new WeakMap;function Ha(n,e){if(n=n.replace(e.subset?Wa(e.subset):za,r),e.subset||e.escapeOnly)return n;return n.replace(Ga,t).replace(Fa,r);function t(s,i,o){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,o.charCodeAt(i+2),e)}function r(s,i,o){return e.format(s.charCodeAt(0),o.charCodeAt(i+1),e)}}function Wa(n){let e=Vr.get(n);return e||(e=Ka(n),Vr.set(n,e)),e}function Ka(n){const e=[];let t=-1;for(;++t<n.length;)e.push(n[t].replace(qa,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const Qa=/[\dA-Fa-f]/;function Ja(n,e,t){const r="&#x"+n.toString(16).toUpperCase();return t&&e&&!Qa.test(String.fromCharCode(e))?r:r+";"}const Za=/\d/;function Xa(n,e,t){const r="&#"+String(n);return t&&e&&!Za.test(String.fromCharCode(e))?r:r+";"}const Ya=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Ln={nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},el=["cent","copy","divide","gt","lt","not","para","times"],Ms={}.hasOwnProperty,Zn={};let Qt;for(Qt in Ln)Ms.call(Ln,Qt)&&(Zn[Ln[Qt]]=Qt);const tl=/[^\dA-Za-z]/;function nl(n,e,t,r){const s=String.fromCharCode(n);if(Ms.call(Zn,s)){const i=Zn[s],o="&"+i;return t&&Ya.includes(i)&&!el.includes(i)&&(!r||e&&e!==61&&tl.test(String.fromCharCode(e)))?o:o+";"}return""}function rl(n,e,t){let r=Ja(n,e,t.omitOptionalSemicolons),s;if((t.useNamedReferences||t.useShortestReferences)&&(s=nl(n,e,t.omitOptionalSemicolons,t.attribute)),(t.useShortestReferences||!s)&&t.useShortestReferences){const i=Xa(n,e,t.omitOptionalSemicolons);i.length<r.length&&(r=i)}return s&&(!t.useShortestReferences||s.length<r.length)?s:r}function kt(n,e){return Ha(n,Object.assign({format:rl},e))}const sl=/^>|^->|<!--|-->|--!>|<!-$/g,il=[">"],ol=["<",">"];function al(n,e,t,r){return r.settings.bogusComments?"<?"+kt(n.value,Object.assign({},r.settings.characterReferences,{subset:il}))+">":"<!--"+n.value.replace(sl,s)+"-->";function s(i){return kt(i,Object.assign({},r.settings.characterReferences,{subset:ol}))}}function ll(n,e,t,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Br(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=t.indexOf(e);for(;s!==-1;)r++,s=t.indexOf(e,s+e.length);return r}function ul(n,e){const t=e||{};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}function cl(n){return n.join(" ").trim()}const dl=/[ \t\n\f\r]/g;function cr(n){return typeof n=="object"?n.type==="text"?Ur(n.value):!1:Ur(n)}function Ur(n){return n.replace(dl,"")===""}const ve=Bs(1),Vs=Bs(-1),pl=[];function Bs(n){return e;function e(t,r,s){const i=t?t.children:pl;let o=(r||0)+n,l=i[o];if(!s)for(;l&&cr(l);)o+=n,l=i[o];return l}}const ml={}.hasOwnProperty;function Us(n){return e;function e(t,r,s){return ml.call(n,t.tagName)&&n[t.tagName](t,r,s)}}const dr=Us({body:fl,caption:Pn,colgroup:Pn,dd:yl,dt:vl,head:Pn,html:hl,li:_l,optgroup:bl,option:kl,p:gl,rp:jr,rt:jr,tbody:wl,td:zr,tfoot:El,th:zr,thead:xl,tr:Sl});function Pn(n,e,t){const r=ve(t,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&cr(r.value.charAt(0)))}function hl(n,e,t){const r=ve(t,e);return!r||r.type!=="comment"}function fl(n,e,t){const r=ve(t,e);return!r||r.type!=="comment"}function gl(n,e,t){const r=ve(t,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!t||!(t.type==="element"&&(t.tagName==="a"||t.tagName==="audio"||t.tagName==="del"||t.tagName==="ins"||t.tagName==="map"||t.tagName==="noscript"||t.tagName==="video"))}function _l(n,e,t){const r=ve(t,e);return!r||r.type==="element"&&r.tagName==="li"}function vl(n,e,t){const r=ve(t,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function yl(n,e,t){const r=ve(t,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function jr(n,e,t){const r=ve(t,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function bl(n,e,t){const r=ve(t,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function kl(n,e,t){const r=ve(t,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function xl(n,e,t){const r=ve(t,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function wl(n,e,t){const r=ve(t,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function El(n,e,t){return!ve(t,e)}function Sl(n,e,t){const r=ve(t,e);return!r||r.type==="element"&&r.tagName==="tr"}function zr(n,e,t){const r=ve(t,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const Rl=Us({body:Il,colgroup:Cl,head:Al,html:Tl,tbody:Ll});function Tl(n){const e=ve(n,-1);return!e||e.type!=="comment"}function Al(n){const e=new Set;for(const r of n.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const t=n.children[0];return!t||t.type==="element"}function Il(n){const e=ve(n,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&cr(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Cl(n,e,t){const r=Vs(t,e),s=ve(n,-1,!0);return t&&r&&r.type==="element"&&r.tagName==="colgroup"&&dr(r,t.children.indexOf(r),t)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function Ll(n,e,t){const r=Vs(t,e),s=ve(n,-1);return t&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&dr(r,t.children.indexOf(r),t)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Jt={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Pl(n,e,t,r){const s=r.schema,i=s.space==="svg"?!1:r.settings.omitOptionalTags;let o=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(n.tagName.toLowerCase());const l=[];let a;s.space==="html"&&n.tagName==="svg"&&(r.schema=Ns);const u=Ol(r,n.properties),d=r.all(s.space==="html"&&n.tagName==="template"?n.content:n);return r.schema=s,d&&(o=!1),(u||!i||!Rl(n,e,t))&&(l.push("<",n.tagName,u?" "+u:""),o&&(s.space==="svg"||r.settings.closeSelfClosing)&&(a=u.charAt(u.length-1),(!r.settings.tightSelfClosing||a==="/"||a&&a!=='"'&&a!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(d),!o&&(!i||!dr(n,e,t))&&l.push("</"+n.tagName+">"),l.join("")}function Ol(n,e){const t=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const i=Dl(n,s,e[s]);i&&t.push(i)}}for(;++r<t.length;){const i=n.settings.tightAttributes?t[r].charAt(t[r].length-1):void 0;r!==t.length-1&&i!=='"'&&i!=="'"&&(t[r]+=" ")}return t.join("")}function Dl(n,e,t){const r=Ma(n.schema,e),s=n.settings.allowParseErrors&&n.schema.space==="html"?0:1,i=n.settings.allowDangerousCharacters?0:1;let o=n.quote,l;if(r.overloadedBoolean&&(t===r.attribute||t==="")?t=!0:(r.boolean||r.overloadedBoolean)&&(typeof t!="string"||t===r.attribute||t==="")&&(t=!!t),t==null||t===!1||typeof t=="number"&&Number.isNaN(t))return"";const a=kt(r.attribute,Object.assign({},n.settings.characterReferences,{subset:Jt.name[s][i]}));return t===!0||(t=Array.isArray(t)?(r.commaSeparated?ul:cl)(t,{padLeft:!n.settings.tightCommaSeparatedLists}):String(t),n.settings.collapseEmptyAttributes&&!t)?a:(n.settings.preferUnquoted&&(l=kt(t,Object.assign({},n.settings.characterReferences,{attribute:!0,subset:Jt.unquoted[s][i]}))),l!==t&&(n.settings.quoteSmart&&Br(t,o)>Br(t,n.alternative)&&(o=n.alternative),l=o+kt(t,Object.assign({},n.settings.characterReferences,{subset:(o==="'"?Jt.single:Jt.double)[s][i],attribute:!0}))+o),a+(l&&"="+l))}const $l=["<","&"];function js(n,e,t,r){return t&&t.type==="element"&&(t.tagName==="script"||t.tagName==="style")?n.value:kt(n.value,Object.assign({},r.settings.characterReferences,{subset:$l}))}function Nl(n,e,t,r){return r.settings.allowDangerousHtml?n.value:js(n,e,t,r)}function Ml(n,e,t,r){return r.all(n)}const Vl=ja("type",{invalid:Bl,unknown:Ul,handlers:{comment:al,doctype:ll,element:Pl,raw:Nl,root:Ml,text:js}});function Bl(n){throw new Error("Expected node, not `"+n+"`")}function Ul(n){const e=n;throw new Error("Cannot compile unknown node `"+e.type+"`")}const jl={},zl={},Gl=[];function Fl(n,e){const t=e||jl,r=t.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:ql,all:Hl,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||La,characterReferences:t.characterReferences||zl,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:t.space==="svg"?Ns:Ua,quote:r,alternative:s}.one(Array.isArray(n)?{type:"root",children:n}:n,void 0,void 0)}function ql(n,e,t){return Vl(n,e,t,this)}function Hl(n){const e=[],t=n&&n.children||Gl;let r=-1;for(;++r<t.length;)e[r]=this.one(t[r],r,n);return e.join("")}function dn(n,e){const t=typeof n=="string"?{}:{...n.colorReplacements},r=typeof n=="string"?n:n.name;for(const[s,i]of Object.entries(e?.colorReplacements||{}))typeof i=="string"?t[s]=i:s===r&&Object.assign(t,i);return t}function at(n,e){return n&&(e?.[n?.toLowerCase()]||n)}function Wl(n){return Array.isArray(n)?n:[n]}async function zs(n){return Promise.resolve(typeof n=="function"?n():n).then(e=>e.default||e)}function pr(n){return!n||["plaintext","txt","text","plain"].includes(n)}function Gs(n){return n==="ansi"||pr(n)}function mr(n){return n==="none"}function Fs(n){return mr(n)}function qs(n,e){if(!e)return n;n.properties||={},n.properties.class||=[],typeof n.properties.class=="string"&&(n.properties.class=n.properties.class.split(/\s+/g)),Array.isArray(n.properties.class)||(n.properties.class=[]);const t=Array.isArray(e)?e:e.split(/\s+/g);for(const r of t)r&&!n.properties.class.includes(r)&&n.properties.class.push(r);return n}function bn(n,e=!1){if(n.length===0)return[["",0]];const t=n.split(/(\r?\n)/g);let r=0;const s=[];for(let i=0;i<t.length;i+=2){const o=e?t[i]+(t[i+1]||""):t[i];s.push([o,r]),r+=t[i].length,r+=t[i+1]?.length||0}return s}function Kl(n){const e=bn(n,!0).map(([s])=>s);function t(s){if(s===n.length)return{line:e.length-1,character:e[e.length-1].length};let i=s,o=0;for(const l of e){if(i<l.length)break;i-=l.length,o++}return{line:o,character:i}}function r(s,i){let o=0;for(let l=0;l<s;l++)o+=e[l].length;return o+=i,o}return{lines:e,indexToPos:t,posToIndex:r}}function Ql(n,e,t){const r=new Set;for(const i of n.matchAll(/:?lang=["']([^"']+)["']/g)){const o=i[1].toLowerCase().trim();o&&r.add(o)}for(const i of n.matchAll(/(?:```|~~~)([\w-]+)/g)){const o=i[1].toLowerCase().trim();o&&r.add(o)}for(const i of n.matchAll(/\\begin\{([\w-]+)\}/g)){const o=i[1].toLowerCase().trim();o&&r.add(o)}for(const i of n.matchAll(/<script\s+(?:type|lang)=["']([^"']+)["']/gi)){const o=i[1].toLowerCase().trim(),l=o.includes("/")?o.split("/").pop():o;l&&r.add(l)}if(!t)return Array.from(r);const s=t.getBundledLanguages();return Array.from(r).filter(i=>i&&s[i])}const hr="light-dark()",Jl=["color","background-color"];function Zl(n,e){let t=0;const r=[];for(const s of e)s>t&&r.push({...n,content:n.content.slice(t,s),offset:n.offset+t}),t=s;return t<n.content.length&&r.push({...n,content:n.content.slice(t),offset:n.offset+t}),r}function Xl(n,e){const t=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return t.length?n.map(r=>r.flatMap(s=>{const i=t.filter(o=>s.offset<o&&o<s.offset+s.content.length).map(o=>o-s.offset).sort((o,l)=>o-l);return i.length?Zl(s,i):s})):n}function Yl(n,e,t,r,s="css-vars"){const i={content:n.content,explanation:n.explanation,offset:n.offset},o=e.map(d=>pn(n.variants[d])),l=new Set(o.flatMap(d=>Object.keys(d))),a={},u=(d,p)=>{const f=p==="color"?"":p==="background-color"?"-bg":`-${p}`;return t+e[d]+(p==="color"?"":f)};return o.forEach((d,p)=>{for(const f of l){const _=d[f]||"inherit";if(p===0&&r&&Jl.includes(f))if(r===hr&&o.length>1){const h=e.findIndex(x=>x==="light"),T=e.findIndex(x=>x==="dark");if(h===-1||T===-1)throw new ge('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const y=o[h][f]||"inherit",g=o[T][f]||"inherit";a[f]=`light-dark(${y}, ${g})`,s==="css-vars"&&(a[u(p,f)]=_)}else a[f]=_;else s==="css-vars"&&(a[u(p,f)]=_)}}),i.htmlStyle=a,i}function pn(n){const e={};if(n.color&&(e.color=n.color),n.bgColor&&(e["background-color"]=n.bgColor),n.fontStyle){n.fontStyle&Re.Italic&&(e["font-style"]="italic"),n.fontStyle&Re.Bold&&(e["font-weight"]="bold");const t=[];n.fontStyle&Re.Underline&&t.push("underline"),n.fontStyle&Re.Strikethrough&&t.push("line-through"),t.length&&(e["text-decoration"]=t.join(" "))}return e}function Xn(n){return typeof n=="string"?n:Object.entries(n).map(([e,t])=>`${e}:${t}`).join(";")}const Hs=new WeakMap;function kn(n,e){Hs.set(n,e)}function Bt(n){return Hs.get(n)}class St{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new St(Object.fromEntries(Wl(t).map(r=>[r,Wn])),e)}constructor(...e){if(e.length===2){const[t,r]=e;this.lang=r,this._stacks=t}else{const[t,r,s]=e;this.lang=r,this._stacks={[s]:t}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return eu(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function eu(n){const e=[],t=new Set;function r(s){if(t.has(s))return;t.add(s);const i=s?.nameScopesList?.scopeName;i&&e.push(i),s.parent&&r(s.parent)}return r(n),e}function tu(n,e){if(!(n instanceof St))throw new ge("Invalid grammar state");return n.getInternalStack(e)}function nu(){const n=new WeakMap;function e(t){if(!n.has(t.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>t.source.length)throw new ge(`Invalid decoration offset: ${o}. Code length: ${t.source.length}`);return{...s.indexToPos(o),offset:o}}else{const l=s.lines[o.line];if(l===void 0)throw new ge(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${s.lines.length}`);let a=o.character;if(a<0&&(a=l.length+a),a<0||a>l.length)throw new ge(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${l.length}`);return{...o,character:a,offset:s.posToIndex(o.line,a)}}};const s=Kl(t.source),i=(t.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));ru(i),n.set(t.meta,{decorations:i,converter:s,source:t.source})}return n.get(t.meta)}return{name:"shiki:decorations",tokens(t){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return Xl(t,s)},code(t){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(t.children).filter(d=>d.type==="element"&&d.tagName==="span");if(s.length!==r.converter.lines.length)throw new ge(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function i(d,p,f,_){const h=s[d];let T="",y=-1,g=-1;if(p===0&&(y=0),f===0&&(g=0),f===Number.POSITIVE_INFINITY&&(g=h.children.length),y===-1||g===-1)for(let b=0;b<h.children.length;b++)T+=Ws(h.children[b]),y===-1&&T.length===p&&(y=b+1),g===-1&&T.length===f&&(g=b+1);if(y===-1)throw new ge(`Failed to find start index for decoration ${JSON.stringify(_.start)}`);if(g===-1)throw new ge(`Failed to find end index for decoration ${JSON.stringify(_.end)}`);const x=h.children.slice(y,g);if(!_.alwaysWrap&&x.length===h.children.length)l(h,_,"line");else if(!_.alwaysWrap&&x.length===1&&x[0].type==="element")l(x[0],_,"token");else{const b={type:"element",tagName:"span",properties:{},children:x};l(b,_,"wrapper"),h.children.splice(y,x.length,b)}}function o(d,p){s[d]=l(s[d],p,"line")}function l(d,p,f){const _=p.properties||{},h=p.transform||(T=>T);return d.tagName=p.tagName||"span",d.properties={...d.properties,..._,class:d.properties.class},p.properties?.class&&qs(d,p.properties.class),d=h(d,f)||d,d}const a=[],u=r.decorations.sort((d,p)=>p.start.offset-d.start.offset||d.end.offset-p.end.offset);for(const d of u){const{start:p,end:f}=d;if(p.line===f.line)i(p.line,p.character,f.character,d);else if(p.line<f.line){i(p.line,p.character,Number.POSITIVE_INFINITY,d);for(let _=p.line+1;_<f.line;_++)a.unshift(()=>o(_,d));i(f.line,0,f.character,d)}}a.forEach(d=>d())}}}function ru(n){for(let e=0;e<n.length;e++){const t=n[e];if(t.start.offset>t.end.offset)throw new ge(`Invalid decoration range: ${JSON.stringify(t.start)} - ${JSON.stringify(t.end)}`);for(let r=e+1;r<n.length;r++){const s=n[r],i=t.start.offset<=s.start.offset&&s.start.offset<t.end.offset,o=t.start.offset<s.end.offset&&s.end.offset<=t.end.offset,l=s.start.offset<=t.start.offset&&t.start.offset<s.end.offset,a=s.start.offset<t.end.offset&&t.end.offset<=s.end.offset;if(i||o||l||a){if(i&&o||l&&a||l&&t.start.offset===t.end.offset||o&&s.start.offset===s.end.offset)continue;throw new ge(`Decorations ${JSON.stringify(t.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function Ws(n){return n.type==="text"?n.value:n.type==="element"?n.children.map(Ws).join(""):""}const su=[nu()];function mn(n){const e=iu(n.transformers||[]);return[...e.pre,...e.normal,...e.post,...su]}function iu(n){const e=[],t=[],r=[];for(const s of n)switch(s.enforce){case"pre":e.push(s);break;case"post":t.push(s);break;default:r.push(s)}return{pre:e,post:t,normal:r}}var dt=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],On={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function ou(n,e){const t=n.indexOf("\x1B",e);if(t!==-1&&n[t+1]==="["){const r=n.indexOf("m",t);if(r!==-1)return{sequence:n.substring(t+2,r).split(";"),startPosition:t,position:r+1}}return{position:n.length}}function Gr(n){const e=n.shift();if(e==="2"){const t=n.splice(0,3).map(r=>Number.parseInt(r));return t.length!==3||t.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:t}}else if(e==="5"){const t=n.shift();if(t)return{type:"table",index:Number(t)}}}function au(n){const e=[];for(;n.length>0;){const t=n.shift();if(!t)continue;const r=Number.parseInt(t);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)On[r]&&e.push({type:"setDecoration",value:On[r]});else if(r<=29){const s=On[r-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:dt[r-30]}});else if(r===38){const s=Gr(n);s&&e.push({type:"setForegroundColor",value:s})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:dt[r-40]}});else if(r===48){const s=Gr(n);s&&e.push({type:"setBackgroundColor",value:s})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:dt[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:dt[r-100+8]}})}return e}function lu(){let n=null,e=null,t=new Set;return{parse(r){const s=[];let i=0;do{const o=ou(r,i),l=o.sequence?r.substring(i,o.startPosition):r.substring(i);if(l.length>0&&s.push({value:l,foreground:n,background:e,decorations:new Set(t)}),o.sequence){const a=au(o.sequence);for(const u of a)u.type==="resetAll"?(n=null,e=null,t.clear()):u.type==="resetForegroundColor"?n=null:u.type==="resetBackgroundColor"?e=null:u.type==="resetDecoration"&&t.delete(u.value);for(const u of a)u.type==="setForegroundColor"?n=u.value:u.type==="setBackgroundColor"?e=u.value:u.type==="setDecoration"&&t.add(u.value)}i=o.position}while(i<r.length);return s}}}var uu={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function cu(n=uu){function e(l){return n[l]}function t(l){return`#${l.map(a=>Math.max(0,Math.min(a,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let u=0;u<dt.length;u++)r.push(e(dt[u]));let l=[0,95,135,175,215,255];for(let u=0;u<6;u++)for(let d=0;d<6;d++)for(let p=0;p<6;p++)r.push(t([l[u],l[d],l[p]]));let a=8;for(let u=0;u<24;u++,a+=10)r.push(t([a,a,a]));return r}function i(l){return s()[l]}function o(l){switch(l.type){case"named":return e(l.name);case"rgb":return t(l.rgb);case"table":return i(l.index)}}return{value:o}}const du={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function pu(n,e,t){const r=dn(n,t),s=bn(e),i=Object.fromEntries(dt.map(a=>{const u=`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`,d=n.colors?.[u];return[a,d||du[a]]})),o=cu(i),l=lu();return s.map(a=>l.parse(a[0]).map(u=>{let d,p;u.decorations.has("reverse")?(d=u.background?o.value(u.background):n.bg,p=u.foreground?o.value(u.foreground):n.fg):(d=u.foreground?o.value(u.foreground):n.fg,p=u.background?o.value(u.background):void 0),d=at(d,r),p=at(p,r),u.decorations.has("dim")&&(d=mu(d));let f=Re.None;return u.decorations.has("bold")&&(f|=Re.Bold),u.decorations.has("italic")&&(f|=Re.Italic),u.decorations.has("underline")&&(f|=Re.Underline),u.decorations.has("strikethrough")&&(f|=Re.Strikethrough),{content:u.value,offset:a[1],color:d,bgColor:p,fontStyle:f}}))}function mu(n){const e=n.match(/#([0-9a-f]{3,8})/i);if(e){const r=e[1];if(r.length===8){const s=Math.round(Number.parseInt(r.slice(6,8),16)/2).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}else{if(r.length===6)return`#${r}80`;if(r.length===4){const s=r[0],i=r[1],o=r[2],l=r[3],a=Math.round(Number.parseInt(`${l}${l}`,16)/2).toString(16).padStart(2,"0");return`#${s}${s}${i}${i}${o}${o}${a}`}else if(r.length===3){const s=r[0],i=r[1],o=r[2];return`#${s}${s}${i}${i}${o}${o}80`}}}const t=n.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return t?`var(${t[1]}-dim)`:n}function fr(n,e,t={}){const{theme:r=n.getLoadedThemes()[0]}=t,s=n.resolveLangAlias(t.lang||"text");if(pr(s)||mr(r))return bn(e).map(a=>[{content:a[0],offset:a[1]}]);const{theme:i,colorMap:o}=n.setTheme(r);if(s==="ansi")return pu(i,e,t);const l=n.getLanguage(t.lang||"text");if(t.grammarState){if(t.grammarState.lang!==l.name)throw new ge(`Grammar state language "${t.grammarState.lang}" does not match highlight language "${l.name}"`);if(!t.grammarState.themes.includes(i.name))throw new ge(`Grammar state themes "${t.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return fu(e,l,i,o,t)}function hu(...n){if(n.length===2)return Bt(n[1]);const[e,t,r={}]=n,{lang:s="text",theme:i=e.getLoadedThemes()[0]}=r;if(pr(s)||mr(i))throw new ge("Plain language does not have grammar state");if(s==="ansi")throw new ge("ANSI language does not have grammar state");const{theme:o,colorMap:l}=e.setTheme(i),a=e.getLanguage(s);return new St(gr(t,a,o,l,r).stateStack,a.name,o.name)}function fu(n,e,t,r,s){const i=gr(n,e,t,r,s),o=new St(i.stateStack,e.name,t.name);return kn(i.tokens,o),i.tokens}function gr(n,e,t,r,s){const i=dn(t,s),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:l=500}=s,a=bn(n);let u=s.grammarState?tu(s.grammarState,t.name)??Wn:s.grammarContextCode!=null?gr(s.grammarContextCode,e,t,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:Wn,d=[];const p=[];for(let f=0,_=a.length;f<_;f++){const[h,T]=a[f];if(h===""){d=[],p.push([]);continue}if(o>0&&h.length>=o){d=[],p.push([{content:h,offset:T,color:"",fontStyle:0}]);continue}let y,g,x;s.includeExplanation&&(y=e.tokenizeLine(h,u,l),g=y.tokens,x=0);const b=e.tokenizeLine2(h,u,l),D=b.tokens.length/2;for(let M=0;M<D;M++){const U=b.tokens[2*M],X=M+1<D?b.tokens[2*M+2]:h.length;if(U===X)continue;const Te=b.tokens[2*M+1],le=at(r[xt.getForeground(Te)],i),Y=xt.getFontStyle(Te),V={content:h.substring(U,X),offset:T+U,color:le,fontStyle:Y};if(s.includeExplanation){const B=[];if(s.includeExplanation!=="scopeName")for(const te of t.settings){let pe;switch(typeof te.scope){case"string":pe=te.scope.split(/,/).map(ye=>ye.trim());break;case"object":pe=te.scope;break;default:continue}B.push({settings:te,selectors:pe.map(ye=>ye.split(/ /))})}V.explanation=[];let Ae=0;for(;U+Ae<X;){const te=g[x],pe=h.substring(te.startIndex,te.endIndex);Ae+=pe.length,V.explanation.push({content:pe,scopes:s.includeExplanation==="scopeName"?gu(te.scopes):_u(B,te.scopes)}),x+=1}}d.push(V)}p.push(d),d=[],u=b.ruleStack}return{tokens:p,stateStack:u}}function gu(n){return n.map(e=>({scopeName:e}))}function _u(n,e){const t=[];for(let r=0,s=e.length;r<s;r++){const i=e[r];t[r]={scopeName:i,themeMatches:yu(n,i,e.slice(0,r))}}return t}function Fr(n,e){return n===e||e.substring(0,n.length)===n&&e[n.length]==="."}function vu(n,e,t){if(!Fr(n[n.length-1],e))return!1;let r=n.length-2,s=t.length-1;for(;r>=0&&s>=0;)Fr(n[r],t[s])&&(r-=1),s-=1;return r===-1}function yu(n,e,t){const r=[];for(const{selectors:s,settings:i}of n)for(const o of s)if(vu(o,e,t)){r.push(i);break}return r}function Ks(n,e,t){const r=Object.entries(t.themes).filter(a=>a[1]).map(a=>({color:a[0],theme:a[1]})),s=r.map(a=>{const u=fr(n,e,{...t,theme:a.theme}),d=Bt(u),p=typeof a.theme=="string"?a.theme:a.theme.name;return{tokens:u,state:d,theme:p}}),i=bu(...s.map(a=>a.tokens)),o=i[0].map((a,u)=>a.map((d,p)=>{const f={content:d.content,variants:{},offset:d.offset};return"includeExplanation"in t&&t.includeExplanation&&(f.explanation=d.explanation),i.forEach((_,h)=>{const{content:T,explanation:y,offset:g,...x}=_[u][p];f.variants[r[h].color]=x}),f})),l=s[0].state?new St(Object.fromEntries(s.map(a=>[a.theme,a.state?.getInternalStack(a.theme)])),s[0].state.lang):void 0;return l&&kn(o,l),o}function bu(...n){const e=n.map(()=>[]),t=n.length;for(let r=0;r<n[0].length;r++){const s=n.map(a=>a[r]),i=e.map(()=>[]);e.forEach((a,u)=>a.push(i[u]));const o=s.map(()=>0),l=s.map(a=>a[0]);for(;l.every(a=>a);){const a=Math.min(...l.map(u=>u.content.length));for(let u=0;u<t;u++){const d=l[u];d.content.length===a?(i[u].push(d),o[u]+=1,l[u]=s[u][o[u]]):(i[u].push({...d,content:d.content.slice(0,a)}),l[u]={...d,content:d.content.slice(a),offset:d.offset+a})}}}return e}function hn(n,e,t){let r,s,i,o,l,a;if("themes"in t){const{defaultColor:u="light",cssVariablePrefix:d="--shiki-",colorsRendering:p="css-vars"}=t,f=Object.entries(t.themes).filter(g=>g[1]).map(g=>({color:g[0],theme:g[1]})).sort((g,x)=>g.color===u?-1:x.color===u?1:0);if(f.length===0)throw new ge("`themes` option must not be empty");const _=Ks(n,e,t);if(a=Bt(_),u&&hr!==u&&!f.find(g=>g.color===u))throw new ge(`\`themes\` option must contain the defaultColor key \`${u}\``);const h=f.map(g=>n.getTheme(g.theme)),T=f.map(g=>g.color);i=_.map(g=>g.map(x=>Yl(x,T,d,u,p))),a&&kn(i,a);const y=f.map(g=>dn(g.theme,t));s=qr(f,h,y,d,u,"fg",p),r=qr(f,h,y,d,u,"bg",p),o=`shiki-themes ${h.map(g=>g.name).join(" ")}`,l=u?void 0:[s,r].join(";")}else if("theme"in t){const u=dn(t.theme,t);i=fr(n,e,t);const d=n.getTheme(t.theme);r=at(d.bg,u),s=at(d.fg,u),o=d.name,a=Bt(i)}else throw new ge("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:s,bg:r,themeName:o,rootStyle:l,grammarState:a}}function qr(n,e,t,r,s,i,o){return n.map((l,a)=>{const u=at(e[a][i],t[a])||"inherit",d=`${r+l.color}${i==="bg"?"-bg":""}:${u}`;if(a===0&&s){if(s===hr&&n.length>1){const p=n.findIndex(T=>T.color==="light"),f=n.findIndex(T=>T.color==="dark");if(p===-1||f===-1)throw new ge('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const _=at(e[p][i],t[p])||"inherit",h=at(e[f][i],t[f])||"inherit";return`light-dark(${_}, ${h});${d}`}return u}return o==="css-vars"?d:null}).filter(l=>!!l).join(";")}function fn(n,e,t,r={meta:{},options:t,codeToHast:(s,i)=>fn(n,s,i),codeToTokens:(s,i)=>hn(n,s,i)}){let s=e;for(const h of mn(t))s=h.preprocess?.call(r,s,t)||s;let{tokens:i,fg:o,bg:l,themeName:a,rootStyle:u,grammarState:d}=hn(n,s,t);const{mergeWhitespaces:p=!0,mergeSameStyleTokens:f=!1}=t;p===!0?i=xu(i):p==="never"&&(i=wu(i)),f&&(i=Eu(i));const _={...r,get source(){return s}};for(const h of mn(t))i=h.tokens?.call(_,i)||i;return ku(i,{...t,fg:o,bg:l,themeName:a,rootStyle:t.rootStyle===!1?!1:t.rootStyle??u},_,d)}function ku(n,e,t,r=Bt(n)){const s=mn(e),i=[],o={type:"root",children:[]},{structure:l="classic",tabindex:a="0"}=e,u={class:`shiki ${e.themeName||""}`};e.rootStyle!==!1&&(e.rootStyle!=null?u.style=e.rootStyle:u.style=`background-color:${e.bg};color:${e.fg}`),a!==!1&&a!=null&&(u.tabindex=a.toString());for(const[T,y]of Object.entries(e.meta||{}))T.startsWith("_")||(u[T]=y);let d={type:"element",tagName:"pre",properties:u,children:[]},p={type:"element",tagName:"code",properties:{},children:i};const f=[],_={...t,structure:l,addClassToHast:qs,get source(){return t.source},get tokens(){return n},get options(){return e},get root(){return o},get pre(){return d},get code(){return p},get lines(){return f}};if(n.forEach((T,y)=>{y&&(l==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):l==="classic"&&i.push({type:"text",value:`
`}));let g={type:"element",tagName:"span",properties:{class:"line"},children:[]},x=0;for(const b of T){let D={type:"element",tagName:"span",properties:{...b.htmlAttrs},children:[{type:"text",value:b.content}]};const M=Xn(b.htmlStyle||pn(b));M&&(D.properties.style=M);for(const U of s)D=U?.span?.call(_,D,y+1,x,g,b)||D;l==="inline"?o.children.push(D):l==="classic"&&g.children.push(D),x+=b.content.length}if(l==="classic"){for(const b of s)g=b?.line?.call(_,g,y+1)||g;f.push(g),i.push(g)}else l==="inline"&&f.push(g)}),l==="classic"){for(const T of s)p=T?.code?.call(_,p)||p;d.children.push(p);for(const T of s)d=T?.pre?.call(_,d)||d;o.children.push(d)}else if(l==="inline"){const T=[];let y={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const b of o.children)b.type==="element"&&b.tagName==="br"?(T.push(y),y={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(b.type==="element"||b.type==="text")&&y.children.push(b);T.push(y);let x={type:"element",tagName:"code",properties:{},children:T};for(const b of s)x=b?.code?.call(_,x)||x;o.children=[];for(let b=0;b<x.children.length;b++){b>0&&o.children.push({type:"element",tagName:"br",properties:{},children:[]});const D=x.children[b];D.type==="element"&&o.children.push(...D.children)}}let h=o;for(const T of s)h=T?.root?.call(_,h)||h;return r&&kn(h,r),h}function xu(n){return n.map(e=>{const t=[];let r="",s;return e.forEach((i,o)=>{const a=!(i.fontStyle&&(i.fontStyle&Re.Underline||i.fontStyle&Re.Strikethrough));a&&i.content.match(/^\s+$/)&&e[o+1]?(s===void 0&&(s=i.offset),r+=i.content):r?(a?t.push({...i,offset:s,content:r+i.content}):t.push({content:r,offset:s},i),s=void 0,r=""):t.push(i)}),t})}function wu(n){return n.map(e=>e.flatMap(t=>{if(t.content.match(/^\s+$/))return t;const r=t.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return t;const[,s,i,o]=r;if(!s&&!o)return t;const l=[{...t,offset:t.offset+s.length,content:i}];return s&&l.unshift({content:s,offset:t.offset}),o&&l.push({content:o,offset:t.offset+s.length+i.length}),l}))}function Eu(n){return n.map(e=>{const t=[];for(const r of e){if(t.length===0){t.push({...r});continue}const s=t[t.length-1],i=Xn(s.htmlStyle||pn(s)),o=Xn(r.htmlStyle||pn(r)),l=s.fontStyle&&(s.fontStyle&Re.Underline||s.fontStyle&Re.Strikethrough),a=r.fontStyle&&(r.fontStyle&Re.Underline||r.fontStyle&Re.Strikethrough);!l&&!a&&i===o?s.content+=r.content:t.push({...r})}return t})}const Su=Fl;function Ru(n,e,t){const r={meta:{},options:t,codeToHast:(i,o)=>fn(n,i,o),codeToTokens:(i,o)=>hn(n,i,o)};let s=Su(fn(n,e,t,r));for(const i of mn(t))s=i.postprocess?.call(r,s,t)||s;return s}const Hr={light:"#333333",dark:"#bbbbbb"},Wr={light:"#fffffe",dark:"#1e1e1e"},Kr="__shiki_resolved";function _r(n){if(n?.[Kr])return n;const e={...n};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:t,fg:r}=e;if(!t||!r){const l=e.settings?e.settings.find(a=>!a.name&&!a.scope):void 0;l?.settings?.foreground&&(r=l.settings.foreground),l?.settings?.background&&(t=l.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!t&&e?.colors?.["editor.background"]&&(t=e.colors["editor.background"]),r||(r=e.type==="light"?Hr.light:Hr.dark),t||(t=e.type==="light"?Wr.light:Wr.dark),e.fg=r,e.bg=t}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const i=new Map;function o(l){if(i.has(l))return i.get(l);s+=1;const a=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${a}`]?o(l):(i.set(l,a),a)}e.settings=e.settings.map(l=>{const a=l.settings?.foreground&&!l.settings.foreground.startsWith("#"),u=l.settings?.background&&!l.settings.background.startsWith("#");if(!a&&!u)return l;const d={...l,settings:{...l.settings}};if(a){const p=o(l.settings.foreground);e.colorReplacements[p]=l.settings.foreground,d.settings.foreground=p}if(u){const p=o(l.settings.background);e.colorReplacements[p]=l.settings.background,d.settings.background=p}return d});for(const l of Object.keys(e.colors||{}))if((l==="editor.foreground"||l==="editor.background"||l.startsWith("terminal.ansi"))&&!e.colors[l]?.startsWith("#")){const a=o(e.colors[l]);e.colorReplacements[a]=e.colors[l],e.colors[l]=a}return Object.defineProperty(e,Kr,{enumerable:!1,writable:!1,value:!0}),e}async function Qs(n){return Array.from(new Set((await Promise.all(n.filter(e=>!Gs(e)).map(async e=>await zs(e).then(t=>Array.isArray(t)?t:[t])))).flat()))}async function Js(n){return(await Promise.all(n.map(async t=>Fs(t)?null:_r(await zs(t))))).filter(t=>!!t)}let Tu=3;function Au(n,e=3){e>Tu||console.trace(`[SHIKI DEPRECATE]: ${n}`)}let yt=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Zs(n,e){if(!e)return n;if(e[n]){const t=new Set([n]);for(;e[n];){if(n=e[n],t.has(n))throw new yt(`Circular alias \`${Array.from(t).join(" -> ")} -> ${n}\``);t.add(n)}}return n}class Iu extends Ca{constructor(e,t,r,s={}){super(e),this._resolver=e,this._themes=t,this._langs=r,this._alias=s,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const t=_r(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=on.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){return e=Zs(e,this._alias),this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const t=new Set([...this._langMap.values()].filter(i=>i.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(i=>{this._alias[i]=e.name}),this._loadedLanguagesCache=null,t.size)for(const i of t)this._resolvedGrammars.delete(i.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(i.scopeName),this._syncRegistry?._grammars?.delete(i.scopeName),this.loadLanguage(this._langMap.get(i.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const t=Array.from(this._langGraph.entries()),r=t.filter(([s,i])=>!i);if(r.length){const s=t.filter(([i,o])=>o?(o.embeddedLanguages||o.embeddedLangs)?.some(a=>r.map(([u])=>u).includes(a)):!1).filter(i=>!r.includes(i));throw new yt(`Missing languages ${r.map(([i])=>`\`${i}\``).join(", ")}, required by ${s.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[s,i]of t)this._resolver.addLanguage(i);for(const[s,i]of t)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){this._langMap.set(e.name,e),this._langGraph.set(e.name,e);const t=e.embeddedLanguages??e.embeddedLangs;if(t)for(const r of t)this._langGraph.set(r,this._langMap.get(r))}}class Cu{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,t){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},t.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(t=>{this._langs.set(t,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)})}getInjections(e){const t=e.split(".");let r=[];for(let s=1;s<=t.length;s++){const i=t.slice(0,s).join(".");r=[...r,...this._injections.get(i)||[]]}return r}}let Ct=0;function Lu(n){Ct+=1,n.warnings!==!1&&Ct>=10&&Ct%10===0&&console.warn(`[Shiki] ${Ct} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!n.engine)throw new yt("`engine` option is required for synchronous mode");const t=(n.langs||[]).flat(1),r=(n.themes||[]).flat(1).map(_r),s=new Cu(n.engine,t),i=new Iu(s,r,t,n.langAlias);let o;function l(b){return Zs(b,n.langAlias)}function a(b){g();const D=i.getGrammar(typeof b=="string"?b:b.name);if(!D)throw new yt(`Language \`${b}\` not found, you may need to load it first`);return D}function u(b){if(b==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};g();const D=i.getTheme(b);if(!D)throw new yt(`Theme \`${b}\` not found, you may need to load it first`);return D}function d(b){g();const D=u(b);o!==b&&(i.setTheme(D),o=b);const M=i.getColorMap();return{theme:D,colorMap:M}}function p(){return g(),i.getLoadedThemes()}function f(){return g(),i.getLoadedLanguages()}function _(...b){g(),i.loadLanguages(b.flat(1))}async function h(...b){return _(await Qs(b))}function T(...b){g();for(const D of b.flat(1))i.loadTheme(D)}async function y(...b){return g(),T(await Js(b))}function g(){if(e)throw new yt("Shiki instance has been disposed")}function x(){e||(e=!0,i.dispose(),Ct-=1)}return{setTheme:d,getTheme:u,getLanguage:a,getLoadedThemes:p,getLoadedLanguages:f,resolveLangAlias:l,loadLanguage:h,loadLanguageSync:_,loadTheme:y,loadThemeSync:T,dispose:x,[Symbol.dispose]:x}}async function Pu(n){n.engine||Au("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,t,r]=await Promise.all([Js(n.themes||[]),Qs(n.langs||[]),n.engine]);return Lu({...n,themes:e,langs:t,engine:r})}async function Ou(n){const e=await Pu(n);return{getLastGrammarState:(...t)=>hu(e,...t),codeToTokensBase:(t,r)=>fr(e,t,r),codeToTokensWithThemes:(t,r)=>Ks(e,t,r),codeToTokens:(t,r)=>hn(e,t,r),codeToHast:(t,r)=>fn(e,t,r),codeToHtml:(t,r)=>Ru(e,t,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function Du(n){const e=n.langs,t=n.themes,r=n.engine;async function s(i){function o(p){if(typeof p=="string"){if(p=i.langAlias?.[p]||p,Gs(p))return[];const f=e[p];if(!f)throw new ge(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return f}return p}function l(p){if(Fs(p))return"none";if(typeof p=="string"){const f=t[p];if(!f)throw new ge(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return f}return p}const a=(i.themes??[]).map(p=>l(p)),u=(i.langs??[]).map(p=>o(p)),d=await Ou({engine:i.engine??r(),...i,themes:a,langs:u});return{...d,loadLanguage(...p){return d.loadLanguage(...p.map(o))},loadTheme(...p){return d.loadTheme(...p.map(l))},getBundledLanguages(){return e},getBundledThemes(){return t}}}return s}function $u(n){let e;async function t(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else{e=n({...r,themes:[],langs:[]});const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}}return t}function Nu(n,e){const t=$u(n);async function r(s,i){const o=await t({langs:[i.lang],themes:"theme"in i?[i.theme]:Object.values(i.themes)}),l=await e?.guessEmbeddedLanguages?.(s,i.lang,o);return l&&await o.loadLanguage(...l),o}return{getSingletonHighlighter(s){return t(s)},async codeToHtml(s,i){return(await r(s,i)).codeToHtml(s,i)},async codeToHast(s,i){return(await r(s,i)).codeToHast(s,i)},async codeToTokens(s,i){return(await r(s,i)).codeToTokens(s,i)},async codeToTokensBase(s,i){return(await r(s,i)).codeToTokensBase(s,i)},async codeToTokensWithThemes(s,i){return(await r(s,i)).codeToTokensWithThemes(s,i)},async getLastGrammarState(s,i){return(await t({langs:[i.lang],themes:[i.theme]})).getLastGrammarState(s,i)}}}const Xs=[{id:"abap",name:"ABAP",import:(()=>c(()=>import("./BdImnpbu.js"),[],import.meta.url))},{id:"actionscript-3",name:"ActionScript",import:(()=>c(()=>import("./CfeIJUat.js"),[],import.meta.url))},{id:"ada",name:"Ada",import:(()=>c(()=>import("./bCR0ucgS.js"),[],import.meta.url))},{id:"angular-html",name:"Angular HTML",import:(()=>c(()=>import("./DxNHbxmM.js").then(n=>n.f),__vite__mapDeps([0,1,2,3]),import.meta.url))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>c(()=>import("./Cl0AqbOI.js"),__vite__mapDeps([4,0,1,2,3,5]),import.meta.url))},{id:"apache",name:"Apache Conf",import:(()=>c(()=>import("./Pmp26Uib.js"),[],import.meta.url))},{id:"apex",name:"Apex",import:(()=>c(()=>import("./DDbsPZ6N.js"),[],import.meta.url))},{id:"apl",name:"APL",import:(()=>c(()=>import("./Cn7AkR1O.js"),__vite__mapDeps([6,1,2,3,7,8,9]),import.meta.url))},{id:"applescript",name:"AppleScript",import:(()=>c(()=>import("./Co6uUVPk.js"),[],import.meta.url))},{id:"ara",name:"Ara",import:(()=>c(()=>import("./BRHolxvo.js"),[],import.meta.url))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>c(()=>import("./Dv7Oe6Be.js"),[],import.meta.url))},{id:"asm",name:"Assembly",import:(()=>c(()=>import("./D_Q5rh1f.js"),[],import.meta.url))},{id:"astro",name:"Astro",import:(()=>c(()=>import("./DxSwrfjg.js"),__vite__mapDeps([10,9,2,11,3,12,13]),import.meta.url))},{id:"awk",name:"AWK",import:(()=>c(()=>import("./DMzUqQB5.js"),[],import.meta.url))},{id:"ballerina",name:"Ballerina",import:(()=>c(()=>import("./BFfxhgS-.js"),[],import.meta.url))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>c(()=>import("./BkioyH1T.js"),[],import.meta.url))},{id:"beancount",name:"Beancount",import:(()=>c(()=>import("./k_qm7-4y.js"),[],import.meta.url))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>c(()=>import("./uYugtg8r.js"),[],import.meta.url))},{id:"bibtex",name:"BibTeX",import:(()=>c(()=>import("./CHM0blh-.js"),[],import.meta.url))},{id:"bicep",name:"Bicep",import:(()=>c(()=>import("./Bmn6On1c.js"),[],import.meta.url))},{id:"blade",name:"Blade",import:(()=>c(()=>import("./DNMeEaky.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9]),import.meta.url))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>c(()=>import("./CquLrc37.js"),__vite__mapDeps([17,18]),import.meta.url))},{id:"c",name:"C",import:(()=>c(()=>import("./BIGW1oBm.js"),[],import.meta.url))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>c(()=>import("./Bv_4Rxtq.js"),[],import.meta.url))},{id:"cairo",name:"Cairo",import:(()=>c(()=>import("./CO1LY3CK.js"),__vite__mapDeps([19,20]),import.meta.url))},{id:"clarity",name:"Clarity",import:(()=>c(()=>import("./D53aC0YG.js"),[],import.meta.url))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>c(()=>import("./P80f7IUj.js"),[],import.meta.url))},{id:"cmake",name:"CMake",import:(()=>c(()=>import("./D1j8_8rp.js"),[],import.meta.url))},{id:"cobol",name:"COBOL",import:(()=>c(()=>import("./BYV0-3_D.js"),__vite__mapDeps([21,1,2,3,8]),import.meta.url))},{id:"codeowners",name:"CODEOWNERS",import:(()=>c(()=>import("./Bp6g37R7.js"),[],import.meta.url))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>c(()=>import("./DsOJ9woJ.js"),[],import.meta.url))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>c(()=>import("./CxbxFI8M.js"),__vite__mapDeps([22,2]),import.meta.url))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>c(()=>import("./Cg-RD9OK.js"),[],import.meta.url))},{id:"coq",name:"Coq",import:(()=>c(()=>import("./DkFqJrB1.js"),[],import.meta.url))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>c(()=>import("./Bp3cYrEr.js"),__vite__mapDeps([23,24,25,26,16]),import.meta.url))},{id:"crystal",name:"Crystal",import:(()=>c(()=>import("./fKv21gyL.js"),__vite__mapDeps([27,1,2,3,16,26,28]),import.meta.url))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>c(()=>import("./K5feNrxe.js"),[],import.meta.url))},{id:"css",name:"CSS",import:(()=>c(()=>import("./DPfMkruS.js"),[],import.meta.url))},{id:"csv",name:"CSV",import:(()=>c(()=>import("./fuZLfV_i.js"),[],import.meta.url))},{id:"cue",name:"CUE",import:(()=>c(()=>import("./D82EKSYY.js"),[],import.meta.url))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>c(()=>import("./COkxafJQ.js"),[],import.meta.url))},{id:"d",name:"D",import:(()=>c(()=>import("./85-TOEBH.js"),[],import.meta.url))},{id:"dart",name:"Dart",import:(()=>c(()=>import("./CF10PKvl.js"),[],import.meta.url))},{id:"dax",name:"DAX",import:(()=>c(()=>import("./CEL-wOlO.js"),[],import.meta.url))},{id:"desktop",name:"Desktop",import:(()=>c(()=>import("./BmXAJ9_W.js"),[],import.meta.url))},{id:"diff",name:"Diff",import:(()=>c(()=>import("./D97Zzqfu.js"),[],import.meta.url))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>c(()=>import("./BcOcwvcX.js"),[],import.meta.url))},{id:"dotenv",name:"dotEnv",import:(()=>c(()=>import("./Da5cRb03.js"),[],import.meta.url))},{id:"dream-maker",name:"Dream Maker",import:(()=>c(()=>import("./BtqSS_iP.js"),[],import.meta.url))},{id:"edge",name:"Edge",import:(()=>c(()=>import("./DZu-aV2c.js"),__vite__mapDeps([29,11,1,2,3,15]),import.meta.url))},{id:"elixir",name:"Elixir",import:(()=>c(()=>import("./CpOuai2O.js"),__vite__mapDeps([30,1,2,3]),import.meta.url))},{id:"elm",name:"Elm",import:(()=>c(()=>import("./CeZK1NFH.js"),__vite__mapDeps([31,25,26]),import.meta.url))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>c(()=>import("./C9XAeP06.js"),[],import.meta.url))},{id:"erb",name:"ERB",import:(()=>c(()=>import("./DXx00hUE.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>c(()=>import("./CuPHTKiy.js"),__vite__mapDeps([39,40]),import.meta.url))},{id:"fennel",name:"Fennel",import:(()=>c(()=>import("./BYunw83y.js"),[],import.meta.url))},{id:"fish",name:"Fish",import:(()=>c(()=>import("./BvzEVeQv.js"),[],import.meta.url))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>c(()=>import("./C4IJs8-o.js"),[],import.meta.url))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>c(()=>import("./CZlF05X6.js"),__vite__mapDeps([41,42]),import.meta.url))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>c(()=>import("./D22FLkUw.js"),[],import.meta.url))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>c(()=>import("./BTifaqeh.js"),__vite__mapDeps([43,40]),import.meta.url))},{id:"gdresource",name:"GDResource",import:(()=>c(()=>import("./oTG82Wo1.js"),__vite__mapDeps([44,45,46]),import.meta.url))},{id:"gdscript",name:"GDScript",import:(()=>c(()=>import("./DTMYz4Jt.js"),[],import.meta.url))},{id:"gdshader",name:"GDShader",import:(()=>c(()=>import("./DkwncUOv.js"),[],import.meta.url))},{id:"genie",name:"Genie",import:(()=>c(()=>import("./D0YGMca9.js"),[],import.meta.url))},{id:"gherkin",name:"Gherkin",import:(()=>c(()=>import("./DyxjwDmM.js"),[],import.meta.url))},{id:"git-commit",name:"Git Commit Message",import:(()=>c(()=>import("./CxGSJlkm.js"),__vite__mapDeps([47,48]),import.meta.url))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>c(()=>import("./CSXwinHm.js"),__vite__mapDeps([49,28]),import.meta.url))},{id:"gleam",name:"Gleam",import:(()=>c(()=>import("./BspZqrRM.js"),[],import.meta.url))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>c(()=>import("./YqXBG_HV.js"),__vite__mapDeps([50,2,11,3,1]),import.meta.url))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>c(()=>import("./BR5kRUq4.js"),__vite__mapDeps([51,11,3,2,1]),import.meta.url))},{id:"glsl",name:"GLSL",import:(()=>c(()=>import("./DZxFcAj9.js"),__vite__mapDeps([25,26]),import.meta.url))},{id:"gnuplot",name:"Gnuplot",import:(()=>c(()=>import("./DdkO51Og.js"),[],import.meta.url))},{id:"go",name:"Go",import:(()=>c(()=>import("./Dn2_MT6a.js"),[],import.meta.url))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>c(()=>import("./C9oPPf7i.js"),__vite__mapDeps([35,2,11,36,13]),import.meta.url))},{id:"groovy",name:"Groovy",import:(()=>c(()=>import("./gcz8RCvz.js"),[],import.meta.url))},{id:"hack",name:"Hack",import:(()=>c(()=>import("./CLZrNe3w.js"),__vite__mapDeps([52,1,2,3,16]),import.meta.url))},{id:"haml",name:"Ruby Haml",import:(()=>c(()=>import("./CmIQRyeF.js"),__vite__mapDeps([34,2,3]),import.meta.url))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>c(()=>import("./m17aaUwq.js"),__vite__mapDeps([53,1,2,3,38]),import.meta.url))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>c(()=>import("./Df6bDoY_.js"),[],import.meta.url))},{id:"haxe",name:"Haxe",import:(()=>c(()=>import("./CzTSHFRz.js"),[],import.meta.url))},{id:"hcl",name:"HashiCorp HCL",import:(()=>c(()=>import("./BWvSN4gD.js"),[],import.meta.url))},{id:"hjson",name:"Hjson",import:(()=>c(()=>import("./D5-asLiD.js"),[],import.meta.url))},{id:"hlsl",name:"HLSL",import:(()=>c(()=>import("./D3lLCCz7.js"),[],import.meta.url))},{id:"html",name:"HTML",import:(()=>c(()=>import("./CnnebwVN.js"),__vite__mapDeps([1,2,3]),import.meta.url))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>c(()=>import("./DGP4VlC8.js"),__vite__mapDeps([15,1,2,3]),import.meta.url))},{id:"http",name:"HTTP",import:(()=>c(()=>import("./CufHLc7y.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13]),import.meta.url))},{id:"hurl",name:"Hurl",import:(()=>c(()=>import("./CYsAdtH9.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56]),import.meta.url))},{id:"hxml",name:"HXML",import:(()=>c(()=>import("./DWrx1Km3.js"),__vite__mapDeps([57,58]),import.meta.url))},{id:"hy",name:"Hy",import:(()=>c(()=>import("./DFXneXwc.js"),[],import.meta.url))},{id:"imba",name:"Imba",import:(()=>c(()=>import("./DGztddWO.js"),[],import.meta.url))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>c(()=>import("./BEwlwnbL.js"),[],import.meta.url))},{id:"java",name:"Java",import:(()=>c(()=>import("./CylS5w8V.js"),[],import.meta.url))},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:(()=>c(()=>import("./wDzz0qaB.js"),[],import.meta.url))},{id:"jinja",name:"Jinja",import:(()=>c(()=>import("./CXZktZb0.js"),__vite__mapDeps([59,1,2,3]),import.meta.url))},{id:"jison",name:"Jison",import:(()=>c(()=>import("./Br6cN0cg.js"),__vite__mapDeps([60,2]),import.meta.url))},{id:"json",name:"JSON",import:(()=>c(()=>import("./Cp-IABpG.js"),[],import.meta.url))},{id:"json5",name:"JSON5",import:(()=>c(()=>import("./C9tS-k6U.js"),[],import.meta.url))},{id:"jsonc",name:"JSON with Comments",import:(()=>c(()=>import("./Des-eS-w.js"),[],import.meta.url))},{id:"jsonl",name:"JSON Lines",import:(()=>c(()=>import("./DcaNXYhu.js"),[],import.meta.url))},{id:"jsonnet",name:"Jsonnet",import:(()=>c(()=>import("./DFQXde-d.js"),[],import.meta.url))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>c(()=>import("./C2t-YnRu.js"),[],import.meta.url))},{id:"jsx",name:"JSX",import:(()=>c(()=>import("./g9-lgVsj.js"),[],import.meta.url))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>c(()=>import("./CgjmDhmW.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62]),import.meta.url))},{id:"kdl",name:"KDL",import:(()=>c(()=>import("./DV7GczEv.js"),[],import.meta.url))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>c(()=>import("./BdnUsdx6.js"),[],import.meta.url))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>c(()=>import("./BvAqAH-y.js"),[],import.meta.url))},{id:"latex",name:"LaTeX",import:(()=>c(()=>import("./D4aSdv24.js"),__vite__mapDeps([63,64,62]),import.meta.url))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>c(()=>import("./Bc6EcWN3.js"),[],import.meta.url))},{id:"less",name:"Less",import:(()=>c(()=>import("./B1dDrJ26.js"),[],import.meta.url))},{id:"liquid",name:"Liquid",import:(()=>c(()=>import("./mjskCLCv.js"),__vite__mapDeps([65,1,2,3,9]),import.meta.url))},{id:"llvm",name:"LLVM IR",import:(()=>c(()=>import("./BtvRca6l.js"),[],import.meta.url))},{id:"log",name:"Log file",import:(()=>c(()=>import("./2UxHyX5q.js"),[],import.meta.url))},{id:"logo",name:"Logo",import:(()=>c(()=>import("./BtOb2qkB.js"),[],import.meta.url))},{id:"lua",name:"Lua",import:(()=>c(()=>import("./BE2KfCdU.js"),__vite__mapDeps([37,26]),import.meta.url))},{id:"luau",name:"Luau",import:(()=>c(()=>import("./CXu1NL6O.js"),[],import.meta.url))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>c(()=>import("./CHLpvVh8.js"),[],import.meta.url))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>c(()=>import("./Cvjx9yec.js"),[],import.meta.url))},{id:"marko",name:"Marko",import:(()=>c(()=>import("./CMFEf1DS.js"),__vite__mapDeps([66,3,67,5,11]),import.meta.url))},{id:"matlab",name:"MATLAB",import:(()=>c(()=>import("./D7o27uSR.js"),[],import.meta.url))},{id:"mdc",name:"MDC",import:(()=>c(()=>import("./TsXTqZ29.js"),__vite__mapDeps([68,40,38,15,1,2,3]),import.meta.url))},{id:"mdx",name:"MDX",import:(()=>c(()=>import("./Cmh6b_Ma.js"),[],import.meta.url))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>c(()=>import("./DKYwYmdq.js"),[],import.meta.url))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>c(()=>import("./CKIfxQSi.js"),[],import.meta.url))},{id:"mojo",name:"Mojo",import:(()=>c(()=>import("./1DNp92w6.js"),[],import.meta.url))},{id:"move",name:"Move",import:(()=>c(()=>import("./Bu9oaDYs.js"),[],import.meta.url))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>c(()=>import("./DRg8JJMk.js"),[],import.meta.url))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>c(()=>import("./BrzmwbiE.js"),[],import.meta.url))},{id:"nginx",name:"Nginx",import:(()=>c(()=>import("./CA7CTBwS.js"),__vite__mapDeps([69,37,26]),import.meta.url))},{id:"nim",name:"Nim",import:(()=>c(()=>import("./DhmSosst.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40]),import.meta.url))},{id:"nix",name:"Nix",import:(()=>c(()=>import("./c8nO5XWb.js"),[],import.meta.url))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>c(()=>import("./C-sUppwS.js"),[],import.meta.url))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>c(()=>import("./DXmwc3jG.js"),[],import.meta.url))},{id:"objective-cpp",name:"Objective-C++",import:(()=>c(()=>import("./CLxacb5B.js"),[],import.meta.url))},{id:"ocaml",name:"OCaml",import:(()=>c(()=>import("./C0hk2d4L.js"),[],import.meta.url))},{id:"openscad",name:"OpenSCAD",aliases:["scad"],import:(()=>c(()=>import("./C4EeE6gA.js"),[],import.meta.url))},{id:"pascal",name:"Pascal",import:(()=>c(()=>import("./D93ZcfNL.js"),[],import.meta.url))},{id:"perl",name:"Perl",import:(()=>c(()=>import("./BzTr9Aqm.js"),__vite__mapDeps([71,1,2,3,7,8,16]),import.meta.url))},{id:"php",name:"PHP",import:(()=>c(()=>import("./Xqf5ue2O.js"),__vite__mapDeps([72,1,2,3,7,8,16,9]),import.meta.url))},{id:"pkl",name:"Pkl",import:(()=>c(()=>import("./u5AG7uiY.js"),[],import.meta.url))},{id:"plsql",name:"PL/SQL",import:(()=>c(()=>import("./ChMvpjG-.js"),[],import.meta.url))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>c(()=>import("./BTJTHyun.js"),[],import.meta.url))},{id:"polar",name:"Polar",import:(()=>c(()=>import("./C0HS_06l.js"),[],import.meta.url))},{id:"postcss",name:"PostCSS",import:(()=>c(()=>import("./CXtECtnM.js"),[],import.meta.url))},{id:"powerquery",name:"PowerQuery",import:(()=>c(()=>import("./CEu0bR-o.js"),[],import.meta.url))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>c(()=>import("./Dpen1YoG.js"),[],import.meta.url))},{id:"prisma",name:"Prisma",import:(()=>c(()=>import("./Dd19v3D-.js"),[],import.meta.url))},{id:"prolog",name:"Prolog",import:(()=>c(()=>import("./CbFg5uaA.js"),[],import.meta.url))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>c(()=>import("./DyJlTyXw.js"),[],import.meta.url))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>c(()=>import("./BLmx8bSh.js"),__vite__mapDeps([73,2,3,1]),import.meta.url))},{id:"puppet",name:"Puppet",import:(()=>c(()=>import("./BMWR74SV.js"),[],import.meta.url))},{id:"purescript",name:"PureScript",import:(()=>c(()=>import("./CklMAg4u.js"),[],import.meta.url))},{id:"python",name:"Python",aliases:["py"],import:(()=>c(()=>import("./B6aJPvgy.js"),[],import.meta.url))},{id:"qml",name:"QML",import:(()=>c(()=>import("./BVQ-GDCI.js"),__vite__mapDeps([74,2]),import.meta.url))},{id:"qmldir",name:"QML Directory",import:(()=>c(()=>import("./C8lEn-DE.js"),[],import.meta.url))},{id:"qss",name:"Qt Style Sheets",import:(()=>c(()=>import("./IeuSbFQv.js"),[],import.meta.url))},{id:"r",name:"R",import:(()=>c(()=>import("./DiinP2Uv.js"),[],import.meta.url))},{id:"racket",name:"Racket",import:(()=>c(()=>import("./BqYA7rlc.js"),[],import.meta.url))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>c(()=>import("./DXvB9xmW.js"),[],import.meta.url))},{id:"razor",name:"ASP.NET Razor",import:(()=>c(()=>import("./D7XhsoTB.js"),__vite__mapDeps([75,1,2,3,76]),import.meta.url))},{id:"reg",name:"Windows Registry Script",import:(()=>c(()=>import("./C-SQnVFl.js"),[],import.meta.url))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>c(()=>import("./CDVJQ6XC.js"),[],import.meta.url))},{id:"rel",name:"Rel",import:(()=>c(()=>import("./C3B-1QV4.js"),[],import.meta.url))},{id:"riscv",name:"RISC-V",import:(()=>c(()=>import("./BM1_JUlF.js"),[],import.meta.url))},{id:"rosmsg",name:"ROS Interface",import:(()=>c(()=>import("./BJDFO7_C.js"),[],import.meta.url))},{id:"rst",name:"reStructuredText",import:(()=>c(()=>import("./Cb4P6-Nf.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37]),import.meta.url))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>c(()=>import("./fWqGrwan.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>c(()=>import("./B1yitclQ.js"),[],import.meta.url))},{id:"sas",name:"SAS",import:(()=>c(()=>import("./CG8Ifv2g.js"),__vite__mapDeps([79,16]),import.meta.url))},{id:"sass",name:"Sass",import:(()=>c(()=>import("./Cj5Yp3dK.js"),[],import.meta.url))},{id:"scala",name:"Scala",import:(()=>c(()=>import("./C151Ov-r.js"),[],import.meta.url))},{id:"scheme",name:"Scheme",import:(()=>c(()=>import("./C98Dy4si.js"),[],import.meta.url))},{id:"scss",name:"SCSS",import:(()=>c(()=>import("./2EtD6e53.js"),__vite__mapDeps([5,3]),import.meta.url))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>c(()=>import("./DVxCFoDh.js"),[],import.meta.url))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>c(()=>import("./BqTXFGrv.js"),__vite__mapDeps([80,81]),import.meta.url))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>c(()=>import("./Yzrsuije.js"),[],import.meta.url))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>c(()=>import("./Cq5zzVJU.js"),__vite__mapDeps([82,28]),import.meta.url))},{id:"smalltalk",name:"Smalltalk",import:(()=>c(()=>import("./BERRCDM3.js"),[],import.meta.url))},{id:"solidity",name:"Solidity",import:(()=>c(()=>import("./rGO070M0.js"),[],import.meta.url))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>c(()=>import("./Dzze3sRP.js"),__vite__mapDeps([83,1,2,3]),import.meta.url))},{id:"sparql",name:"SPARQL",import:(()=>c(()=>import("./BRZ36xJF.js"),__vite__mapDeps([84,85]),import.meta.url))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>c(()=>import("./BtCnVYZw.js"),[],import.meta.url))},{id:"sql",name:"SQL",import:(()=>c(()=>import("./BLtJtn59.js"),[],import.meta.url))},{id:"ssh-config",name:"SSH Config",import:(()=>c(()=>import("./_ykCGR6B.js"),[],import.meta.url))},{id:"stata",name:"Stata",import:(()=>c(()=>import("./DM8c43g1.js"),__vite__mapDeps([86,16]),import.meta.url))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>c(()=>import("./BEDo0Tqx.js"),[],import.meta.url))},{id:"svelte",name:"Svelte",import:(()=>c(()=>import("./DDBovgxi.js"),__vite__mapDeps([87,2,11,3,12]),import.meta.url))},{id:"swift",name:"Swift",import:(()=>c(()=>import("./Dg5xB15N.js"),[],import.meta.url))},{id:"system-verilog",name:"SystemVerilog",import:(()=>c(()=>import("./CnnmHF94.js"),[],import.meta.url))},{id:"systemd",name:"Systemd Units",import:(()=>c(()=>import("./4A_iFExJ.js"),[],import.meta.url))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>c(()=>import("./CkByrt1z.js"),[],import.meta.url))},{id:"tasl",name:"Tasl",import:(()=>c(()=>import("./QIJgUcNo.js"),[],import.meta.url))},{id:"tcl",name:"Tcl",import:(()=>c(()=>import("./dwOrl1Do.js"),[],import.meta.url))},{id:"templ",name:"Templ",import:(()=>c(()=>import("./Cl-U1hlN.js"),__vite__mapDeps([88,89,2,3]),import.meta.url))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>c(()=>import("./BETggiCN.js"),[],import.meta.url))},{id:"tex",name:"TeX",import:(()=>c(()=>import("./CR9Quhzy.js"),__vite__mapDeps([64,62]),import.meta.url))},{id:"toml",name:"TOML",import:(()=>c(()=>import("./vGWfd6FD.js"),[],import.meta.url))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>c(()=>import("./Cm3UrAx6.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8]),import.meta.url))},{id:"tsv",name:"TSV",import:(()=>c(()=>import("./B_m7g4N7.js"),[],import.meta.url))},{id:"tsx",name:"TSX",import:(()=>c(()=>import("./COt5Ahok.js"),[],import.meta.url))},{id:"turtle",name:"Turtle",import:(()=>c(()=>import("./BsS91CYL.js"),[],import.meta.url))},{id:"twig",name:"Twig",import:(()=>c(()=>import("./DyUgxO5C.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38]),import.meta.url))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:(()=>c(()=>import("./BPQ3VLAy.js"),[],import.meta.url))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>c(()=>import("./BGHnOYBU.js"),[],import.meta.url))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>c(()=>import("./DHCkPAjA.js"),[],import.meta.url))},{id:"v",name:"V",import:(()=>c(()=>import("./BcVCzyr7.js"),[],import.meta.url))},{id:"vala",name:"Vala",import:(()=>c(()=>import("./CsfeWuGM.js"),[],import.meta.url))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>c(()=>import("./D17OF-Vu.js"),[],import.meta.url))},{id:"verilog",name:"Verilog",import:(()=>c(()=>import("./BQ8w6xss.js"),[],import.meta.url))},{id:"vhdl",name:"VHDL",import:(()=>c(()=>import("./CeAyd5Ju.js"),[],import.meta.url))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>c(()=>import("./CJc9bBzg.js"),[],import.meta.url))},{id:"vue",name:"Vue",import:(()=>c(()=>import("./aF-l9SMX.js"),__vite__mapDeps([92,3,2,11,9,15,1]),import.meta.url))},{id:"vue-html",name:"Vue HTML",import:(()=>c(()=>import("./CXsvEkWC.js"),__vite__mapDeps([93,92,3,2,11,9,15,1]),import.meta.url))},{id:"vue-vine",name:"Vue Vine",import:(()=>c(()=>import("./cgN_UPQ0.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1]),import.meta.url))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>c(()=>import("./CDx5xZoG.js"),[],import.meta.url))},{id:"wasm",name:"WebAssembly",import:(()=>c(()=>import("./MzD3tlZU.js"),[],import.meta.url))},{id:"wenyan",name:"Wenyan",aliases:["文言"],import:(()=>c(()=>import("./BV7otONQ.js"),[],import.meta.url))},{id:"wgsl",name:"WGSL",import:(()=>c(()=>import("./Dx-B1_4e.js"),[],import.meta.url))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>c(()=>import("./BhOHFoWU.js"),[],import.meta.url))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>c(()=>import("./5i3qLPDT.js"),[],import.meta.url))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>c(()=>import("./lXgVvXCa.js"),[],import.meta.url))},{id:"xml",name:"XML",import:(()=>c(()=>import("./BGJmEYvX.js"),__vite__mapDeps([7,8]),import.meta.url))},{id:"xsl",name:"XSL",import:(()=>c(()=>import("./yv6CvBhz.js"),__vite__mapDeps([96,7,8]),import.meta.url))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>c(()=>import("./Buea-lGh.js"),[],import.meta.url))},{id:"zenscript",name:"ZenScript",import:(()=>c(()=>import("./DVFEvuxE.js"),[],import.meta.url))},{id:"zig",name:"Zig",import:(()=>c(()=>import("./VOosw3JB.js"),[],import.meta.url))}],Mu=Object.fromEntries(Xs.map(n=>[n.id,n.import])),Vu=Object.fromEntries(Xs.flatMap(n=>n.aliases?.map(e=>[e,n.import])||[])),Bu={...Mu,...Vu},Uu=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>c(()=>import("./C-Jbm3Hp.js"),[],import.meta.url))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>c(()=>import("./D-2ljcwZ.js"),[],import.meta.url))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>c(()=>import("./Cv9koXgw.js"),[],import.meta.url))},{id:"catppuccin-frappe",displayName:"Catppuccin Frappé",type:"dark",import:(()=>c(()=>import("./DFWUc33u.js"),[],import.meta.url))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>c(()=>import("./C9dUb6Cb.js"),[],import.meta.url))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>c(()=>import("./DQyhUUbL.js"),[],import.meta.url))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>c(()=>import("./D87Tk5Gz.js"),[],import.meta.url))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>c(()=>import("./C3mMm8J8.js"),[],import.meta.url))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>c(()=>import("./BzJJZx-M.js"),[],import.meta.url))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>c(()=>import("./BXkSAIEj.js"),[],import.meta.url))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>c(()=>import("./BgDCqdQA.js"),[],import.meta.url))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>c(()=>import("./C8M2exoo.js"),[],import.meta.url))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>c(()=>import("./DHJKELXO.js"),[],import.meta.url))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>c(()=>import("./Cuk6v7N8.js"),[],import.meta.url))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>c(()=>import("./DH5Ifo-i.js"),[],import.meta.url))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>c(()=>import("./E3gJ1_iC.js"),[],import.meta.url))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>c(()=>import("./DAi9KRSo.js"),[],import.meta.url))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>c(()=>import("./D7oLnXFd.js"),[],import.meta.url))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>c(()=>import("./BfjtVDDH.js"),[],import.meta.url))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>c(()=>import("./CFHQjOhq.js"),[],import.meta.url))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>c(()=>import("./GsRaNv29.js"),[],import.meta.url))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>c(()=>import("./CVdnzihN.js"),[],import.meta.url))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>c(()=>import("./CH1njM8p.js"),[],import.meta.url))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>c(()=>import("./DRw_LuNl.js"),[],import.meta.url))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>c(()=>import("./hJgmCMqR.js"),[],import.meta.url))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>c(()=>import("./DnULxvSX.js"),[],import.meta.url))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>c(()=>import("./CkXjmgJE.js"),[],import.meta.url))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>c(()=>import("./CfQXZHmo.js"),[],import.meta.url))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>c(()=>import("./DWedfzmr.js"),[],import.meta.url))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>c(()=>import("./DUszq2jm.js"),[],import.meta.url))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>c(()=>import("./B7mTdjB0.js"),[],import.meta.url))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>c(()=>import("./D5KoaKCx.js"),[],import.meta.url))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>c(()=>import("./BfHTSMKl.js"),[],import.meta.url))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>c(()=>import("./B0m2ddpp.js"),[],import.meta.url))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>c(()=>import("./CyktbL80.js"),[],import.meta.url))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>c(()=>import("./Csfq5Kiy.js"),[],import.meta.url))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>c(()=>import("./CafNBF8u.js"),[],import.meta.url))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>c(()=>import("./CTRr51gU.js"),[],import.meta.url))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>c(()=>import("./D4h5O-jR.js"),[],import.meta.url))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>c(()=>import("./C39BiMTA.js"),[],import.meta.url))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>c(()=>import("./Ddv68eIx.js"),[],import.meta.url))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>c(()=>import("./DVMEJ2y_.js"),[],import.meta.url))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>c(()=>import("./PoHY5YXO.js"),[],import.meta.url))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>c(()=>import("./3e1v2bzS.js"),[],import.meta.url))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>c(()=>import("./CS3Unz2-.js"),[],import.meta.url))},{id:"red",displayName:"Red",type:"dark",import:(()=>c(()=>import("./bN70gL4F.js"),[],import.meta.url))},{id:"rose-pine",displayName:"Rosé Pine",type:"dark",import:(()=>c(()=>import("./qdsjHGoJ.js"),[],import.meta.url))},{id:"rose-pine-dawn",displayName:"Rosé Pine Dawn",type:"light",import:(()=>c(()=>import("./DHQR4-dF.js"),[],import.meta.url))},{id:"rose-pine-moon",displayName:"Rosé Pine Moon",type:"dark",import:(()=>c(()=>import("./D4_iv3hh.js"),[],import.meta.url))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>c(()=>import("./BthQWCQV.js"),[],import.meta.url))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>c(()=>import("./DqwNpetd.js"),[],import.meta.url))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>c(()=>import("./Bw305WKR.js"),[],import.meta.url))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>c(()=>import("./DXbdFlpD.js"),[],import.meta.url))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>c(()=>import("./L9t79GZl.js"),[],import.meta.url))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>c(()=>import("./CbfX1IO0.js"),[],import.meta.url))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>c(()=>import("./hegEt444.js"),[],import.meta.url))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>c(()=>import("./DU1UobuO.js"),[],import.meta.url))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>c(()=>import("./Bkuqu6BP.js"),[],import.meta.url))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>c(()=>import("./D0r3Knsf.js"),[],import.meta.url))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>c(()=>import("./CVO1_9PV.js"),[],import.meta.url))}],ju=Object.fromEntries(Uu.map(n=>[n.id,n.import]));class vr extends Error{constructor(e){super(e),this.name="ShikiError"}}function zu(){return 2147483648}function Gu(){return typeof performance<"u"?performance.now():Date.now()}const Fu=(n,e)=>n+(e-n%e)%e;async function qu(n){let e,t;const r={};function s(_){t=_,r.HEAPU8=new Uint8Array(_),r.HEAPU32=new Uint32Array(_)}function i(_,h,T){r.HEAPU8.copyWithin(_,h,h+T)}function o(_){try{return e.grow(_-t.byteLength+65535>>>16),s(e.buffer),1}catch{}}function l(_){const h=r.HEAPU8.length;_=_>>>0;const T=zu();if(_>T)return!1;for(let y=1;y<=4;y*=2){let g=h*(1+.2/y);g=Math.min(g,_+100663296);const x=Math.min(T,Fu(Math.max(_,g),65536));if(o(x))return!0}return!1}const a=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function u(_,h,T=1024){const y=h+T;let g=h;for(;_[g]&&!(g>=y);)++g;if(g-h>16&&_.buffer&&a)return a.decode(_.subarray(h,g));let x="";for(;h<g;){let b=_[h++];if(!(b&128)){x+=String.fromCharCode(b);continue}const D=_[h++]&63;if((b&224)===192){x+=String.fromCharCode((b&31)<<6|D);continue}const M=_[h++]&63;if((b&240)===224?b=(b&15)<<12|D<<6|M:b=(b&7)<<18|D<<12|M<<6|_[h++]&63,b<65536)x+=String.fromCharCode(b);else{const U=b-65536;x+=String.fromCharCode(55296|U>>10,56320|U&1023)}}return x}function d(_,h){return _?u(r.HEAPU8,_,h):""}const p={emscripten_get_now:Gu,emscripten_memcpy_big:i,emscripten_resize_heap:l,fd_write:()=>0};async function f(){const h=await n({env:p,wasi_snapshot_preview1:p});e=h.memory,s(e.buffer),Object.assign(r,h),r.UTF8ToString=d}return await f(),r}var Hu=Object.defineProperty,Wu=(n,e,t)=>e in n?Hu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_e=(n,e,t)=>Wu(n,typeof e!="symbol"?e+"":e,t);let ke=null;function Ku(n){throw new vr(n.UTF8ToString(n.getLastOnigError()))}class xn{constructor(e){_e(this,"utf16Length"),_e(this,"utf8Length"),_e(this,"utf16Value"),_e(this,"utf8Value"),_e(this,"utf16OffsetToUtf8"),_e(this,"utf8OffsetToUtf16");const t=e.length,r=xn._utf8ByteLength(e),s=r!==t,i=s?new Uint32Array(t+1):null;s&&(i[t]=r);const o=s?new Uint32Array(r+1):null;s&&(o[r]=t);const l=new Uint8Array(r);let a=0;for(let u=0;u<t;u++){const d=e.charCodeAt(u);let p=d,f=!1;if(d>=55296&&d<=56319&&u+1<t){const _=e.charCodeAt(u+1);_>=56320&&_<=57343&&(p=(d-55296<<10)+65536|_-56320,f=!0)}s&&(i[u]=a,f&&(i[u+1]=a),p<=127?o[a+0]=u:p<=2047?(o[a+0]=u,o[a+1]=u):p<=65535?(o[a+0]=u,o[a+1]=u,o[a+2]=u):(o[a+0]=u,o[a+1]=u,o[a+2]=u,o[a+3]=u)),p<=127?l[a++]=p:p<=2047?(l[a++]=192|(p&1984)>>>6,l[a++]=128|(p&63)>>>0):p<=65535?(l[a++]=224|(p&61440)>>>12,l[a++]=128|(p&4032)>>>6,l[a++]=128|(p&63)>>>0):(l[a++]=240|(p&1835008)>>>18,l[a++]=128|(p&258048)>>>12,l[a++]=128|(p&4032)>>>6,l[a++]=128|(p&63)>>>0),f&&u++}this.utf16Length=t,this.utf8Length=r,this.utf16Value=e,this.utf8Value=l,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let t=0;for(let r=0,s=e.length;r<s;r++){const i=e.charCodeAt(r);let o=i,l=!1;if(i>=55296&&i<=56319&&r+1<s){const a=e.charCodeAt(r+1);a>=56320&&a<=57343&&(o=(i-55296<<10)+65536|a-56320,l=!0)}o<=127?t+=1:o<=2047?t+=2:o<=65535?t+=3:t+=4,l&&r++}return t}createString(e){const t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}const wn=class He{constructor(e){if(_e(this,"id",++He.LAST_ID),_e(this,"_onigBinding"),_e(this,"content"),_e(this,"utf16Length"),_e(this,"utf8Length"),_e(this,"utf16OffsetToUtf8"),_e(this,"utf8OffsetToUtf16"),_e(this,"ptr"),!ke)throw new vr("Must invoke loadWasm first.");this._onigBinding=ke,this.content=e;const t=new xn(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!He._sharedPtrInUse?(He._sharedPtr||(He._sharedPtr=ke.omalloc(1e4)),He._sharedPtrInUse=!0,ke.HEAPU8.set(t.utf8Value,He._sharedPtr),this.ptr=He._sharedPtr):this.ptr=t.createString(ke)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===He._sharedPtr?He._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};_e(wn,"LAST_ID",0);_e(wn,"_sharedPtr",0);_e(wn,"_sharedPtrInUse",!1);let Ys=wn;class Qu{constructor(e){if(_e(this,"_onigBinding"),_e(this,"_ptr"),!ke)throw new vr("Must invoke loadWasm first.");const t=[],r=[];for(let l=0,a=e.length;l<a;l++){const u=new xn(e[l]);t[l]=u.createString(ke),r[l]=u.utf8Length}const s=ke.omalloc(4*e.length);ke.HEAPU32.set(t,s/4);const i=ke.omalloc(4*e.length);ke.HEAPU32.set(r,i/4);const o=ke.createOnigScanner(s,i,e.length);for(let l=0,a=e.length;l<a;l++)ke.ofree(t[l]);ke.ofree(i),ke.ofree(s),o===0&&Ku(ke),this._onigBinding=ke,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new Ys(e);const i=this._findNextMatchSync(e,t,!1,s);return e.dispose(),i}return this._findNextMatchSync(e,t,!1,s)}_findNextMatchSync(e,t,r,s){const i=this._onigBinding,o=i.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),s);if(o===0)return null;const l=i.HEAPU32;let a=o/4;const u=l[a++],d=l[a++],p=[];for(let f=0;f<d;f++){const _=e.convertUtf8OffsetToUtf16(l[a++]),h=e.convertUtf8OffsetToUtf16(l[a++]);p[f]={start:_,end:h,length:h-_}}return{index:u,captureIndices:p}}}function Ju(n){return typeof n.instantiator=="function"}function Zu(n){return typeof n.default=="function"}function Xu(n){return typeof n.data<"u"}function Yu(n){return typeof Response<"u"&&n instanceof Response}function ec(n){return typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||ArrayBuffer.isView(n))||typeof Buffer<"u"&&Buffer.isBuffer?.(n)||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&n instanceof Uint32Array}let Zt;function tc(n){if(Zt)return Zt;async function e(){ke=await qu(async t=>{let r=n;return r=await r,typeof r=="function"&&(r=await r(t)),typeof r=="function"&&(r=await r(t)),Ju(r)?r=await r.instantiator(t):Zu(r)?r=await r.default(t):(Xu(r)&&(r=r.data),Yu(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await nc(r)(t):r=await rc(r)(t):ec(r)?r=await Dn(r)(t):r instanceof WebAssembly.Module?r=await Dn(r)(t):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await Dn(r.default)(t))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Zt=e(),Zt}function Dn(n){return e=>WebAssembly.instantiate(n,e)}function nc(n){return e=>WebAssembly.instantiateStreaming(n,e)}function rc(n){return async e=>{const t=await n.arrayBuffer();return WebAssembly.instantiate(t,e)}}async function sc(n){return n&&await tc(n),{createScanner(e){return new Qu(e.map(t=>typeof t=="string"?t:t.source))},createString(e){return new Ys(e)}}}const ic=Du({langs:Bu,themes:ju,engine:()=>sc(c(()=>import("./CG6Dc4jp.js"),[],import.meta.url))}),{codeToHtml:Qr}=Nu(ic,{guessEmbeddedLanguages:Ql});function oc(n){const e={uniqueId:"",prompt:"",autostart:!1},t=n.trim().split(`
`);for(const r of t){const s=r.indexOf(":");if(s===-1)continue;const i=r.slice(0,s).trim().toLowerCase(),o=r.slice(s+1).trim();switch(i){case"uniqueid":e.uniqueId=o;break;case"prompt":e.prompt=o;break;case"model":e.model=o;break;case"negative":e.negative=o;break;case"autostart":e.autostart=o.toLowerCase()==="true";break}}return e}function Jr(n){return btoa(unescape(encodeURIComponent(n)))}function ac(n){return decodeURIComponent(escape(atob(n)))}const lc={js:"javascript",ts:"typescript",jsx:"jsx",tsx:"tsx",vue:"vue",html:"html",css:"css",scss:"scss",json:"json",md:"markdown",markdown:"markdown",py:"python",python:"python",rb:"ruby",ruby:"ruby",go:"go",rust:"rust",rs:"rust",java:"java",c:"c",cpp:"cpp","c++":"cpp",cs:"csharp",csharp:"csharp",php:"php",swift:"swift",kotlin:"kotlin",sql:"sql",sh:"bash",bash:"bash",shell:"bash",zsh:"bash",yaml:"yaml",yml:"yaml",xml:"xml",dockerfile:"dockerfile",docker:"dockerfile"},Xt=new Map;async function uc(n,e){const t=`${e}:${n}`;if(Xt.has(t))return Xt.get(t);const r=lc[e.toLowerCase()]||"text";try{const s=await Qr(n,{lang:r,themes:{light:"github-light",dark:"github-dark"}});return Xt.set(t,s),s}catch{const s=await Qr(n,{lang:"text",themes:{light:"github-light",dark:"github-dark"}});return Xt.set(t,s),s}}function cc(){const n=new ms;return n.use({renderer:{code({text:e,lang:t}){const r=t||"text";if(r==="mj-drawing"){const i=oc(e);return`<!--MJ_DRAWING:${Jr(JSON.stringify(i))}-->`}return`<!--CODE_BLOCK:${r}:${Jr(e)}-->`},codespan({text:e}){return`<code class="px-1.5 py-0.5 rounded bg-(--ui-bg-elevated) text-sm font-mono">${e}</code>`},link({href:e,title:t,tokens:r}){const s=t?` title="${t}"`:"";return`<a href="${e}"${s} target="_blank" rel="noopener noreferrer" class="text-(--ui-primary) hover:underline">${this.parser.parseInline(r)}</a>`},paragraph({tokens:e}){return`<p class="mb-2 last:mb-0">${this.parser.parseInline(e)}</p>`},list({items:e,ordered:t}){const r=t?"ol":"ul",s=t?"list-decimal":"list-disc",i=e.map(o=>`<li>${o.tokens?this.parser.parse(o.tokens):o.text}</li>`).join("");return`<${r} class="${s} pl-5 mb-2 space-y-1">${i}</${r}>`},blockquote({tokens:e}){return`<blockquote class="border-l-4 border-(--ui-border-accented) pl-4 py-1 my-2 text-(--ui-text-muted) italic">${this.parser.parse(e)}</blockquote>`},heading({tokens:e,depth:t}){return`<h${t} class="${{1:"text-xl font-bold",2:"text-lg font-bold",3:"text-base font-semibold",4:"text-sm font-semibold",5:"text-sm font-medium",6:"text-xs font-medium"}[t]} mb-2">${this.parser.parseInline(e)}</h${t}>`},hr(){return'<hr class="my-4 border-(--ui-border)" />'},table({header:e,rows:t}){const r=e.map(i=>`<th class="px-3 py-2 text-left border border-(--ui-border) bg-(--ui-bg-elevated)">${i.tokens?this.parser.parseInline(i.tokens):i.text}</th>`).join(""),s=t.map(i=>`<tr>${i.map(l=>`<td class="px-3 py-2 border border-(--ui-border)">${l.tokens?this.parser.parseInline(l.tokens):l.text}</td>`).join("")}</tr>`).join("");return`<div class="overflow-x-auto my-2"><table class="min-w-full border-collapse text-sm"><thead><tr>${r}</tr></thead><tbody>${s}</tbody></table></div>`},strong({tokens:e}){return`<strong class="font-semibold">${this.parser.parseInline(e)}</strong>`},em({tokens:e}){return`<em class="italic">${this.parser.parseInline(e)}</em>`},del({tokens:e}){return`<del class="line-through text-(--ui-text-muted)">${this.parser.parseInline(e)}</del>`}}}),n}const dc=cc();async function pc(n){const e=/<!--CODE_BLOCK:([^:]+):([^-]+)-->/g,t=[...n.matchAll(e)];if(t.length===0)return n;const r=await Promise.all(t.map(async i=>{const[o,l,a]=i,u=ac(a),d=await uc(u,l);return{original:o,replacement:`<div class="my-2 rounded-lg overflow-hidden text-sm [&>pre]:p-4 [&>pre]:overflow-x-auto">${d}</div>`}}));let s=n;for(const{original:i,replacement:o}of r)s=s.replace(i,o);return s}function mc(n){const e=/<!--MJ_DRAWING:([^-]+)-->/g;return n.replace(e,(t,r)=>`<div class="mj-drawing-block" data-mj-drawing="${r}"></div>`)}function hc(n){const e=/```mj-drawing\s*\n/g,t=/```mj-drawing\s*\n[\s\S]*?\n```/g,r=n.match(e)||[],s=n.match(t)||[];return r.length>s.length}function fc(n){if(!hc(n))return n;const e=n.lastIndexOf("```mj-drawing");if(e===-1)return n;const t=n.slice(0,e);return n.slice(e),t+`

*正在生成插图参数...*

`}async function gc(n){if(!n)return"";let e=n.replace(/[\u200B\u200C\u200D\uFEFF]/g,"");e=fc(e);const t=await dc.parse(e),r=await pc(t);return mc(r)}function _c(){const{getAuthHeader:n}=ti(),e=We("conversation-suggestions",()=>({})),t=We("conversation-suggestions-loading",()=>({}));function r(l){return e.value[l]||[]}function s(l){return t.value[l]||!1}async function i(l,a=!1){if(!(!a&&e.value[l]?.length)&&!t.value[l]){t.value[l]=!0;try{const u=await $fetch(`/api/assistants/${l}/suggestions`,{method:"POST",headers:n(),body:{refresh:a}});e.value[l]=u.suggestions}catch(u){console.error("加载开场白建议失败:",u)}finally{t.value[l]=!1}}}async function o(l){await i(l,!0)}return{getSuggestions:r,isLoading:s,loadSuggestions:i,refreshSuggestions:o}}const vc={key:0,class:"h-full flex items-center justify-center"},yc={class:"text-center max-w-md px-4"},bc={class:"space-y-2"},kc=["onClick"],xc={key:0,class:"flex items-center gap-4 py-4"},wc={class:"text-xs text-(--ui-text-muted) flex items-center gap-1"},Ec=["data-message-id"],Sc=["onClick"],Rc={key:0,class:"text-sm"},Tc={class:"flex items-center gap-2 text-blue-600 dark:text-blue-400"},Ac={key:1,class:"text-sm"},Ic=["onClick"],Cc={key:0,class:"text-xs opacity-60"},Lc={key:0,class:"mt-2 text-(--ui-text)"},Pc={key:1,class:"whitespace-pre-wrap break-words"},Oc={key:2,class:"text-sm user-message-content"},Dc={key:0,class:"flex flex-wrap gap-2 mb-2"},$c=["onClick"],Nc=["src","alt"],Mc=["href"],Vc={class:"text-left"},Bc={class:"text-xs font-medium truncate max-w-[120px]"},Uc={class:"text-[10px] opacity-70"},jc=["onKeydown"],zc={key:1,class:"whitespace-pre-wrap break-words"},Gc={key:3,class:"text-sm flex items-start gap-2"},Fc={class:"whitespace-pre-wrap break-words"},qc={key:4,class:"text-sm"},Hc=["onKeydown"],Wc={key:1,class:"flex items-center gap-1"},Kc={key:0,class:"ml-1 text-xs text-(--ui-text-muted) tabular-nums"},Qc={key:1,class:"ml-1 text-xs text-(--ui-text-muted) tabular-nums"},Jc={key:0,class:"inline-block w-2 h-4 bg-current animate-pulse align-middle"},Zc={class:"whitespace-pre-wrap break-words"},Xc={key:0,class:"inline-block w-2 h-4 bg-current animate-pulse ml-0.5"},Yc={key:4,class:"mt-2 text-xs text-(--ui-text-muted) flex items-center gap-1"},ed=["onClick"],td=["title","onClick"],nd=["onClick"],rd={class:"flex justify-end gap-3"},sd={class:"text-(--ui-text-muted)"},id={class:"font-medium text-(--ui-text)"},od={class:"flex justify-end gap-3"},ad={class:"relative bg-(--ui-bg) flex items-center justify-center"},ld=["src"],ud=50,cd=nt({__name:"MessageList",props:{messages:{},isStreaming:{type:Boolean},assistantId:{},estimatedTime:{}},emits:["delete","replay","edit","fork","deleteUntil","stop","sendSuggestion"],setup(n,{expose:e,emit:t}){const r=n,s=t,{getSuggestions:i,isLoading:o,loadSuggestions:l,refreshSuggestions:a}=_c(),u=re(()=>r.assistantId?i(r.assistantId):[]),d=re(()=>r.assistantId?o(r.assistantId):!1),p=re(()=>r.messages.length===0&&r.assistantId);tt(()=>r.assistantId,m=>{m&&r.messages.length===0&&l(m)},{immediate:!0});function f(m){s("sendSuggestion",m)}function _(){r.assistantId&&a(r.assistantId)}const h=z(),T=z(!1),y=z("");function g(m){return m.startsWith("image/")}function x(m){return m.startsWith("image/")?"i-heroicons-photo":m.startsWith("video/")?"i-heroicons-video-camera":m.startsWith("audio/")?"i-heroicons-musical-note":m.includes("pdf")?"i-heroicons-document-text":m.includes("word")||m.includes("document")?"i-heroicons-document":m.includes("sheet")||m.includes("excel")?"i-heroicons-table-cells":m.includes("presentation")||m.includes("powerpoint")?"i-heroicons-presentation-chart-bar":m.includes("zip")||m.includes("rar")||m.includes("7z")?"i-heroicons-archive-box":"i-heroicons-document"}function b(m){return m<1024?`${m} B`:m<1024*1024?`${(m/1024).toFixed(1)} KB`:`${(m/1024/1024).toFixed(2)} MB`}function D(m){return`/api/files/${m}`}function M(m){y.value=D(m),T.value=!0}const U=z(!0);function X(){if(!h.value)return!0;const{scrollTop:m,scrollHeight:R,clientHeight:H}=h.value;return R-m-H<=ud}function Te(){U.value=X()}const le=z(new Map),Y=z(new Set);function V(){U.value&&Ot(()=>{h.value&&(h.value.scrollTop=h.value.scrollHeight)})}function B(){U.value=!0,Ot(()=>{h.value&&(h.value.scrollTop=h.value.scrollHeight)})}function Ae(){const m=r.messages.findIndex(R=>R.mark==="compress-request");m<0||!h.value||Ot(()=>{const R=h.value?.querySelectorAll("[data-message-id]");R&&R[m]&&R[m].scrollIntoView({behavior:"smooth",block:"center"})})}e({scrollToBottom:B,scrollToCompressRequest:Ae});const te=new Map,pe=z(null);async function ye(m,R=!1){if(!R&&Y.value.has(m.id))return;const H=te.get(m.id)||0,it=m.content?.length||0;if(!(!R&&H===it&&le.value.has(m.id))){Y.value.add(m.id);try{const vt=await gc(m.content);le.value.set(m.id,vt),te.set(m.id,it)}finally{Y.value.delete(m.id)}}}function be(){pe.value||(pe.value=Mn(()=>{for(const m of r.messages)m.role==="assistant"&&m.status==="streaming"&&m.content&&ye(m);V()},150))}function rt(){pe.value&&(clearInterval(pe.value),pe.value=null)}function Qe(m){return le.value.get(m.id)||m.content}function A(m){return m.role==="assistant"&&(m.status==="created"||m.status==="pending")&&!m.content}function F(m){return m.role==="assistant"&&m.status==="streaming"}function Q(m){return m.role==="assistant"&&m.status==="stopped"}const ie=z(Date.now());let ce=null;const oe=z(null),de=re(()=>r.messages.find(m=>A(m))),J=re(()=>r.estimatedTime??_i),Ve=re(()=>oe.value?(ie.value-oe.value)/1e3:0),gt=re(()=>{if(!oe.value)return null;const m=J.value-Ve.value;return m>0?m.toFixed(2):null}),Ne=re(()=>oe.value?Ve.value>J.value:!1),Je=re(()=>Ne.value?(Ve.value-J.value).toFixed(2):null);tt(de,(m,R)=>{m&&!R?(oe.value=Date.now(),ie.value=Date.now(),ce=Mn(()=>{ie.value=Date.now()},50)):!m&&R&&(ce&&(clearInterval(ce),ce=null),oe.value=null)},{immediate:!0}),tn(()=>{ce&&(clearInterval(ce),ce=null)});function Ze(m){return m.status==="streaming"&&m.content?!1:!le.value.has(m.id)}tt(()=>r.messages.length,(m,R)=>{m>R&&B()}),tt(()=>r.messages,async(m,R)=>{m!==R&&(le.value.clear(),te.clear());for(const H of r.messages)H.content&&await ye(H)},{immediate:!0}),tt(()=>r.isStreaming,async(m,R)=>{if(m)be();else if(rt(),R)for(const H of r.messages)H.content&&await ye(H,!0)},{immediate:!0}),tn(()=>{rt()});async function Pe(m){try{await navigator.clipboard.writeText(m)}catch(R){console.error("复制失败:",R)}}const Be=z(null),Fe=z(!1),Xe=z(null);function _t(m){Xe.value=Xe.value===m?null:m}function w(m){return Xe.value===m}const C=z(new Set);function $(m){C.value.has(m)?C.value.delete(m):C.value.add(m)}function j(m){if(r.isStreaming&&m.mark==="compress-response"){const R=r.messages.findIndex(H=>H.mark==="compress-response");if(R>=0&&r.messages[R].id===m.id)return!0}return C.value.has(m.id)}function ne(m){Be.value=m,Fe.value=!0}function xe(){Be.value&&s("delete",Be.value),Fe.value=!1,Be.value=null}function ut(){Fe.value=!1,Be.value=null}const Ue=z(null),Oe=z(!1),je=z(0);function st(m){const R=r.messages.findIndex(H=>H.id===m);R<0||(Ue.value=m,je.value=R+1,Oe.value=!0)}function Rt(){Ue.value&&s("deleteUntil",Ue.value),Oe.value=!1,Ue.value=null,je.value=0}function En(){Oe.value=!1,Ue.value=null,je.value=0}function Gt(m){let R=new TextEncoder().encode(m.content).length;if(m.files?.length)for(const H of m.files)H.mimeType.startsWith("image/")&&(R+=Math.ceil(H.size*4/3));return R}function Sn(m){return m<1024?`${m} B`:m<1024*1024?`${(m/1024).toFixed(1)} KB`:`${(m/1024/1024).toFixed(1)} MB`}function Ft(m){const R=[],H=[];return m.modelName&&H.push({label:m.modelName,icon:"i-heroicons-cpu-chip",disabled:!0}),H.push({label:Sn(Gt(m)),icon:"i-heroicons-document-text",disabled:!0}),R.push(H),R.push([{label:"复制",icon:"i-heroicons-clipboard",onSelect:()=>Pe(m.content)},{label:"分叉对话",icon:"i-lucide-split",onSelect:()=>s("fork",m.id)},{label:"删除此消息及以上",icon:"i-heroicons-fire",onSelect:()=>st(m.id)}]),R}const Ye=z(null),Ce=z("");function Rn(m){Ye.value=m.id,Ce.value=m.content}function N(){Ye.value=null,Ce.value=""}function O(){if(Ye.value!==null&&Ce.value.trim()){const m=r.messages.find(R=>R.id===Ye.value);m&&(m.content=Ce.value,m.role==="assistant"&&(le.value.delete(m.id),te.delete(m.id),ye(m,!0))),s("edit",Ye.value,Ce.value),Ye.value=null,Ce.value=""}}function q(m){return Ye.value===m}return(m,R)=>{const H=lt,it=ao,vt=es,ot=wt,qt=_n,Tt=gn;return E(),P("div",{ref_key:"messagesContainer",ref:h,class:"flex-1 overflow-y-auto p-4 space-y-4",onScroll:Te},[k(p)?(E(),P("div",vc,[v("div",yc,[k(d)?(E(),P(fe,{key:0},[R[5]||(R[5]=ni('<div class="flex items-center justify-center gap-1 mb-2" data-v-3f657e47><span class="loading-dot w-2 h-2 rounded-full bg-(--ui-text-muted)" style="animation-delay:0s;" data-v-3f657e47></span><span class="loading-dot w-2 h-2 rounded-full bg-(--ui-text-muted)" style="animation-delay:0.2s;" data-v-3f657e47></span><span class="loading-dot w-2 h-2 rounded-full bg-(--ui-text-muted)" style="animation-delay:0.4s;" data-v-3f657e47></span></div><p class="text-sm text-(--ui-text-muted)" data-v-3f657e47>正在生成开场白...</p>',2))],64)):k(u).length>0?(E(),P(fe,{key:1},[S(H,{name:"i-heroicons-light-bulb",class:"w-8 h-8 mx-auto mb-3 text-(--ui-text-muted) opacity-60"}),R[7]||(R[7]=v("p",{class:"text-sm text-(--ui-text-muted) mb-4"},"试试这些话题开始对话",-1)),v("div",bc,[(E(!0),P(fe,null,pt(k(u),(L,yr)=>(E(),P("button",{key:yr,class:"w-full px-4 py-2.5 text-sm text-left rounded-lg bg-(--ui-bg-elevated) hover:bg-(--ui-bg-accented) border border-(--ui-border) transition-colors",onClick:me=>f(L)},Z(L),9,kc))),128))]),v("button",{class:"mt-4 text-xs text-(--ui-text-muted) hover:text-(--ui-text) flex items-center gap-1 mx-auto transition-colors",onClick:_},[S(H,{name:"i-heroicons-arrow-path",class:"w-3 h-3"}),R[6]||(R[6]=ue(" 换一批 ",-1))])],64)):(E(),P(fe,{key:2},[S(H,{name:"i-heroicons-chat-bubble-left-right",class:"w-12 h-12 mx-auto mb-2 text-(--ui-text-muted) opacity-50"}),R[8]||(R[8]=v("p",{class:"text-(--ui-text-muted)"},"开始新对话",-1))],64))])])):K("",!0),(E(!0),P(fe,null,pt(n.messages,(L,yr)=>(E(),P(fe,{key:L.id},[L.mark==="compress-request"?(E(),P("div",xc,[R[10]||(R[10]=v("div",{class:"flex-1 h-px bg-(--ui-border)"},null,-1)),v("span",wc,[S(H,{name:"i-heroicons-archive-box",class:"w-3 h-3"}),R[9]||(R[9]=ue(" 以上内容已压缩 ",-1))]),R[11]||(R[11]=v("div",{class:"flex-1 h-px bg-(--ui-border)"},null,-1))])):K("",!0),v("div",{class:we(["flex gap-3",L.role==="user"?"flex-row-reverse":""]),"data-message-id":L.id},[v("div",{class:we(["hidden md:flex w-8 h-8 rounded-full items-center justify-center flex-shrink-0",[L.mark==="compress-request"?"bg-blue-500":L.role==="user"?"bg-(--ui-primary)":"bg-(--ui-bg-elevated)"]])},[S(H,{name:L.mark==="compress-request"?"i-heroicons-archive-box-arrow-down":L.role==="user"?"i-heroicons-user":"i-heroicons-sparkles",class:we(["w-4 h-4",[L.mark==="compress-request"||L.role==="user"?"text-white":"text-(--ui-primary)"]])},null,8,["name","class"])],2),v("div",{class:we(["group min-w-0",[q(L.id)?"w-full md:w-[85%]":"max-w-full md:max-w-[85%]",L.role==="user"?"flex flex-col items-end":""]])},[v("div",{class:we(["px-4 py-2 rounded-2xl max-w-full overflow-hidden cursor-pointer md:cursor-auto",q(L.id)?"block":"inline-block",L.role==="user"&&L.mark!=="compress-request"?"bg-(--ui-primary) text-white rounded-tr-sm":L.mark==="error"?"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 rounded-tl-sm":L.mark==="compress-request"?"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-tl-sm":L.mark==="compress-response"?"bg-amber-50 dark:bg-amber-950 border border-amber-200 dark:border-amber-800 rounded-tl-sm":"bg-(--ui-bg-elevated) rounded-tl-sm"]),onClick:me=>_t(L.id)},[L.mark==="compress-request"?(E(),P("div",Rc,[v("div",Tc,[S(H,{name:"i-heroicons-archive-box-arrow-down",class:"w-4 h-4"}),R[12]||(R[12]=v("span",{class:"font-medium"},"压缩请求",-1))])])):L.mark==="compress-response"?(E(),P("div",Ac,[v("button",{class:"flex items-center gap-2 text-amber-600 dark:text-amber-400 hover:opacity-80 transition-opacity w-full",onClick:me=>$(L.id)},[S(H,{name:j(L)?"i-heroicons-chevron-down":"i-heroicons-chevron-right",class:"w-4 h-4"},null,8,["name"]),S(H,{name:"i-heroicons-document-text",class:"w-4 h-4"}),R[13]||(R[13]=v("span",{class:"font-medium"},"对话摘要",-1)),j(L)?K("",!0):(E(),P("span",Cc,"点击展开"))],8,Ic),j(L)?(E(),P("div",Lc,[Ze(L)?(E(),P("span",Pc,Z(L.content),1)):(E(),Ee(it,{key:0,html:Qe(L)},null,8,["html"]))])):K("",!0)])):L.role==="user"?(E(),P("div",Oc,[L.files?.length?(E(),P("div",Dc,[(E(!0),P(fe,null,pt(L.files,me=>(E(),P(fe,{key:me.fileName},[g(me.mimeType)?(E(),P("div",{key:0,class:"w-20 h-20 rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:Ep=>M(me.fileName)},[v("img",{src:D(me.fileName),alt:me.name,class:"w-full h-full object-cover"},null,8,Nc)],8,$c)):(E(),P("a",{key:1,href:D(me.fileName),target:"_blank",class:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors"},[S(H,{name:x(me.mimeType),class:"w-5 h-5"},null,8,["name"]),v("div",Vc,[v("div",Bc,Z(me.name),1),v("div",Uc,Z(b(me.size)),1)])],8,Mc))],64))),128))])):K("",!0),q(L.id)?(E(),P(fe,{key:1},[$n(v("textarea",{ref_for:!0,ref:"editTextareaRef","onUpdate:modelValue":R[0]||(R[0]=me=>$e(Ce)?Ce.value=me:null),class:"w-full bg-transparent text-white resize-none outline-none whitespace-pre-wrap field-sizing-content",onKeydown:[Ht(N,["escape"]),Ht(Ke(O,["ctrl"]),["enter"])]},null,40,jc),[[Nn,k(Ce)]]),v("div",{class:"flex justify-end gap-2 mt-2 text-white/80"},[v("button",{class:"px-2 py-0.5 text-xs hover:text-white",onClick:N}," 取消 "),v("button",{class:"px-2 py-0.5 text-xs hover:text-white",onClick:O}," 保存 ")])],64)):L.content?(E(),P(fe,{key:2},[Ze(L)?(E(),P("span",zc,Z(L.content),1)):(E(),Ee(it,{key:0,html:Qe(L)},null,8,["html"]))],64)):K("",!0)])):L.mark==="error"?(E(),P("div",Gc,[S(H,{name:"i-heroicons-exclamation-circle",class:"w-4 h-4 flex-shrink-0 mt-0.5"}),v("span",Fc,Z(L.content),1)])):(E(),P("div",qc,[q(L.id)?(E(),P(fe,{key:0},[$n(v("textarea",{"onUpdate:modelValue":R[1]||(R[1]=me=>$e(Ce)?Ce.value=me:null),class:"w-full bg-transparent text-(--ui-text) resize-none outline-none whitespace-pre-wrap field-sizing-content",onKeydown:[Ht(N,["escape"]),Ht(Ke(O,["ctrl"]),["enter"])]},null,40,Hc),[[Nn,k(Ce)]]),v("div",{class:"flex justify-end gap-2 mt-2 text-(--ui-text-muted)"},[v("button",{class:"px-2 py-0.5 text-xs hover:text-(--ui-text)",onClick:N}," 取消 "),v("button",{class:"px-2 py-0.5 text-xs hover:text-(--ui-text)",onClick:O}," 保存 ")])],64)):A(L)?(E(),P("div",Wc,[R[14]||(R[14]=v("span",{class:"loading-dot w-2 h-2 rounded-full bg-current opacity-60",style:{"animation-delay":"0s"}},null,-1)),R[15]||(R[15]=v("span",{class:"loading-dot w-2 h-2 rounded-full bg-current opacity-60",style:{"animation-delay":"0.2s"}},null,-1)),R[16]||(R[16]=v("span",{class:"loading-dot w-2 h-2 rounded-full bg-current opacity-60",style:{"animation-delay":"0.4s"}},null,-1)),k(gt)?(E(),P("span",Kc,Z(k(gt))+"s",1)):k(Ne)?(E(),P("span",Qc,"+"+Z(k(Je))+"s",1)):K("",!0)])):Ze(L)?(E(),P(fe,{key:3},[v("span",Zc,Z(L.content),1),F(L)?(E(),P("span",Xc)):K("",!0)],64)):(E(),P(fe,{key:2},[S(it,{html:Qe(L)},null,8,["html"]),F(L)?(E(),P("span",Jc)):K("",!0)],64)),Q(L)&&L.content&&!q(L.id)?(E(),P("div",Yc,[S(H,{name:"i-heroicons-stop-circle",class:"w-3 h-3"}),R[17]||(R[17]=v("span",null,"已中断",-1))])):K("",!0)]))],10,Sc),!F(L)&&!A(L)?(E(),P("div",{key:0,class:we(["mt-1 text-xs text-(--ui-text-dimmed) flex items-center gap-2 transition-opacity",w(L.id)?"opacity-100":"opacity-0 md:group-hover:opacity-100"])},[S(vt,{time:L.createdAt},null,8,["time"]),!n.isStreaming&&L.mark!=="compress-request"&&L.mark!=="compress-response"?(E(),P("button",{key:0,class:"p-1 hover:bg-(--ui-bg-elevated) rounded",title:"编辑",onClick:me=>Rn(L)},[S(H,{name:"i-heroicons-pencil",class:"w-3 h-3"})],8,ed)):K("",!0),n.isStreaming?K("",!0):(E(),P("button",{key:1,class:"p-1 hover:bg-(--ui-bg-elevated) rounded",title:L.role==="user"?"重新发送":"重新生成",onClick:me=>s("replay",L)},[S(H,{name:"i-heroicons-arrow-path",class:"w-3 h-3"})],8,td)),n.isStreaming?K("",!0):(E(),P("button",{key:2,class:"p-1 hover:bg-(--ui-bg-elevated) rounded",title:"删除",onClick:me=>ne(L.id)},[S(H,{name:"i-heroicons-trash",class:"w-3 h-3"})],8,nd)),!n.isStreaming&&L.mark!=="compress-request"&&L.mark!=="compress-response"?(E(),Ee(qt,{key:3,items:Ft(L),"onUpdate:open":me=>Xe.value=me?L.id:null},{default:G(()=>[S(ot,{variant:"ghost",size:"xs",title:"更多操作"},{default:G(()=>[S(H,{name:"i-heroicons-ellipsis-vertical",class:"w-3 h-3"})]),_:1})]),_:1},8,["items","onUpdate:open"])):K("",!0)],2)):K("",!0)],2)],10,Ec)],64))),128)),S(Tt,{open:k(Fe),"onUpdate:open":R[2]||(R[2]=L=>$e(Fe)?Fe.value=L:null),title:"确认删除",description:"确定要删除这条消息吗？",close:!1},{footer:G(()=>[v("div",rd,[S(ot,{color:"error",onClick:xe},{default:G(()=>[...R[18]||(R[18]=[ue("删除",-1)])]),_:1}),S(ot,{variant:"outline",color:"neutral",onClick:ut},{default:G(()=>[...R[19]||(R[19]=[ue("取消",-1)])]),_:1})])]),_:1},8,["open"]),S(Tt,{open:k(Oe),"onUpdate:open":R[3]||(R[3]=L=>$e(Oe)?Oe.value=L:null),title:"确认删除",close:!1},{body:G(()=>[v("p",sd,[R[20]||(R[20]=ue(" 确定要删除此消息及之前的共 ",-1)),v("span",id,Z(k(je)),1),R[21]||(R[21]=ue(" 条消息吗？此操作不可撤销。 ",-1))])]),footer:G(()=>[v("div",od,[S(ot,{color:"error",onClick:Rt},{default:G(()=>[...R[22]||(R[22]=[ue("删除",-1)])]),_:1}),S(ot,{variant:"outline",color:"neutral",onClick:En},{default:G(()=>[...R[23]||(R[23]=[ue("取消",-1)])]),_:1})])]),_:1},8,["open"]),S(Tt,{open:k(T),"onUpdate:open":R[4]||(R[4]=L=>$e(T)?T.value=L:null),ui:{content:"sm:max-w-4xl"}},{content:G(()=>[v("div",ad,[v("img",{src:k(y),class:"max-h-[85vh] object-contain"},null,8,ld)])]),_:1},8,["open"])],544)}}}),dd=Object.assign(ri(cd,[["__scopeId","data-v-3f657e47"]]),{__name:"ChatMessageList"}),pd={base:"relative",variants:{size:{xs:"",sm:"",md:"",lg:"",xl:""},orientation:{horizontal:"inline-flex -space-x-px",vertical:"flex flex-col -space-y-px"}}},md={__name:"UFieldGroup",props:{as:{type:null,required:!1},size:{type:null,required:!1},orientation:{type:null,required:!1,default:"horizontal"},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(n){const e=n,t=si(),r=re(()=>br({extend:br(pd),...t.ui?.fieldGroup||{}}));return ii(oi,re(()=>({orientation:e.orientation,size:e.size}))),(s,i)=>(E(),Ee(k(li),{as:n.as,"data-orientation":n.orientation,class:we(r.value({orientation:n.orientation,class:e.class}))},{default:G(()=>[ai(s.$slots,"default")]),_:3},8,["as","data-orientation","class"]))}},hd={class:"border-t border-(--ui-border) p-4"},fd={key:0,class:"mb-3 p-3 rounded-lg bg-amber-50 dark:bg-amber-950 border border-amber-200 dark:border-amber-800 flex items-center justify-between"},gd={class:"flex items-center gap-2 text-amber-700 dark:text-amber-300 text-sm"},_d={class:"flex items-center gap-2"},vd={class:"flex flex-wrap items-center gap-3 mb-3"},yd={key:0,class:"flex items-center gap-3 text-xs text-(--ui-text-muted)"},bd={key:1,class:"mb-3 flex flex-wrap gap-2 pb-5"},kd={key:0,class:"w-16 h-16 rounded-lg overflow-hidden border border-(--ui-border) bg-(--ui-bg-elevated)"},xd=["src","alt"],wd={key:1,class:"w-16 h-16 rounded-lg border border-(--ui-border) bg-(--ui-bg-elevated) flex flex-col items-center justify-center p-1"},Ed={class:"text-[10px] text-(--ui-text-muted) truncate w-full text-center mt-1"},Sd={key:2,class:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center"},Rd=["title"],Td=["onClick"],Ad={class:"absolute -bottom-5 left-0 right-0 text-[10px] text-(--ui-text-muted) truncate text-center"},Id=["value","placeholder","disabled"],Cd=nt({__name:"MessageInput",props:{upstreams:{},currentUpstreamId:{},currentAimodelId:{},disabled:{type:Boolean},isStreaming:{type:Boolean},messages:{},systemPrompt:{},content:{},uploadingFiles:{},showCompressHint:{type:Boolean}},emits:["send","addMessage","updateModel","stop","compress","scrollToCompress","update:content","update:uploadingFiles","update:showCompressHint"],setup(n,{emit:e}){const t=n,r=e,s=z(),i=z(),o=z(!1),l=re(()=>t.uploadingFiles.filter(A=>A.status==="done"&&A.result).map(A=>A.result)),a=re(()=>t.uploadingFiles.some(A=>A.status==="uploading"));function u(A){return A.startsWith("image/")}function d(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}async function p(A){const Q={id:d(),name:A.name,size:A.size,mimeType:A.type||"application/octet-stream",status:"uploading",progress:0,previewUrl:u(A.type)?URL.createObjectURL(A):void 0},ie=[...t.uploadingFiles,Q];r("update:uploadingFiles",ie);const ce=ie.length-1;try{const oe=new FormData;oe.append("file",A);const de=await $fetch("/api/files/upload",{method:"POST",body:oe}),J=[...t.uploadingFiles];J[ce]={...J[ce],status:"done",progress:100,result:{name:A.name,fileName:de.fileName,mimeType:de.mimeType,size:de.size}},r("update:uploadingFiles",J)}catch(oe){const de=[...t.uploadingFiles];de[ce]={...de[ce],status:"error",error:oe.message||"上传失败"},r("update:uploadingFiles",de)}}async function f(A){const F=A.target,Q=F.files;if(Q?.length){for(const ie of Q)await p(ie);F.value=""}}function _(A){A.preventDefault(),o.value=!0}function h(A){A.preventDefault(),o.value=!1}async function T(A){A.preventDefault(),o.value=!1;const F=A.dataTransfer?.files;if(F?.length)for(const Q of F)await p(Q)}function y(A){const F=t.uploadingFiles.findIndex(Q=>Q.id===A);if(F>=0){const Q=t.uploadingFiles[F];Q.previewUrl&&URL.revokeObjectURL(Q.previewUrl);const ie=t.uploadingFiles.filter(ce=>ce.id!==A);r("update:uploadingFiles",ie)}}function g(){i.value?.click()}function x(A){return A<1024?`${A} B`:A<1024*1024?`${(A/1024).toFixed(1)} KB`:`${(A/1024/1024).toFixed(2)} MB`}function b(A){return A.startsWith("image/")?"i-heroicons-photo":A.startsWith("video/")?"i-heroicons-video-camera":A.startsWith("audio/")?"i-heroicons-musical-note":A.includes("pdf")?"i-heroicons-document-text":A.includes("word")||A.includes("document")?"i-heroicons-document":A.includes("sheet")||A.includes("excel")?"i-heroicons-table-cells":A.includes("presentation")||A.includes("powerpoint")?"i-heroicons-presentation-chart-bar":A.includes("zip")||A.includes("rar")||A.includes("7z")?"i-heroicons-archive-box":"i-heroicons-document"}const D=re(()=>{const A=t.systemPrompt?new TextEncoder().encode(t.systemPrompt).length:0;if(!t.messages?.length)return{size:A,messageCount:0,hasCompressed:!1,fileCount:0};let F=0;for(let oe=t.messages.length-1;oe>=0;oe--)if(t.messages[oe].mark==="compress-response"){F=oe;break}const Q=t.messages.slice(F).filter(oe=>oe.mark!=="compress-request");let ie=0;const ce=Q.reduce((oe,de)=>{let J=new TextEncoder().encode(de.content).length;if(de.files?.length){ie+=de.files.length;for(const Ve of de.files)Ve.mimeType.startsWith("image/")&&(J+=Math.ceil(Ve.size*4/3))}return oe+J},0);return{size:A+ce,messageCount:Q.length,hasCompressed:F>0,fileCount:ie}}),M=re(()=>{const{size:A}=D.value;return A<1024?`${A} B`:A<1024*1024?`${(A/1024).toFixed(1)} KB`:`${(A/1024/1024).toFixed(2)} MB`}),U=re(()=>D.value.size>=100*1024);tt(U,A=>{A&&!t.showCompressHint&&r("update:showCompressHint",!0)});function X(){r("update:showCompressHint",!1)}const Te=z(null),le=z(t.currentUpstreamId),Y=z(t.currentAimodelId);function V(A){le.value=A,A!==null&&Y.value!==null&&r("updateModel",A,Y.value)}function B(A){Y.value=A,le.value!==null&&A!==null&&r("updateModel",le.value,A)}function Ae(){const A=t.content.trim(),F=l.value;!A&&F.length===0||a.value||(r("send",A,F.length>0?F:void 0),ye())}function te(A){const F=t.content.trim();!F||t.disabled||(r("addMessage",F,A),ye())}function pe(){r("stop")}function ye(){r("update:content","");for(const A of t.uploadingFiles)A.previewUrl&&URL.revokeObjectURL(A.previewUrl);r("update:uploadingFiles",[]),s.value&&(s.value.style.height="auto")}function be(A){A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),Ae())}async function rt(A){const F=A.clipboardData?.items;if(F){for(const Q of F)if(Q.kind==="file"){const ie=Q.getAsFile();ie&&(A.preventDefault(),await p(ie))}}}function Qe(A){const F=A.target;r("update:content",F.value),s.value&&(s.value.style.height="auto",s.value.style.height=Math.min(s.value.scrollHeight,200)+"px")}return(A,F)=>{const Q=lt,ie=wt,ce=vi,oe=_n,de=md;return E(),P("div",hd,[t.showCompressHint&&k(U)?(E(),P("div",fd,[v("div",gd,[S(Q,{name:"i-heroicons-exclamation-triangle",class:"w-4 h-4"}),v("span",null,"对话内容较长（"+Z(k(M))+"），建议压缩以节省 Token",1)]),v("div",_d,[S(ie,{size:"xs",color:"warning",onClick:F[0]||(F[0]=J=>r("compress"))},{default:G(()=>[...F[3]||(F[3]=[ue(" 压缩对话 ",-1)])]),_:1}),v("button",{class:"text-amber-500 hover:text-amber-700",onClick:X},[S(Q,{name:"i-heroicons-x-mark",class:"w-4 h-4"})])])])):K("",!0),v("div",vd,[S(ce,{ref_key:"modelSelectorRef",ref:Te,upstreams:n.upstreams,category:"chat","list-layout":"","upstream-id":n.currentUpstreamId,"aimodel-id":n.currentAimodelId,"onUpdate:upstreamId":V,"onUpdate:aimodelId":B},null,8,["upstreams","upstream-id","aimodel-id"]),S(ie,{variant:"ghost",size:"sm",disabled:n.disabled||n.isStreaming,onClick:g},{default:G(()=>[S(Q,{name:"i-heroicons-paper-clip",class:"w-4 h-4"}),F[4]||(F[4]=v("span",null,"附件",-1))]),_:1},8,["disabled"]),n.messages?.length?(E(),P("div",yd,[v("span",null,Z(k(D).messageCount)+" 条消息",1),v("span",null,Z(k(M)),1),k(D).hasCompressed?(E(),P("button",{key:0,class:"text-amber-600 dark:text-amber-400 hover:underline",onClick:F[1]||(F[1]=J=>r("scrollToCompress"))}," (已压缩) ")):K("",!0),k(D).messageCount>=3?(E(),P("button",{key:1,class:"text-(--ui-primary) hover:underline flex items-center gap-1",onClick:F[2]||(F[2]=J=>r("compress"))},[S(Q,{name:"i-heroicons-archive-box-arrow-down",class:"w-3 h-3"}),F[5]||(F[5]=ue(" 压缩对话 ",-1))])):K("",!0)])):K("",!0)]),t.uploadingFiles.length>0?(E(),P("div",bd,[(E(!0),P(fe,null,pt(t.uploadingFiles,J=>(E(),P("div",{key:J.id,class:"relative group"},[u(J.mimeType)&&J.previewUrl?(E(),P("div",kd,[v("img",{src:J.previewUrl,alt:J.name,class:"w-full h-full object-cover"},null,8,xd)])):(E(),P("div",wd,[S(Q,{name:b(J.mimeType),class:"w-6 h-6 text-(--ui-text-muted)"},null,8,["name"]),v("span",Ed,Z(J.name.split(".").pop()),1)])),J.status==="uploading"?(E(),P("div",Sd,[S(Q,{name:"i-heroicons-arrow-path",class:"w-5 h-5 text-white animate-spin"})])):K("",!0),J.status==="error"?(E(),P("div",{key:3,class:"absolute inset-0 bg-red-500/50 rounded-lg flex items-center justify-center",title:J.error},[S(Q,{name:"i-heroicons-exclamation-triangle",class:"w-5 h-5 text-white"})],8,Rd)):K("",!0),v("button",{class:"absolute -top-1.5 -right-1.5 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:Ve=>y(J.id)},[S(Q,{name:"i-heroicons-x-mark",class:"w-3 h-3"})],8,Td),v("div",Ad,Z(x(J.size)),1)]))),128))])):K("",!0),v("div",{class:we(["flex gap-2 items-end",{"ring-2 ring-(--ui-primary) rounded-lg":k(o)}]),onDragover:_,onDragleave:h,onDrop:T},[v("input",{ref_key:"fileInputRef",ref:i,type:"file",multiple:"",class:"hidden",onChange:f},null,544),v("textarea",{ref_key:"textareaRef",ref:s,value:t.content,class:"flex-1 resize-none bg-(--ui-bg-elevated) border border-(--ui-border) rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-(--ui-primary) min-h-[48px] max-h-[200px]",placeholder:k(o)?"松开以上传文件":"输入消息，Enter 发送，Shift+Enter 换行",rows:"1",disabled:n.disabled||n.isStreaming,onKeydown:be,onInput:Qe,onPaste:rt},null,40,Id),n.isStreaming?(E(),Ee(ie,{key:0,color:"error",class:"h-[48px] w-[48px] flex-shrink-0 flex items-center justify-center",onClick:pe},{default:G(()=>[S(Q,{name:"i-heroicons-stop",class:"w-5 h-5"})]),_:1})):(E(),Ee(de,{key:1,class:"flex-shrink-0"},{default:G(()=>[S(ie,{color:"primary",class:"h-[48px] w-[56px]",disabled:!t.content.trim()&&k(l).length===0||k(a)||!k(le)||!k(Y),onClick:Ae},{default:G(()=>[S(Q,{name:"i-heroicons-paper-airplane",class:"w-5 h-5"})]),_:1},8,["disabled"]),S(oe,{items:[[{label:"添加用户消息",icon:"i-heroicons-user",onSelect:()=>te("user")},{label:"添加AI消息",icon:"i-heroicons-sparkles",onSelect:()=>te("assistant")}]]},{default:G(()=>[S(ie,{color:"primary",variant:"solid",class:"h-[48px] !px-1.5 !min-w-0 border-l border-white/20",disabled:!t.content.trim()||n.disabled},{default:G(()=>[S(Q,{name:"i-heroicons-chevron-down",class:"w-4 h-4"})]),_:1},8,["disabled"])]),_:1},8,["items"])]),_:1}))],34)])}}}),Ld=Object.assign(Cd,{__name:"ChatMessageInput"}),Pd={key:0,class:"p-3 border-b border-(--ui-border)"},Od={class:"flex items-start gap-3"},Dd={class:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden"},$d=["src"],Nd={class:"flex-1 min-w-0"},Md={class:"flex items-center gap-2"},Vd={class:"font-medium text-sm truncate"},Bd={class:"text-xs text-(--ui-text-muted) mt-0.5 line-clamp-2"},Ud={key:0,class:"mt-2 text-xs text-(--ui-text-dimmed) flex items-center gap-1"},jd=nt({__name:"AssistantInfo",props:{assistant:{}},emits:["edit"],setup(n,{emit:e}){const t=e;return(r,s)=>{const i=lt;return n.assistant?(E(),P("div",Pd,[v("div",Od,[v("div",Dd,[n.assistant.avatar?(E(),P("img",{key:0,src:n.assistant.avatar,class:"w-full h-full object-cover"},null,8,$d)):(E(),Ee(i,{key:1,name:"i-heroicons-user-circle",class:"w-8 h-8 text-(--ui-text-muted)"}))]),v("div",Nd,[v("div",Md,[v("span",Vd,Z(n.assistant.name),1),n.assistant.isDefault?(E(),Ee(i,{key:0,name:"i-heroicons-star-solid",class:"w-3 h-3 text-yellow-500 flex-shrink-0"})):K("",!0)]),v("div",Bd,Z(n.assistant.description||"暂无简介"),1)]),v("button",{class:"p-1.5 rounded hover:bg-(--ui-bg) transition-colors flex-shrink-0",title:"编辑助手",onClick:s[0]||(s[0]=o=>t("edit"))},[S(i,{name:"i-heroicons-cog-6-tooth",class:"w-4 h-4 text-(--ui-text-muted)"})])]),n.assistant.modelName?(E(),P("div",Ud,[S(i,{name:"i-heroicons-cpu-chip",class:"w-3 h-3"}),ue(" "+Z(n.assistant.modelName),1)])):K("",!0)])):K("",!0)}}}),zd=Object.assign(jd,{__name:"ChatAssistantInfo"}),Gd={class:"flex flex-col h-full"},Fd={class:"flex items-center justify-between p-3 border-b border-(--ui-border)"},qd={class:"flex-1 overflow-y-auto"},Hd={key:0,class:"p-4 text-center text-(--ui-text-muted) text-sm"},Wd=["onClick"],Kd={class:"relative flex items-start gap-2"},Qd={class:"flex-1 min-w-0"},Jd={key:0,class:"flex items-center gap-1"},Zd={class:"text-sm truncate pr-6"},Xd={class:"text-xs text-(--ui-text-dimmed) mt-0.5"},Yd={class:"flex justify-end gap-3"},ep=nt({__name:"ConversationList",props:{conversations:{},currentConversationId:{}},emits:["select","create","delete","rename","generateTitle"],setup(n,{emit:e}){const t=e,r=z(null),s=z(!1);function i(T){r.value=T,s.value=!0}function o(){r.value&&t("delete",r.value),s.value=!1,r.value=null}function l(){s.value=!1,r.value=null}const a=z(null),u=z(""),d=z(null);function p(T){a.value=T.id,u.value=T.title,Ot(()=>{d.value?.focus(),d.value?.select()})}function f(){a.value&&u.value.trim()&&t("rename",a.value,u.value.trim()),_()}function _(){a.value=null,u.value=""}function h(T){T.key==="Enter"?(T.preventDefault(),f()):T.key==="Escape"&&_()}return(T,y)=>{const g=lt,x=wt,b=es,D=_n,M=gn;return E(),P("div",Gd,[v("div",Fd,[y[5]||(y[5]=v("h4",{class:"text-sm font-medium"},"对话列表",-1)),S(x,{variant:"ghost",size:"xs",onClick:y[0]||(y[0]=U=>t("create"))},{default:G(()=>[S(g,{name:"i-heroicons-plus",class:"w-4 h-4"})]),_:1})]),v("div",qd,[n.conversations.length===0?(E(),P("div",Hd," 暂无对话 ")):K("",!0),(E(!0),P(fe,null,pt(n.conversations,U=>(E(),P("div",{key:U.id,class:we(["w-full p-3 text-left hover:bg-(--ui-bg) transition-colors group cursor-pointer",U.id===n.currentConversationId?"bg-(--ui-bg)":""]),onClick:X=>k(a)!==U.id&&t("select",U.id)},[v("div",Kd,[v("span",{class:we(["w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0",U.id===n.currentConversationId?"bg-(--ui-primary)":"bg-transparent"])},null,2),v("div",Qd,[k(a)===U.id?(E(),P("div",Jd,[$n(v("input",{ref_for:!0,ref_key:"inputRef",ref:d,"onUpdate:modelValue":y[1]||(y[1]=X=>$e(u)?u.value=X:null),class:"min-w-0 flex-1 text-sm px-2 py-1 rounded bg-(--ui-bg-elevated) border border-(--ui-border) focus:outline-none focus:border-(--ui-primary)",onKeydown:h,onClick:y[2]||(y[2]=Ke(()=>{},["stop"]))},null,544),[[Nn,k(u)]]),v("button",{class:"flex-shrink-0 p-1 rounded hover:bg-(--ui-success)/20 text-(--ui-success)",title:"确认",onClick:Ke(f,["stop"])},[S(g,{name:"i-heroicons-check",class:"w-4 h-4"})]),v("button",{class:"flex-shrink-0 p-1 rounded hover:bg-(--ui-error)/20 text-(--ui-error)",title:"取消",onClick:Ke(_,["stop"])},[S(g,{name:"i-heroicons-x-mark",class:"w-4 h-4"})])])):(E(),P(fe,{key:1},[v("div",Zd,Z(U.title),1),v("div",Xd,[S(b,{time:U.updatedAt},null,8,["time"])])],64))]),k(a)!==U.id?(E(),Ee(D,{key:0,items:[[{label:"AI 智能重命名",icon:"i-heroicons-sparkles",onSelect:()=>t("generateTitle",U.id)},{label:"重命名",icon:"i-heroicons-pencil",onSelect:()=>p(U)}],[{label:"删除",icon:"i-heroicons-trash",color:"error",onSelect:()=>i(U.id)}]]},{default:G(({open:X})=>[S(x,{variant:"ghost",size:"xs",class:we(["absolute right-2 top-2 transition-opacity",X?"opacity-100":"opacity-100 md:opacity-0 md:group-hover:opacity-100"]),onClick:y[3]||(y[3]=Ke(()=>{},["stop"]))},{default:G(()=>[S(g,{name:"i-heroicons-ellipsis-vertical",class:"w-4 h-4"})]),_:1},8,["class"])]),_:1},8,["items"])):K("",!0)])],10,Wd))),128))]),S(M,{open:k(s),"onUpdate:open":y[4]||(y[4]=U=>$e(s)?s.value=U:null),title:"确认删除",description:"确定要删除这个对话吗？此操作不可撤销。",close:!1},{footer:G(()=>[v("div",Yd,[S(x,{color:"error",onClick:o},{default:G(()=>[...y[6]||(y[6]=[ue("删除",-1)])]),_:1}),S(x,{variant:"outline",color:"neutral",onClick:l},{default:G(()=>[...y[7]||(y[7]=[ue("取消",-1)])]),_:1})])]),_:1},8,["open"])])}}}),tp=Object.assign(ep,{__name:"ChatConversationList"}),np={class:"flex gap-4"},rp={class:"relative w-30 h-30 shrink-0 rounded-full overflow-hidden group"},sp=["src"],ip={key:1,class:"w-full h-full border-2 border-dashed border-(--ui-border-accented) hover:border-(--ui-primary) transition-colors flex flex-col items-center justify-center cursor-pointer rounded-full"},op={class:"flex-1 space-y-3"},ap={class:"flex items-center gap-2"},lp={class:"flex justify-between pt-2"},up={class:"flex gap-2"},cp={class:"flex justify-end gap-3"},dp=nt({__name:"AssistantEditor",props:{assistant:{},upstreams:{},open:{type:Boolean}},emits:["update:open","save","delete"],setup(n,{emit:e}){const t=n,r=e,s=z(!1),i=ui({name:"",description:"",avatar:"",systemPrompt:"",upstreamId:null,aimodelId:null,modelName:null});function o(y){const g=[];return y.name?.trim()||g.push({name:"name",message:"请输入助手名称"}),g}tt(()=>t.assistant,y=>{y?Object.assign(i,{name:y.name,description:y.description||"",avatar:y.avatar||"",systemPrompt:y.systemPrompt||"",upstreamId:y.upstreamId,aimodelId:y.aimodelId,modelName:y.modelName}):Object.assign(i,{name:"",description:"",avatar:"",systemPrompt:"",upstreamId:null,aimodelId:null,modelName:null})},{immediate:!0});function l(y){return["midjourney","gemini","flux","dalle","doubao","gpt4o-image","grok-image","qwen-image"].includes(y)}const a=re(()=>{const y=[];for(const g of t.upstreams)for(const x of g.aimodels||[])(x.category==="chat"||!x.category&&x.apiFormat==="openai-chat"&&!l(x.modelType))&&y.push({upstreamId:g.id,upstreamName:g.name,aimodelId:x.id,modelName:x.modelName});return y}),u=re(()=>{if(!i.upstreamId||!i.aimodelId)return"选择模型";const y=t.upstreams.find(g=>g.id===i.upstreamId);return y?`${y.name} / ${i.modelName||"未知模型"}`:"选择模型"}),d=re(()=>{const y=[],g=new Map;for(const x of a.value)g.has(x.upstreamId)||g.set(x.upstreamId,{name:x.upstreamName,models:[]}),g.get(x.upstreamId).models.push({aimodelId:x.aimodelId,modelName:x.modelName});for(const[x,{name:b,models:D}]of g){const M=[{label:b,type:"label"}];for(const{aimodelId:U,modelName:X}of D)M.push({label:X,onSelect:()=>p(x,U,X)});y.push(M)}return y});function p(y,g,x){i.upstreamId=y,i.aimodelId=g,i.modelName=x}async function f(y){const x=y.target.files?.[0];if(!x)return;if(x.size>2*1024*1024){Yr().add({title:"图片大小不能超过 2MB",color:"error"});return}const b=new FileReader;b.onload=()=>{i.avatar=b.result},b.readAsDataURL(x)}function _(y){r("save",{name:y.data.name.trim(),description:y.data.description?.trim()||null,avatar:y.data.avatar||null,systemPrompt:y.data.systemPrompt?.trim()||null,upstreamId:y.data.upstreamId,aimodelId:y.data.aimodelId,modelName:y.data.modelName})}function h(){r("update:open",!1)}function T(){t.assistant&&(r("delete",t.assistant.id),s.value=!1)}return(y,g)=>{const x=lt,b=bi,D=ki,M=wt,U=_n,X=xi,Te=wi,le=gn;return E(),P(fe,null,[S(le,{open:n.open,title:n.assistant?"编辑助手":"新建助手",ui:{content:"sm:max-w-4xl"},"onUpdate:open":g[5]||(g[5]=Y=>r("update:open",Y))},{body:G(()=>[S(Te,{state:k(i),validate:o,class:"space-y-5",onSubmit:_},{default:G(()=>[v("div",np,[v("div",rp,[k(i).avatar?(E(),P("img",{key:0,src:k(i).avatar,class:"w-full h-full object-cover"},null,8,sp)):(E(),P("label",ip,[S(x,{name:"i-heroicons-cloud-arrow-up",class:"w-6 h-6 text-(--ui-text-dimmed) mb-1"}),g[8]||(g[8]=v("span",{class:"text-(--ui-text-dimmed) text-xs"},"上传",-1)),v("input",{type:"file",accept:"image/*",class:"hidden",onChange:f},null,32)])),k(i).avatar?(E(),P("button",{key:2,type:"button",class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",onClick:g[0]||(g[0]=Y=>k(i).avatar="")},[S(x,{name:"i-heroicons-x-mark",class:"w-6 h-6 text-white"})])):K("",!0)]),v("div",op,[S(D,{label:"助手名称",name:"name",required:""},{default:G(()=>[S(b,{modelValue:k(i).name,"onUpdate:modelValue":g[1]||(g[1]=Y=>k(i).name=Y),placeholder:"如：代码助手",class:"w-56"},null,8,["modelValue"])]),_:1}),S(D,{label:"模型配置",name:"modelConfig"},ci({default:G(()=>[S(U,{items:k(d)},{default:G(()=>[S(M,{variant:"outline",class:"justify-between",disabled:k(a).length===0},{default:G(()=>[v("span",ap,[S(x,{name:"i-heroicons-cpu-chip",class:"w-4 h-4"}),ue(" "+Z(k(u)),1)]),S(x,{name:"i-heroicons-chevron-down",class:"w-4 h-4"})]),_:1},8,["disabled"])]),_:1},8,["items"])]),_:2},[k(a).length===0?{name:"help",fn:G(()=>[g[9]||(g[9]=ue(" 请先在设置中添加对话模型 ",-1))]),key:"0"}:void 0]),1024)])]),S(D,{label:"助手简介",name:"description"},{default:G(()=>[S(X,{modelValue:k(i).description,"onUpdate:modelValue":g[2]||(g[2]=Y=>k(i).description=Y),placeholder:"简短描述助手的功能",rows:4,class:"w-full"},null,8,["modelValue"])]),_:1}),S(D,{label:"系统提示词",name:"systemPrompt"},{default:G(()=>[S(X,{modelValue:k(i).systemPrompt,"onUpdate:modelValue":g[3]||(g[3]=Y=>k(i).systemPrompt=Y),rows:16,placeholder:"设置助手的行为和角色，如：你是一个专业的编程助手...",class:"w-full"},null,8,["modelValue"])]),_:1}),v("div",lp,[v("div",null,[n.assistant&&!n.assistant.isDefault?(E(),Ee(M,{key:0,color:"error",variant:"ghost",type:"button",onClick:g[4]||(g[4]=Y=>s.value=!0)},{default:G(()=>[...g[10]||(g[10]=[ue(" 删除助手 ",-1)])]),_:1})):K("",!0)]),v("div",up,[S(M,{variant:"ghost",type:"button",onClick:h},{default:G(()=>[...g[11]||(g[11]=[ue(" 取消 ",-1)])]),_:1}),S(M,{color:"primary",type:"submit"},{default:G(()=>[...g[12]||(g[12]=[ue(" 保存 ",-1)])]),_:1})])])]),_:1},8,["state"])]),_:1},8,["open","title"]),S(le,{open:k(s),"onUpdate:open":g[7]||(g[7]=Y=>$e(s)?s.value=Y:null),title:"确认删除",description:`确定要删除助手「${n.assistant?.name}」吗？该助手下的所有对话也将被删除，此操作不可撤销。`,close:!1},{footer:G(()=>[v("div",cp,[S(M,{color:"error",onClick:T},{default:G(()=>[...g[13]||(g[13]=[ue("删除",-1)])]),_:1}),S(M,{variant:"outline",color:"neutral",onClick:g[6]||(g[6]=Y=>s.value=!1)},{default:G(()=>[...g[14]||(g[14]=[ue("取消",-1)])]),_:1})])]),_:1},8,["open","description"])],64)}}}),pp=Object.assign(dp,{__name:"ChatAssistantEditor"});function mp(){const{upstreams:n}=ts(),{on:e}=Zr(),t=We("conversations",()=>[]),r=We("messages",()=>[]),s=We("conversations-loading",()=>!1),i=We("currentConversationId",()=>null),o=We("currentAssistantId",()=>null),l=We("conversation-input-states",()=>({})),a=We("conversation-streaming-states",()=>({})),u=We("chat-streaming-content",()=>""),d=re(()=>i.value?a.value[i.value]?.isStreaming??!1:!1),p=z({content:"",uploadingFiles:[],showCompressHint:!1});function f(w){return w?(l.value[w]||(l.value[w]={content:"",uploadingFiles:[],showCompressHint:!1}),l.value[w]):p.value}function _(w,C){if(!w){p.value.content=C;return}l.value[w]||(l.value[w]={content:"",uploadingFiles:[],showCompressHint:!1}),l.value[w].content=C}function h(w,C){if(!w){p.value.uploadingFiles=C;return}l.value[w]||(l.value[w]={content:"",uploadingFiles:[],showCompressHint:!1}),l.value[w].uploadingFiles=C}function T(w,C){if(!w){p.value.showCompressHint=C;return}l.value[w]||(l.value[w]={content:"",uploadingFiles:[],showCompressHint:!1}),l.value[w].showCompressHint=C}function y(w){if(w&&l.value[w]){for(const C of l.value[w].uploadingFiles)C.previewUrl&&URL.revokeObjectURL(C.previewUrl);l.value[w]={content:"",uploadingFiles:[],showCompressHint:!1}}}let g="",x="",b=null;const D=15;let M=-1,U=null;function X(){if(i.value===U)return r.value.find(w=>w.id===M)}function Te(){if(b)return;function w(){if(x.length<g.length){const C=Math.min(3,g.length-x.length);x=g.slice(0,x.length+C),u.value=x;const $=X();$?.role==="assistant"&&($.content=x),b=setTimeout(w,D)}else b=null}w()}function le(){b&&(clearTimeout(b),b=null),x=g,u.value=x;const w=X();w?.role==="assistant"&&w.mark!=="error"&&(w.content=x)}function Y(w,C,$){const j=$??"";a.value[C]={isStreaming:!0,messageId:w,content:j,contentBuffer:j,displayedContent:j},M=w,U=C,g=j,x=j,u.value=j}function V(w){le(),a.value[w]&&(a.value[w].isStreaming=!1),u.value="",g="",x="",M=-1,U=null}function B(w){const{conversationId:C,message:$}=w;if(i.value!==C)return;const j=r.value.findIndex(xe=>xe.id===$.id),ne={id:$.id,conversationId:$.conversationId,role:$.role,content:$.content,files:$.files,upstreamId:null,aimodelId:null,modelName:null,createdAt:$.createdAt||new Date().toISOString(),mark:$.mark,status:$.status};j>=0?r.value[j]=ne:r.value.push(ne),$.role==="assistant"&&($.status==="created"||$.status==="pending"||$.status==="streaming")&&Y($.id,C,$.content||"")}function Ae(w){const{conversationId:C,messageId:$,delta:j}=w;if(i.value!==C)return;const ne=r.value.find(xe=>xe.id===$);ne&&(M!==$&&Y($,C,ne.content||""),g+=j,Te(),ne.status!=="streaming"&&(ne.status="streaming"))}function te(w){const{conversationId:C,messageId:$,status:j,error:ne,estimatedTime:xe,upstreamId:ut,aimodelId:Ue}=w;if(i.value!==C)return;const Oe=r.value.find(je=>je.id===$);if(Oe&&(Oe.status=j,ne&&(Oe.content=ne,Oe.mark="error")),le(),xe!==void 0&&ut&&Ue){const je=n.value.find(st=>st.id===ut);if(je){const st=je.aimodels.find(Rt=>Rt.id===Ue);st&&(st.estimatedTime=xe)}}V(C)}function pe(w){const{conversation:C}=w;o.value!==null&&C.assistantId!==o.value||t.value.some(j=>j.id===C.id)||t.value.unshift({id:C.id,userId:C.userId,assistantId:C.assistantId,title:C.title,createdAt:C.createdAt,updatedAt:C.updatedAt})}function ye(w){const{conversationId:C}=w;t.value=t.value.filter($=>$.id!==C),i.value===C&&(i.value=null,r.value=[]),y(C),a.value[C]&&delete a.value[C]}function be(w){const{conversation:C}=w,$=t.value.findIndex(j=>j.id===C.id);if($>=0){const j=t.value[$];t.value[$]={id:j.id,userId:j.userId,assistantId:j.assistantId,title:C.title,createdAt:j.createdAt,updatedAt:C.updatedAt}}}function rt(w){const{conversationId:C,messageId:$}=w;i.value===C&&(r.value=r.value.filter(j=>j.id!==$))}function Qe(w){const{conversationId:C,message:$}=w;if(i.value!==C)return;const j=r.value.findIndex(ne=>ne.id===$.id);if(j>=0){const ne=r.value[j];r.value[j]={...ne,content:$.content}}}function A(w){const{conversationId:C,messageIds:$}=w;i.value===C&&(r.value=r.value.filter(j=>!$.includes(j.id)))}e("chat.message.created",B),e("chat.message.delta",Ae),e("chat.message.done",te),e("chat.conversation.created",pe),e("chat.conversation.deleted",ye),e("chat.conversation.updated",be),e("chat.message.deleted",rt),e("chat.message.updated",Qe),e("chat.messages.deleted",A);const F=re(()=>i.value?t.value.find(w=>w.id===i.value):null);async function Q(w){s.value=!0,o.value=w;try{const C=await $fetch("/api/conversations",{query:{assistantId:w}});t.value=C,i.value=null,r.value=[]}catch(C){console.error("加载对话列表失败:",C)}finally{s.value=!1}}async function ie(w){i.value=w;try{const C=await $fetch(`/api/conversations/${w}`);r.value=C.messages;const $=C.messages.find(j=>j.role==="assistant"&&(j.status==="created"||j.status==="pending"||j.status==="streaming"));$&&Y($.id,w,$.content||"")}catch(C){console.error("加载对话详情失败:",C),r.value=[]}}async function ce(w,C){const $=await $fetch("/api/conversations",{method:"POST",body:{assistantId:w,title:C}});return i.value=$.id,r.value=[],$}async function oe(w,C){return await $fetch(`/api/conversations/${w}`,{method:"PUT",body:{title:C}})}async function de(w){await $fetch(`/api/conversations/${w}`,{method:"DELETE"})}function J(){i.value=null,r.value=[]}async function Ve(w,C,$,j){try{await $fetch(`/api/conversations/${w}/messages`,{method:"POST",body:{content:C,files:$}});const ne=t.value.find(xe=>xe.id===w);ne&&(ne.updatedAt=new Date().toISOString())}catch(ne){const xe={id:Date.now()+1,conversationId:w,role:"assistant",content:ne.message||"发送失败",upstreamId:null,aimodelId:null,modelName:null,createdAt:new Date().toISOString(),mark:"error",status:"failed"};r.value.push(xe)}}async function gt(w){await $fetch(`/api/messages/${w}`,{method:"DELETE"})}async function Ne(w,C){await $fetch(`/api/messages/${w}`,{method:"PATCH",body:{content:C}})}async function Je(w){try{await $fetch(`/api/messages/${w.id}/replay`,{method:"POST"})}catch(C){const $={id:Date.now(),conversationId:w.conversationId,role:"assistant",content:C.message||"重放失败",upstreamId:null,aimodelId:null,modelName:null,createdAt:new Date().toISOString(),mark:"error",status:"failed"};r.value.push($)}}function Ze(){Be(),t.value=[],r.value=[],i.value=null;for(const w in l.value){const C=l.value[w];for(const $ of C.uploadingFiles)$.previewUrl&&URL.revokeObjectURL($.previewUrl)}l.value={},a.value={},u.value="",g="",x=""}async function Pe(w,C,$){const j=await $fetch(`/api/conversations/${w}/messages-manual`,{method:"POST",body:{content:C,role:$}}),ne=t.value.find(xe=>xe.id===w);return ne&&(ne.updatedAt=new Date().toISOString()),j}async function Be(w){const C=w??i.value;if(M>0)try{await $fetch(`/api/messages/${M}/stop`,{method:"POST"})}catch(j){console.error("停止生成失败:",j)}le();const $=X();$&&($.status="stopped"),C&&V(C)}async function Fe(w){return(await $fetch(`/api/messages/${w}/fork`,{method:"POST"})).conversation}async function Xe(w){return(await $fetch(`/api/messages/${w}/delete-until`,{method:"POST"})).deletedCount}async function _t(w,C,$){const j=await $fetch(`/api/conversations/${w}/compress`,{method:"POST"}),ne=await $fetch(`/api/conversations/${w}`);return r.value=ne.messages,$?.(),await $fetch(`/api/conversations/${w}/messages`,{method:"POST",body:{content:j.compressRequest.content,isCompressRequest:!0}}),j.stats}return{conversations:t,messages:r,isLoading:s,currentConversationId:i,currentConversation:F,isStreaming:d,streamingContent:u,loadConversations:Q,selectConversation:ie,createConversation:ce,startNewConversation:J,updateConversationTitle:oe,deleteConversation:de,sendMessage:Ve,deleteMessage:gt,editMessage:Ne,replayMessage:Je,cleanup:Ze,addManualMessage:Pe,stopStreaming:Be,forkConversation:Fe,deleteMessagesUntil:Xe,compressConversation:_t,getInputState:f,updateInputContent:_,updateUploadingFiles:h,updateCompressHint:T,clearInputState:y}}const hp={class:"h-[calc(100vh-3.5rem)] flex flex-col overflow-hidden"},fp={class:"h-12 flex items-center px-4 border-b border-(--ui-border) bg-(--ui-bg-elevated) flex-shrink-0 lg:hidden"},gp={class:"flex-1 text-center truncate font-medium text-sm"},_p={class:"flex-1 flex overflow-hidden min-h-0"},vp={class:"w-[300px] flex-shrink-0 overflow-y-auto border-r border-(--ui-border) hidden lg:block"},yp={class:"flex-1 flex flex-col min-w-0 min-h-0"},bp={key:0,class:"h-12 items-center px-4 border-b border-(--ui-border) bg-(--ui-bg-elevated) flex-shrink-0 hidden lg:flex"},kp={class:"font-medium truncate"},xp={class:"w-[310px] flex-shrink-0 flex-col overflow-hidden bg-(--ui-bg-elevated) border-l border-(--ui-border) hidden lg:flex"},wp={class:"flex flex-col h-full"},Kp=nt({__name:"chat",setup(n){const e=Yr(),t=di(),r=pi(),s=z(!1),i=z(!1),{assistants:o,currentAssistantId:l,currentAssistant:a,getDefaultAssistant:u,loadAssistants:d,selectAssistant:p,createAssistant:f,updateAssistant:_,deleteAssistant:h,incrementConversationCount:T,decrementConversationCount:y}=Ei(),{conversations:g,messages:x,currentConversationId:b,currentConversation:D,isStreaming:M,loadConversations:U,selectConversation:X,createConversation:Te,startNewConversation:le,deleteConversation:Y,updateConversationTitle:V,sendMessage:B,deleteMessage:Ae,editMessage:te,replayMessage:pe,cleanup:ye,addManualMessage:be,stopStreaming:rt,forkConversation:Qe,deleteMessagesUntil:A,compressConversation:F,getInputState:Q,updateInputContent:ie,updateUploadingFiles:ce,updateCompressHint:oe}=mp(),de=re(()=>Q(b.value)),{upstreams:J,loadUpstreams:Ve}=ts(),gt=re(()=>{if(!a.value?.upstreamId||!a.value?.aimodelId)return null;const N=J.value.find(q=>q.id===a.value?.upstreamId);return N?N.aimodels?.find(q=>q.id===a.value?.aimodelId)?.estimatedTime??null:null}),Ne=z(!1),Je=z(null),Ze=z(null);function Pe(N,O){const q={};N&&(q.a=String(N)),O&&(q.c=String(O)),t.replace({query:q})}const Be=z(!1);async function Fe(){await Promise.all([d(),Ve()]);const N=r.query.a?Number(r.query.a):null,O=r.query.c?Number(r.query.c):null;let q=N;(!q||!o.value.some(m=>m.id===q))&&(q=u()?.id||null),q&&(p(q),await U(q),O&&g.value.some(m=>m.id===O)&&await X(O)),Be.value=!0}Xr(()=>{Fe()}),tt(l,async(N,O)=>{Be.value&&N&&N!==O&&await U(N)});async function Xe(N){p(N),Pe(N,null),s.value=!1}function _t(){Je.value=null,Ne.value=!0}function w(){Je.value=a.value||null,Ne.value=!0}async function C(N){try{if(Je.value)await _(Je.value.id,N),e.add({title:"助手已更新",color:"success"});else{const O=await f(N);p(O.id),Pe(O.id,null),e.add({title:"助手已创建",color:"success"})}Ne.value=!1}catch(O){e.add({title:O.message||"操作失败",color:"error"})}}async function $(N){try{await h(N),Ne.value=!1,e.add({title:"助手已删除",color:"success"}),l.value&&Pe(l.value,null)}catch(O){e.add({title:O.message||"删除失败",color:"error"})}}function j(){l.value&&(le(),Pe(l.value,null))}async function ne(N){await X(N),Pe(l.value,N),i.value=!1}async function xe(N){const q=g.value.find(R=>R.id===N)?.assistantId,m=b.value===N;try{await Y(N),e.add({title:"对话已删除",color:"success"}),q&&y(q),m&&Pe(l.value,null)}catch(R){e.add({title:R.message||"删除失败",color:"error"})}}async function ut(N,O){try{await V(N,O),e.add({title:"对话已重命名",color:"success"})}catch(q){e.add({title:q.message||"重命名失败",color:"error"})}}async function Ue(N){try{e.add({title:"正在生成标题...",color:"info"});const O=await $fetch(`/api/conversations/${N}/generate-title`,{method:"POST"}),q=g.value.find(m=>m.id===N);q&&(q.title=O.title),e.add({title:"标题已更新",color:"success"})}catch(O){e.add({title:O.message||"生成标题失败",color:"error"})}}async function Oe(N){try{await Ae(N),e.add({title:"消息已删除",color:"success"})}catch(O){e.add({title:O.message||"删除失败",color:"error"})}}async function je(N){try{await pe(N)}catch(O){e.add({title:O.message||"重放失败",color:"error"})}}async function st(N,O){try{await te(N,O)}catch(q){e.add({title:q.message||"编辑失败",color:"error"})}}async function Rt(N){try{const O=await Qe(N);await X(O.id),Pe(l.value,O.id),e.add({title:"已创建分叉对话",color:"success"})}catch(O){e.add({title:O.message||"分叉失败",color:"error"})}}async function En(N){try{const O=await A(N);e.add({title:`已删除 ${O} 条消息`,color:"success"})}catch(O){e.add({title:O.message||"删除失败",color:"error"})}}async function Gt(N,O){let q=b.value;if(!q&&l.value)try{const m=N?.slice(0,20)||O?.[0]?.name?.slice(0,20)||"新对话";q=(await Te(l.value,m)).id,T(l.value),Pe(l.value,q)}catch(m){e.add({title:m.message||"创建对话失败",color:"error"});return}if(q)try{await B(q,N,O,a.value?.modelName)}catch(m){e.add({title:m.message||"发送失败",color:"error"})}}async function Sn(N,O){let q=b.value;if(!q&&l.value)try{q=(await Te(l.value,N.slice(0,20))).id,T(l.value),Pe(l.value,q)}catch(m){e.add({title:m.message||"创建对话失败",color:"error"});return}if(q)try{await be(q,N,O),e.add({title:`已添加${O==="user"?"用户":"AI"}消息`,color:"success"})}catch(m){e.add({title:m.message||"添加失败",color:"error"})}}function Ft(){rt(),e.add({title:"已停止生成",color:"info"})}async function Ye(){if(b.value)try{const N=await F(b.value,a.value?.modelName,()=>{Ot(()=>{Ze.value?.scrollToCompressRequest()})});N&&e.add({title:`已压缩 ${N.messagesToCompressCount} 条消息`,color:"success"})}catch(N){e.add({title:N.message||"压缩失败",color:"error"})}}async function Ce(N,O){if(!a.value)return;const R=J.value.find(H=>H.id===N)?.aimodels?.find(H=>H.id===O)?.modelName||null;try{await _(a.value.id,{upstreamId:N,aimodelId:O,modelName:R})}catch(H){e.add({title:H.message||"更新失败",color:"error"})}}function Rn(){Ze.value?.scrollToCompressRequest()}return tn(()=>{ye()}),(N,O)=>{const q=lt,m=wt,R=Ni,H=dd,it=Ld,vt=zd,ot=tp,qt=yi,Tt=pp;return E(),P("div",hp,[v("div",fp,[S(m,{variant:"ghost",size:"sm",onClick:O[0]||(O[0]=L=>s.value=!0)},{default:G(()=>[S(q,{name:"i-heroicons-bars-3",class:"w-5 h-5"}),O[8]||(O[8]=v("span",{class:"ml-1"},"助手",-1))]),_:1}),v("span",gp,Z(k(D)?.title||k(a)?.name||"选择助手"),1),S(m,{variant:"ghost",size:"sm",onClick:O[1]||(O[1]=L=>i.value=!0)},{default:G(()=>[O[9]||(O[9]=v("span",{class:"mr-1"},"对话",-1)),S(q,{name:"i-heroicons-chat-bubble-left-right",class:"w-5 h-5"})]),_:1})]),v("div",_p,[v("div",vp,[S(R,{assistants:k(o),"current-assistant-id":k(l),onSelect:Xe,onCreate:_t},null,8,["assistants","current-assistant-id"])]),v("div",yp,[k(D)?(E(),P("div",bp,[v("span",kp,Z(k(D).title),1)])):K("",!0),S(H,{ref_key:"messageListRef",ref:Ze,messages:k(x),"is-streaming":k(M),"assistant-id":k(l),"estimated-time":k(gt),class:"flex-1 min-h-0",onDelete:Oe,onEdit:st,onFork:Rt,onDeleteUntil:En,onReplay:je,onStop:Ft,onSendSuggestion:Gt},null,8,["messages","is-streaming","assistant-id","estimated-time"]),S(it,{upstreams:k(J),"current-upstream-id":k(a)?.upstreamId||null,"current-aimodel-id":k(a)?.aimodelId||null,disabled:!k(a),"is-streaming":k(M),messages:k(x),"system-prompt":k(a)?.systemPrompt,content:k(de).content,"uploading-files":k(de).uploadingFiles,"show-compress-hint":k(de).showCompressHint,onSend:Gt,onAddMessage:Sn,onStop:Ft,onCompress:Ye,onUpdateModel:Ce,onScrollToCompress:Rn,"onUpdate:content":O[2]||(O[2]=L=>k(ie)(k(b),L)),"onUpdate:uploadingFiles":O[3]||(O[3]=L=>k(ce)(k(b),L)),"onUpdate:showCompressHint":O[4]||(O[4]=L=>k(oe)(k(b),L))},null,8,["upstreams","current-upstream-id","current-aimodel-id","disabled","is-streaming","messages","system-prompt","content","uploading-files","show-compress-hint"])]),v("div",xp,[S(vt,{assistant:k(a),onEdit:w},null,8,["assistant"]),S(ot,{conversations:k(g),"current-conversation-id":k(b),class:"flex-1 min-h-0",onSelect:ne,onCreate:j,onDelete:xe,onRename:ut,onGenerateTitle:Ue},null,8,["conversations","current-conversation-id"])])]),S(qt,{open:k(s),"onUpdate:open":O[5]||(O[5]=L=>$e(s)?s.value=L:null),direction:"left",title:"助手列表",ui:{content:"w-4/5"}},{body:G(()=>[S(R,{assistants:k(o),"current-assistant-id":k(l),class:"h-full",onSelect:Xe,onCreate:_t},null,8,["assistants","current-assistant-id"])]),_:1},8,["open"]),S(qt,{open:k(i),"onUpdate:open":O[6]||(O[6]=L=>$e(i)?i.value=L:null),direction:"right",title:"对话",ui:{content:"w-4/5"}},{body:G(()=>[v("div",wp,[S(vt,{assistant:k(a),onEdit:w},null,8,["assistant"]),S(ot,{conversations:k(g),"current-conversation-id":k(b),class:"flex-1 min-h-0",onSelect:ne,onCreate:j,onDelete:xe,onRename:ut,onGenerateTitle:Ue},null,8,["conversations","current-conversation-id"])])]),_:1},8,["open"]),S(Tt,{open:k(Ne),"onUpdate:open":O[7]||(O[7]=L=>$e(Ne)?Ne.value=L:null),assistant:k(Je),upstreams:k(J),onSave:C,onDelete:$},null,8,["open","assistant","upstreams"])])}}});export{Kp as default};
