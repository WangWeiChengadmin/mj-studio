import{f as L,W as Ke,Y as re,Z as H,X as $e,m as N,i as h,o as d,w as r,N as S,j as t,P as Y,g as F,q as ne,b as o,x as qe,h as I,a1 as Pe,p as Be,aC as De,a0 as G,I as Ee,H as Re,v as Le,a3 as Oe,J as je,a9 as He,a6 as Ye,K as le,c as V,n as P,F as K,r as $,k as ue,ad as Je,aD as se,d as M,t as C,T as Ge,S as We,R as Qe,O as Xe,a as u,z as Ze,Q as et,y as ie}from"./DZ_1_TWT.js";import{_ as tt}from"./BOxYQfEP.js";import{_ as at}from"./BsBDnP6U.js";import{_ as lt,a as st}from"./DWVrQyU4.js";import{_ as it}from"./DRejpVBE.js";import{u as ot,R as rt}from"./D41R7u62.js";import{u as nt}from"./CHEUhdok.js";import{R as ut}from"./BKT0n4s3.js";import{_ as dt}from"./D7Wf_XuP.js";import{_ as ct}from"./BGhP86RK.js";import{_ as mt}from"./GNaDb_Wx.js";import{_ as pt}from"./Ptiozo9H.js";import{A as ee,o as j,V as vt,u as J,I as ft,v as gt,w as bt,n as yt,x as oe}from"./Cl2C_jUo.js";import{u as _t}from"./CJsX1qrP.js";import"./DDAgXY8S.js";import"./uQ15kqef.js";import"./DASMixbo.js";import"./9BQeByXX.js";import"./2BvrFYEm.js";import"./DTXzf-yb.js";const[W,xt]=Ke("TabsRoot");var ht=L({__name:"TabsRoot",props:{defaultValue:{type:null,required:!1},orientation:{type:String,required:!1,default:"horizontal"},dir:{type:String,required:!1},activationMode:{type:String,required:!1,default:"automatic"},modelValue:{type:null,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(g,{emit:b}){const v=g,l=b,{orientation:T,unmountOnHide:U,dir:x}=re(v),f=ot(x);H();const c=$e(v,"modelValue",l,{defaultValue:v.defaultValue,passive:v.modelValue===void 0}),k=N();return xt({modelValue:c,changeModelValue:_=>{c.value=_},orientation:T,dir:f,unmountOnHide:U,activationMode:v.activationMode,baseId:nt(void 0,"reka-tabs"),tabsList:k}),(_,Q)=>(d(),h(t(Y),{dir:t(f),"data-orientation":t(T),"as-child":_.asChild,as:_.as},{default:r(()=>[S(_.$slots,"default",{modelValue:t(c)})]),_:3},8,["dir","data-orientation","as-child","as"]))}}),kt=ht;function de(g,b){return`${g}-trigger-${b}`}function ce(g,b){return`${g}-content-${b}`}var Vt=L({__name:"TabsContent",props:{value:{type:[String,Number],required:!0},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(g){const b=g,{forwardRef:v}=H(),l=W(),T=F(()=>de(l.baseId,b.value)),U=F(()=>ce(l.baseId,b.value)),x=F(()=>b.value===l.modelValue.value),f=N(x.value);return ne(()=>{requestAnimationFrame(()=>{f.value=!1})}),(c,k)=>(d(),h(t(Pe),{present:c.forceMount||x.value,"force-mount":""},{default:r(({present:_})=>[o(t(Y),{id:U.value,ref:t(v),"as-child":c.asChild,as:c.as,role:"tabpanel","data-state":x.value?"active":"inactive","data-orientation":t(l).orientation.value,"aria-labelledby":T.value,hidden:!_,tabindex:"0",style:qe({animationDuration:f.value?"0s":void 0})},{default:r(()=>[!t(l).unmountOnHide.value||_?S(c.$slots,"default",{key:0}):I("v-if",!0)]),_:2},1032,["id","as-child","as","data-state","data-orientation","aria-labelledby","hidden","style"])]),_:3},8,["present"]))}}),Tt=Vt,wt=L({__name:"TabsIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(g){const b=g,v=W();H();const l=N(),T=N({size:null,position:null});Be(()=>[v.modelValue.value,v?.dir.value],async()=>{await Ee(),U()},{immediate:!0}),De([v.tabsList,l],U);function U(){l.value=v.tabsList.value?.querySelector('[role="tab"][data-state="active"]'),l.value&&(v.orientation.value==="horizontal"?T.value={size:l.value.offsetWidth,position:l.value.offsetLeft}:T.value={size:l.value.offsetHeight,position:l.value.offsetTop})}return(x,f)=>typeof T.value.size=="number"?(d(),h(t(Y),G({key:0},b,{style:{"--reka-tabs-indicator-size":`${T.value.size}px`,"--reka-tabs-indicator-position":`${T.value.position}px`}}),{default:r(()=>[S(x.$slots,"default")]),_:3},16,["style"])):I("v-if",!0)}}),Ut=wt,It=L({__name:"TabsList",props:{loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(g){const b=g,{loop:v}=re(b),{forwardRef:l,currentElement:T}=H(),U=W();return U.tabsList=T,(x,f)=>(d(),h(t(rt),{"as-child":"",orientation:t(U).orientation.value,dir:t(U).dir.value,loop:t(v)},{default:r(()=>[o(t(Y),{ref:t(l),role:"tablist","as-child":x.asChild,as:x.as,"aria-orientation":t(U).orientation.value},{default:r(()=>[S(x.$slots,"default")]),_:3},8,["as-child","as","aria-orientation"])]),_:3},8,["orientation","dir","loop"]))}}),At=It,zt=L({__name:"TabsTrigger",props:{value:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(g){const b=g,{forwardRef:v}=H(),l=W(),T=F(()=>de(l.baseId,b.value)),U=F(()=>ce(l.baseId,b.value)),x=F(()=>b.value===l.modelValue.value);return(f,c)=>(d(),h(t(ut),{"as-child":"",focusable:!f.disabled,active:x.value},{default:r(()=>[o(t(Y),{id:T.value,ref:t(v),role:"tab",type:f.as==="button"?"button":void 0,as:f.as,"as-child":f.asChild,"aria-selected":x.value?"true":"false","aria-controls":U.value,"data-state":x.value?"active":"inactive",disabled:f.disabled,"data-disabled":f.disabled?"":void 0,"data-orientation":t(l).orientation.value,onMousedown:c[0]||(c[0]=Le(k=>{!f.disabled&&k.ctrlKey===!1?t(l).changeModelValue(f.value):k.preventDefault()},["left"])),onKeydown:c[1]||(c[1]=Re(k=>t(l).changeModelValue(f.value),["enter","space"])),onFocus:c[2]||(c[2]=()=>{const k=t(l).activationMode!=="manual";!x.value&&!f.disabled&&k&&t(l).changeModelValue(f.value)})},{default:r(()=>[S(f.$slots,"default")]),_:3},8,["id","type","as","as-child","aria-selected","aria-controls","data-state","disabled","data-disabled","data-orientation"])]),_:3},8,["focusable","active"]))}}),Ct=zt;const Mt={slots:{root:"flex items-center gap-2",list:"relative flex p-1 group",indicator:"absolute transition-[translate,width] duration-200",trigger:["group relative inline-flex items-center min-w-0 data-[state=inactive]:text-muted hover:data-[state=inactive]:not-disabled:text-default font-medium rounded-md disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",label:"truncate",trailingBadge:"shrink-0",trailingBadgeSize:"sm",content:"focus:outline-none w-full"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{pill:{list:"bg-elevated rounded-lg",trigger:"grow",indicator:"rounded-md shadow-xs"},link:{list:"border-default",indicator:"rounded-full",trigger:"focus:outline-none"}},orientation:{horizontal:{root:"flex-col",list:"w-full",indicator:"left-0 w-(--reka-tabs-indicator-size) translate-x-(--reka-tabs-indicator-position)",trigger:"justify-center"},vertical:{list:"flex-col",indicator:"top-0 h-(--reka-tabs-indicator-size) translate-y-(--reka-tabs-indicator-position)"}},size:{xs:{trigger:"px-2 py-1 text-xs gap-1",leadingIcon:"size-4",leadingAvatarSize:"3xs"},sm:{trigger:"px-2.5 py-1.5 text-xs gap-1.5",leadingIcon:"size-4",leadingAvatarSize:"3xs"},md:{trigger:"px-3 py-1.5 text-sm gap-1.5",leadingIcon:"size-5",leadingAvatarSize:"2xs"},lg:{trigger:"px-3 py-2 text-sm gap-2",leadingIcon:"size-5",leadingAvatarSize:"2xs"},xl:{trigger:"px-3 py-2 text-base gap-2",leadingIcon:"size-6",leadingAvatarSize:"xs"}}},compoundVariants:[{orientation:"horizontal",variant:"pill",class:{indicator:"inset-y-1"}},{orientation:"horizontal",variant:"link",class:{list:"border-b -mb-px",indicator:"-bottom-px h-px"}},{orientation:"vertical",variant:"pill",class:{indicator:"inset-x-1",list:"items-center"}},{orientation:"vertical",variant:"link",class:{list:"border-s -ms-px",indicator:"-start-px w-px"}},{color:"primary",variant:"pill",class:{indicator:"bg-primary",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"}},{color:"secondary",variant:"pill",class:{indicator:"bg-secondary",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-secondary"}},{color:"success",variant:"pill",class:{indicator:"bg-success",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-success"}},{color:"info",variant:"pill",class:{indicator:"bg-info",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-info"}},{color:"warning",variant:"pill",class:{indicator:"bg-warning",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-warning"}},{color:"error",variant:"pill",class:{indicator:"bg-error",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-error"}},{color:"neutral",variant:"pill",class:{indicator:"bg-inverted",trigger:"data-[state=active]:text-inverted focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-inverted"}},{color:"primary",variant:"link",class:{indicator:"bg-primary",trigger:"data-[state=active]:text-primary focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"}},{color:"secondary",variant:"link",class:{indicator:"bg-secondary",trigger:"data-[state=active]:text-secondary focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"}},{color:"success",variant:"link",class:{indicator:"bg-success",trigger:"data-[state=active]:text-success focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"}},{color:"info",variant:"link",class:{indicator:"bg-info",trigger:"data-[state=active]:text-info focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"}},{color:"warning",variant:"link",class:{indicator:"bg-warning",trigger:"data-[state=active]:text-warning focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"}},{color:"error",variant:"link",class:{indicator:"bg-error",trigger:"data-[state=active]:text-error focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"}},{color:"neutral",variant:"link",class:{indicator:"bg-inverted",trigger:"data-[state=active]:text-highlighted focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"}}],defaultVariants:{color:"primary",variant:"pill",size:"md"}},Nt={__name:"UTabs",props:{as:{type:null,required:!1},items:{type:Array,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},orientation:{type:null,required:!1,default:"horizontal"},content:{type:Boolean,required:!1,default:!0},labelKey:{type:null,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:null,required:!1,default:"0"},modelValue:{type:null,required:!1},activationMode:{type:String,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue"],setup(g,{expose:b,emit:v}){const l=g,T=v,U=Oe(),x=je(),f=He(Ye(l,"as","unmountOnHide"),T),c=F(()=>le({extend:le(Mt),...x.ui?.tabs||{}})({color:l.color,variant:l.variant,size:l.size,orientation:l.orientation})),k=N([]);return b({triggersRef:k}),(_,Q)=>(d(),h(t(kt),G(t(f),{"model-value":g.modelValue,"default-value":g.defaultValue,orientation:g.orientation,"activation-mode":g.activationMode,"data-slot":"root",class:c.value.root({class:[l.ui?.root,l.class]})}),{default:r(()=>[o(t(At),{"data-slot":"list",class:P(c.value.list({class:l.ui?.list}))},{default:r(()=>[o(t(Ut),{"data-slot":"indicator",class:P(c.value.indicator({class:l.ui?.indicator}))},null,8,["class"]),S(_.$slots,"list-leading"),(d(!0),V(K,null,$(g.items,(s,p)=>(d(),h(t(Ct),{key:p,ref_for:!0,ref:q=>k.value[p]=q,value:s.value??String(p),disabled:s.disabled,"data-slot":"trigger",class:P(c.value.trigger({class:[l.ui?.trigger,s.ui?.trigger]}))},{default:r(()=>[S(_.$slots,"leading",{item:s,index:p,ui:c.value},()=>[s.icon?(d(),h(ue,{key:0,name:s.icon,"data-slot":"leadingIcon",class:P(c.value.leadingIcon({class:[l.ui?.leadingIcon,s.ui?.leadingIcon]}))},null,8,["name","class"])):s.avatar?(d(),h(Je,G({key:1,size:s.ui?.leadingAvatarSize||l.ui?.leadingAvatarSize||c.value.leadingAvatarSize()},{ref_for:!0},s.avatar,{"data-slot":"leadingAvatar",class:c.value.leadingAvatar({class:[l.ui?.leadingAvatar,s.ui?.leadingAvatar]})}),null,16,["size","class"])):I("",!0)]),t(se)(s,l.labelKey)||U.default?(d(),V("span",{key:0,"data-slot":"label",class:P(c.value.label({class:[l.ui?.label,s.ui?.label]}))},[S(_.$slots,"default",{item:s,index:p},()=>[M(C(t(se)(s,l.labelKey)),1)])],2)):I("",!0),S(_.$slots,"trailing",{item:s,index:p,ui:c.value},()=>[s.badge||s.badge===0?(d(),h(dt,G({key:0,color:"neutral",variant:"outline",size:s.ui?.trailingBadgeSize||l.ui?.trailingBadgeSize||c.value.trailingBadgeSize()},{ref_for:!0},typeof s.badge=="string"||typeof s.badge=="number"?{label:s.badge}:s.badge,{"data-slot":"trailingBadge",class:c.value.trailingBadge({class:[l.ui?.trailingBadge,s.ui?.trailingBadge]})}),null,16,["size","class"])):I("",!0)])]),_:2},1032,["value","disabled","class"]))),128)),S(_.$slots,"list-trailing")]),_:3},8,["class"]),g.content?(d(!0),V(K,{key:0},$(g.items,(s,p)=>(d(),h(t(Tt),{key:p,value:s.value??String(p),"data-slot":"content",class:P(c.value.content({class:[l.ui?.content,s.ui?.content,s.class]}))},{default:r(()=>[S(_.$slots,s.slot||"content",{item:s,index:p,ui:c.value},()=>[M(C(s.content),1)])]),_:2},1032,["value","class"]))),128)):I("",!0)]),_:3},16,["model-value","default-value","orientation","activation-mode","class"]))}},St={class:"mb-6 flex items-center justify-between"},Ft={class:"text-2xl font-bold text-(--ui-text)"},Kt={class:"flex gap-2"},$t={key:0,class:"mb-4 p-3 rounded-lg bg-(--ui-warning)/10 border border-(--ui-warning)/20"},qt={class:"flex items-start gap-2"},Pt={class:"max-w-2xl bg-(--ui-bg-elevated) rounded-lg p-6 border border-(--ui-border) space-y-4"},Bt={class:"space-y-3"},Dt={class:"flex items-center justify-between"},Et={class:"flex items-center gap-3"},Rt={class:"bg-(--ui-bg-elevated) rounded-lg p-6 border border-(--ui-border)"},Lt={class:"pt-4"},Ot={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3"},jt={class:"flex items-center justify-between mb-2"},Ht={class:"flex items-center gap-2"},Yt={class:"text-sm font-medium text-(--ui-text) truncate"},Jt={key:0,class:"text-xs text-(--ui-text-dimmed) font-mono bg-(--ui-bg-accented) px-1.5 py-0.5 rounded"},Gt={class:"space-y-2"},Wt={class:"flex flex-wrap gap-1.5"},Qt={class:"pt-4"},Xt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3"},Zt={class:"flex items-center justify-between mb-2"},ea={class:"flex items-center gap-2"},ta={class:"text-sm font-medium text-(--ui-text) truncate"},aa={key:0,class:"text-xs text-(--ui-text-dimmed) font-mono bg-(--ui-bg-accented) px-1.5 py-0.5 rounded"},la={class:"space-y-2"},sa={class:"flex flex-wrap gap-1.5"},ia={class:"pt-4"},oa={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3"},ra={class:"flex items-center justify-between mb-2"},na={class:"flex items-center gap-2"},ua={key:0,class:"text-xs text-(--ui-text-dimmed) font-mono bg-(--ui-bg-accented) px-1.5 py-0.5 rounded"},da={class:"space-y-2"},ca={class:"flex flex-wrap gap-1.5"},ma={key:0,class:"mt-8 pt-6 border-t border-(--ui-border)"},pa={class:"flex justify-end gap-3"},Fa=L({__name:"[id]",setup(g){const b=Ge(),v=We(),l=Qe(),{upstreams:T,loadUpstreams:U,createUpstream:x,updateUpstream:f,deleteUpstream:c}=_t(),k=F(()=>b.params.id==="new"),_=F(()=>k.value?null:Number(b.params.id)),Q=F(()=>k.value?"Ê∑ªÂä†‰∏äÊ∏∏ÈÖçÁΩÆ":"ÁºñËæë‰∏äÊ∏∏ÈÖçÁΩÆ"),s=Xe({name:"",baseUrl:"",apiKey:"",remark:"",upstreamPlatform:void 0,userApiKey:""}),p=N([{name:"default",key:""}]),q=N([]),B=N([]),D=N([]),X=N("image"),me=[{label:"ÁªòÂõæÊ®°Âûã",value:"image",icon:"i-heroicons-paint-brush",slot:"image"},{label:"ËßÜÈ¢ëÊ®°Âûã",value:"video",icon:"i-heroicons-video-camera",slot:"video"},{label:"ÂØπËØùÊ®°Âûã",value:"chat",icon:"i-heroicons-chat-bubble-left-right",slot:"chat"}];function pe(n){const e=[];return n.name?.trim()||e.push({name:"name",message:"ËØ∑ËæìÂÖ•ÈÖçÁΩÆÂêçÁß∞"}),n.baseUrl?.trim()||e.push({name:"baseUrl",message:"ËØ∑ËæìÂÖ•APIÂú∞ÂùÄ"}),p.value.some(A=>A.key?.trim())||e.push({name:"apiKey",message:"ËØ∑Ëá≥Â∞ëÊ∑ªÂä†‰∏Ä‰∏™APIÂØÜÈí•"}),n.upstreamPlatform&&!n.userApiKey?.trim()&&e.push({name:"upstreamPlatform",message:"ËØ∑ËæìÂÖ•Áî®‰∫éÊü•ËØ¢‰ΩôÈ¢ùÁöÑ API Key"}),e}async function ve(){if(await U(),!k.value&&_.value){const n=T.value.find(e=>e.id===_.value);n?(Object.assign(s,{name:n.name,baseUrl:n.baseUrl,apiKey:n.apiKey,remark:n.remark||"",upstreamPlatform:n.upstreamPlatform||void 0,userApiKey:n.userApiKey||""}),n.apiKeys&&n.apiKeys.length>0?p.value=n.apiKeys:p.value=[{name:"default",key:n.apiKey}],n.aimodels&&(q.value=n.aimodels.filter(e=>!e.category||e.category==="image").map(e=>({id:e.id,category:"image",modelType:e.modelType,apiFormat:e.apiFormat,modelName:e.modelName,estimatedTime:e.estimatedTime,keyName:e.keyName})),D.value=n.aimodels.filter(e=>e.category==="video").map(e=>({id:e.id,category:"video",modelType:e.modelType,apiFormat:e.apiFormat,modelName:e.modelName,estimatedTime:e.estimatedTime,keyName:e.keyName})),B.value=n.aimodels.filter(e=>e.category==="chat").map(e=>({id:e.id,category:"chat",modelType:e.modelType,apiFormat:e.apiFormat,modelName:e.modelName,estimatedTime:e.estimatedTime,keyName:e.keyName})))):(l.add({title:"ÈÖçÁΩÆ‰∏çÂ≠òÂú®",color:"error"}),v.push("/settings/upstreams"))}else p.value=[{name:"default",key:""}]}ne(()=>{ve()});function E(n){return gt[n]||[]}function fe(){q.value.push({category:"image",modelType:"",apiFormat:"",modelName:"",estimatedTime:60})}function ge(){B.value.push({category:"chat",modelType:"gpt",apiFormat:"openai-chat",modelName:"",estimatedTime:5})}function be(){D.value.push({category:"video",modelType:"",apiFormat:"",modelName:"",estimatedTime:120})}function ye(n){q.value.splice(n,1)}function _e(n){B.value.splice(n,1)}function xe(n){D.value.splice(n,1)}function he(n){const e=q.value[n];if(!e)return;const m=E(e.modelType);m.includes(e.apiFormat)||(e.apiFormat=m[0]||"mj-proxy"),e.modelName=J[e.modelType]||"",e.estimatedTime=bt[e.modelType]||60}function ke(n){const e=D.value[n];if(!e)return;const m=E(e.modelType);m.includes(e.apiFormat)||(e.apiFormat=m[0]||"video-unified"),e.modelName=J[e.modelType]||"",e.estimatedTime=yt[e.modelType]||120}function te(n){const e=oe(n);return e?{type:e,label:j[e]}:{type:null,label:"Ëá™ÂÆö‰πâ"}}function Ve(n){const e=B.value[n];if(!e)return;const m=oe(e.modelName);if(m){e.modelType=m;const A=E(m);A.includes(e.apiFormat)||(e.apiFormat=A[0]||"openai-chat")}}function Te(){const n=`key-${p.value.length}`;p.value.push({name:n,key:""})}function we(n){if(p.value.length<=1){l.add({title:"Ëá≥Â∞ë‰øùÁïô‰∏Ä‰∏™ Key",color:"warning"});return}p.value.splice(n,1)}const Ue=[{label:"‰∏çÊü•ËØ¢",value:void 0},{label:"OneAPI/NewAPI",value:"oneapi"}],Z=F(()=>p.value.map(n=>({label:n.name,value:n.name})));async function Ie(n){const e=p.value.filter(y=>y.key?.trim());if(e.length===0){l.add({title:"ËØ∑Ëá≥Â∞ëÊ∑ªÂä†‰∏Ä‰∏™ÊúâÊïàÁöÑ API ÂØÜÈí•",color:"error"});return}const m=[...q.value.map(y=>({...y,category:"image"})),...D.value.map(y=>({...y,category:"video"})),...B.value.map(y=>({...y,category:"chat"}))];if(m.length===0){l.add({title:"ËØ∑Ëá≥Â∞ëÊ∑ªÂä†‰∏ÄÁßçÊ®°Âûã",color:"error"});return}const A=e[0].key;try{k.value?(await x({name:s.name,baseUrl:s.baseUrl,apiKey:A,apiKeys:e,aimodels:m,remark:s.remark,upstreamPlatform:s.upstreamPlatform,userApiKey:s.userApiKey||void 0}),l.add({title:"ÈÖçÁΩÆÂ∑≤ÂàõÂª∫",color:"success"})):(await f(_.value,{name:s.name,baseUrl:s.baseUrl,apiKey:A,apiKeys:e,aimodels:m,remark:s.remark||null,upstreamPlatform:s.upstreamPlatform||null,userApiKey:s.userApiKey||null}),l.add({title:"ÈÖçÁΩÆÂ∑≤Êõ¥Êñ∞",color:"success"})),v.back()}catch(y){l.add({title:"Êìç‰ΩúÂ§±Ë¥•",description:y.data?.message||y.message,color:"error"})}}const R=N(!1);async function Ae(){if(_.value){try{await c(_.value),l.add({title:"ÈÖçÁΩÆÂ∑≤Âà†Èô§",color:"success"}),v.push("/settings/upstreams")}catch(n){l.add({title:"Âà†Èô§Â§±Ë¥•",description:n.data?.message||n.message,color:"error"})}R.value=!1}}return(n,e)=>{const m=Ze,A=ue,y=tt,w=at,ze=lt,Ce=it,O=st,Me=Nt,Ne=ct,Se=mt,Fe=pt;return d(),h(Fe,null,{default:r(()=>[u("div",St,[u("div",null,[u("h1",Ft,C(t(Q)),1),e[10]||(e[10]=u("p",{class:"text-(--ui-text-muted) text-sm mt-1"},"ÈÖçÁΩÆ AI ÊúçÂä°ÁöÑËøûÊé•‰ø°ÊÅØÂíåÊîØÊåÅÁöÑÊ®°Âûã",-1))]),u("div",Kt,[o(m,{variant:"outline",color:"neutral",onClick:e[0]||(e[0]=a=>t(v).back())},{default:r(()=>[...e[11]||(e[11]=[M("ÂèñÊ∂à",-1)])]),_:1}),o(m,{type:"submit",form:"upstream-form"},{default:r(()=>[M(C(t(k)?"ÂàõÂª∫":"‰øùÂ≠ò"),1)]),_:1})])]),t(k)?I("",!0):(d(),V("div",$t,[u("div",qt,[o(A,{name:"i-heroicons-information-circle",class:"w-5 h-5 text-(--ui-warning) shrink-0 mt-0.5"}),e[12]||(e[12]=u("p",{class:"text-sm text-(--ui-text-muted)"}," Ê®°Âûã ID Áî®‰∫éÂÖ≥ËÅîÂà∞‰ªªÂä°ÂíåÊ∂àÊÅØËÆ∞ÂΩï„ÄÇÂà†Èô§Ê®°ÂûãÈááÁî®ËΩØÂà†Èô§Ôºå‰∏ç‰ºöÂØºËá¥ÂéÜÂè≤ÂÖ≥ËÅîÂ§±Êïà„ÄÇ ",-1))])])),o(Ne,{id:"upstream-form",state:t(s),validate:pe,class:"space-y-6",autocomplete:"off",onSubmit:Ie},{default:r(()=>[e[23]||(e[23]=u("input",{type:"text",style:{display:"none"}},null,-1)),e[24]||(e[24]=u("input",{type:"password",style:{display:"none"}},null,-1)),u("div",Pt,[e[16]||(e[16]=u("h2",{class:"text-lg font-medium text-(--ui-text) mb-4"},"Âü∫Êú¨‰ø°ÊÅØ",-1)),o(w,{label:"ÈÖçÁΩÆÂêçÁß∞",name:"name",required:""},{default:r(()=>[o(y,{modelValue:t(s).name,"onUpdate:modelValue":e[1]||(e[1]=a=>t(s).name=a),placeholder:"‰æãÂ¶ÇÔºöÊàëÁöÑMJË¥¶Âè∑",class:"w-60"},null,8,["modelValue"])]),_:1}),o(w,{label:"APIÂú∞ÂùÄ",name:"baseUrl",required:"",hint:"Êó†ÈúÄÊ∑ªÂä† /v1 ÂêéÁºÄÔºåMJ ÁªòÂõæ‰ΩøÁî® /mjÔºåËßÜÈ¢ëÊé•Âè£‰ΩøÁî® /v1/video Á≠âË∑ØÂæÑ"},{default:r(()=>[o(y,{modelValue:t(s).baseUrl,"onUpdate:modelValue":e[2]||(e[2]=a=>t(s).baseUrl=a),type:"url",placeholder:"https://api.example.com",class:"w-120"},null,8,["modelValue"])]),_:1}),u("div",Bt,[u("div",Dt,[e[14]||(e[14]=u("label",{class:"text-sm font-medium text-(--ui-text)"},[M("API ÂØÜÈí• "),u("span",{class:"text-red-500"},"*")],-1)),o(m,{size:"xs",variant:"ghost",icon:"i-heroicons-plus",onClick:Te},{default:r(()=>[...e[13]||(e[13]=[M("Ê∑ªÂä† Key",-1)])]),_:1})]),(d(!0),V(K,null,$(t(p),(a,z)=>(d(),V("div",{key:z,class:"flex items-center gap-2 p-3 rounded-lg bg-(--ui-bg-muted) border border-(--ui-border)"},[o(y,{modelValue:a.name,"onUpdate:modelValue":i=>a.name=i,placeholder:"Key ÂêçÁß∞",class:"w-32",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),o(y,{modelValue:a.key,"onUpdate:modelValue":i=>a.key=i,placeholder:"sk-xxx...",class:"flex-1",size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),t(p).length>1?(d(),h(m,{key:0,size:"xs",variant:"ghost",color:"error",icon:"i-heroicons-trash",onClick:i=>we(z)},null,8,["onClick"])):I("",!0)]))),128))]),o(w,{label:"‰ΩôÈ¢ùÊü•ËØ¢",name:"upstreamPlatform"},et({default:r(()=>[u("div",Et,[o(ze,{modelValue:t(s).upstreamPlatform,"onUpdate:modelValue":e[3]||(e[3]=a=>t(s).upstreamPlatform=a),items:Ue,class:"w-40",placeholder:"ÈÄâÊã©Á±ªÂûã"},null,8,["modelValue"]),t(s).upstreamPlatform?(d(),h(y,{key:0,modelValue:t(s).userApiKey,"onUpdate:modelValue":e[4]||(e[4]=a=>t(s).userApiKey=a),placeholder:"Ê†ºÂºèÔºöÁî®Êà∑ID:‰ª§Áâå",class:"w-80",required:""},null,8,["modelValue"])):I("",!0)])]),_:2},[t(s).upstreamPlatform?{name:"hint",fn:r(()=>[e[15]||(e[15]=u("span",{class:"text-xs text-(--ui-text-muted)"},"Ê†ºÂºèÔºöÁî®Êà∑ID:Á≥ªÁªüËÆøÈóÆ‰ª§ÁâåÔºàÂú®Âπ≥Âè∞‰∏™‰∫∫‰∏≠ÂøÉËé∑ÂèñÔºâ",-1))]),key:"0"}:void 0]),1024),o(w,{label:"Â§áÊ≥®",name:"remark"},{default:r(()=>[o(Ce,{modelValue:t(s).remark,"onUpdate:modelValue":e[5]||(e[5]=a=>t(s).remark=a),placeholder:"Ê∑ªÂä†‰∏Ä‰∫õËØ¥Êòé...",rows:2,class:"w-full"},null,8,["modelValue"])]),_:1})]),u("div",Rt,[e[21]||(e[21]=u("h2",{class:"text-lg font-medium text-(--ui-text) mb-4"},"Ê®°ÂûãÈÖçÁΩÆ",-1)),o(Me,{modelValue:t(X),"onUpdate:modelValue":e[6]||(e[6]=a=>ie(X)?X.value=a:null),items:me,variant:"pill",color:"neutral",ui:{root:"items-start",list:"w-auto"}},{image:r(()=>[u("div",Lt,[u("div",Ot,[(d(!0),V(K,null,$(t(q),(a,z)=>(d(),V("div",{key:a.id||z,class:"p-3 rounded-lg bg-(--ui-bg-muted) border border-(--ui-border)"},[u("div",jt,[u("div",Ht,[u("span",Yt," üé® "+C(t(j)[a.modelType]||"Êú™ÈÄâÊã©"),1),a.id?(d(),V("span",Jt," ID:"+C(a.id),1)):I("",!0)]),o(m,{size:"xs",variant:"ghost",color:"error",type:"button",onClick:i=>ye(z)},{default:r(()=>[o(A,{name:"i-heroicons-trash",class:"w-4 h-4"})]),_:1},8,["onClick"])]),u("div",Gt,[o(w,{label:"Ê®°ÂûãÁ±ªÂûã"},{default:r(()=>[o(O,{modelValue:a.modelType,"onUpdate:modelValue":[i=>a.modelType=i,i=>he(z)],items:t(ft).map(i=>({label:t(j)[i],value:i})),"value-key":"value",class:"w-40"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),o(w,{label:"ËØ∑Ê±ÇÊ†ºÂºè"},{default:r(()=>[u("div",Wt,[(d(!0),V(K,null,$(E(a.modelType),i=>(d(),h(m,{key:i,size:"xs",variant:a.apiFormat===i?"solid":"outline",color:a.apiFormat===i?"primary":"neutral",type:"button",onClick:ae=>a.apiFormat=i},{default:r(()=>[M(C(t(ee)[i]),1)]),_:2},1032,["variant","color","onClick"]))),128))])]),_:2},1024),o(w,{label:"Ê®°ÂûãÂêçÁß∞"},{default:r(()=>[o(y,{modelValue:a.modelName,"onUpdate:modelValue":i=>a.modelName=i,placeholder:t(J)[a.modelType]||"ÂèØÈÄâ",class:"w-60"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),o(w,{label:"È¢ÑËÆ°Êó∂Èó¥(Áßí)"},{default:r(()=>[o(y,{modelValue:a.estimatedTime,"onUpdate:modelValue":i=>a.estimatedTime=i,modelModifiers:{number:!0},type:"number",min:"1",class:"w-24"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(p).length>1?(d(),h(w,{key:0,label:"‰ΩøÁî® Key"},{default:r(()=>[o(O,{modelValue:a.keyName,"onUpdate:modelValue":i=>a.keyName=i,items:t(Z),"value-key":"value",placeholder:"default",class:"w-32"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):I("",!0)])]))),128)),u("button",{type:"button",class:"p-3 rounded-lg border-2 border-dashed border-(--ui-border) hover:border-(--ui-primary) hover:bg-(--ui-primary)/5 transition-colors flex flex-col items-center justify-center min-h-32 cursor-pointer",onClick:fe},[o(A,{name:"i-heroicons-plus",class:"w-8 h-8 text-(--ui-text-muted) mb-2"}),e[17]||(e[17]=u("span",{class:"text-sm text-(--ui-text-muted)"},"Ê∑ªÂä†ÁªòÂõæÊ®°Âûã",-1))])])])]),video:r(()=>[u("div",Qt,[u("div",Xt,[(d(!0),V(K,null,$(t(D),(a,z)=>(d(),V("div",{key:a.id||z,class:"p-3 rounded-lg bg-(--ui-bg-muted) border border-(--ui-border)"},[u("div",Zt,[u("div",ea,[u("span",ta," üé¨ "+C(t(j)[a.modelType]||"Êú™ÈÄâÊã©"),1),a.id?(d(),V("span",aa," ID:"+C(a.id),1)):I("",!0)]),o(m,{size:"xs",variant:"ghost",color:"error",type:"button",onClick:i=>xe(z)},{default:r(()=>[o(A,{name:"i-heroicons-trash",class:"w-4 h-4"})]),_:1},8,["onClick"])]),u("div",la,[o(w,{label:"Ê®°ÂûãÁ±ªÂûã"},{default:r(()=>[o(O,{modelValue:a.modelType,"onUpdate:modelValue":[i=>a.modelType=i,i=>ke(z)],items:t(vt).map(i=>({label:t(j)[i],value:i})),"value-key":"value",class:"w-40"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),o(w,{label:"ËØ∑Ê±ÇÊ†ºÂºè"},{default:r(()=>[u("div",sa,[(d(!0),V(K,null,$(E(a.modelType),i=>(d(),h(m,{key:i,size:"xs",variant:a.apiFormat===i?"solid":"outline",color:a.apiFormat===i?"primary":"neutral",type:"button",onClick:ae=>a.apiFormat=i},{default:r(()=>[M(C(t(ee)[i]),1)]),_:2},1032,["variant","color","onClick"]))),128))])]),_:2},1024),o(w,{label:"Ê®°ÂûãÂêçÁß∞"},{default:r(()=>[o(y,{modelValue:a.modelName,"onUpdate:modelValue":i=>a.modelName=i,placeholder:t(J)[a.modelType]||"ÂèØÈÄâ",class:"w-60"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),o(w,{label:"È¢ÑËÆ°Êó∂Èó¥(Áßí)"},{default:r(()=>[o(y,{modelValue:a.estimatedTime,"onUpdate:modelValue":i=>a.estimatedTime=i,modelModifiers:{number:!0},type:"number",min:"1",class:"w-24"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(p).length>1?(d(),h(w,{key:0,label:"‰ΩøÁî® Key"},{default:r(()=>[o(O,{modelValue:a.keyName,"onUpdate:modelValue":i=>a.keyName=i,items:t(Z),"value-key":"value",placeholder:"default",class:"w-32"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):I("",!0)])]))),128)),u("button",{type:"button",class:"p-3 rounded-lg border-2 border-dashed border-(--ui-border) hover:border-(--ui-primary) hover:bg-(--ui-primary)/5 transition-colors flex flex-col items-center justify-center min-h-32 cursor-pointer",onClick:be},[o(A,{name:"i-heroicons-plus",class:"w-8 h-8 text-(--ui-text-muted) mb-2"}),e[18]||(e[18]=u("span",{class:"text-sm text-(--ui-text-muted)"},"Ê∑ªÂä†ËßÜÈ¢ëÊ®°Âûã",-1))])])])]),chat:r(()=>[u("div",ia,[u("div",oa,[(d(!0),V(K,null,$(t(B),(a,z)=>(d(),V("div",{key:a.id||z,class:"p-3 rounded-lg bg-(--ui-bg-muted) border border-(--ui-border)"},[u("div",ra,[u("div",na,[e[19]||(e[19]=u("span",{class:"text-sm font-medium text-(--ui-text)"},"üí¨",-1)),u("span",{class:P(["text-xs px-2 py-0.5 rounded-full",te(a.modelName).type?"bg-(--ui-primary)/10 text-(--ui-primary)":"bg-(--ui-bg-accented) text-(--ui-text-muted)"])},C(te(a.modelName).label),3),a.id?(d(),V("span",ua," ID:"+C(a.id),1)):I("",!0)]),o(m,{size:"xs",variant:"ghost",color:"error",type:"button",onClick:i=>_e(z)},{default:r(()=>[o(A,{name:"i-heroicons-trash",class:"w-4 h-4"})]),_:1},8,["onClick"])]),u("div",da,[o(w,{label:"ËØ∑Ê±ÇÊ†ºÂºè"},{default:r(()=>[u("div",ca,[(d(!0),V(K,null,$(E(a.modelType),i=>(d(),h(m,{key:i,size:"xs",variant:a.apiFormat===i?"solid":"outline",color:a.apiFormat===i?"primary":"neutral",type:"button",onClick:ae=>a.apiFormat=i},{default:r(()=>[M(C(t(ee)[i]),1)]),_:2},1032,["variant","color","onClick"]))),128))])]),_:2},1024),o(w,{label:"Ê®°ÂûãÂêçÁß∞"},{default:r(()=>[o(y,{modelValue:a.modelName,"onUpdate:modelValue":i=>a.modelName=i,placeholder:"ËæìÂÖ•Ê®°ÂûãÂêçÁß∞ÔºåÂ¶Ç gpt-4o„ÄÅclaude-3-opus...",class:"w-60",onInput:i=>Ve(z)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024),o(w,{label:"È¢ÑËÆ°Êó∂Èó¥(Áßí)"},{default:r(()=>[o(y,{modelValue:a.estimatedTime,"onUpdate:modelValue":i=>a.estimatedTime=i,modelModifiers:{number:!0},type:"number",min:"1",class:"w-24"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(p).length>1?(d(),h(w,{key:0,label:"‰ΩøÁî® Key"},{default:r(()=>[o(O,{modelValue:a.keyName,"onUpdate:modelValue":i=>a.keyName=i,items:t(Z),"value-key":"value",placeholder:"default",class:"w-32"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):I("",!0)])]))),128)),u("button",{type:"button",class:"p-3 rounded-lg border-2 border-dashed border-(--ui-border) hover:border-(--ui-primary) hover:bg-(--ui-primary)/5 transition-colors flex flex-col items-center justify-center min-h-32 cursor-pointer",onClick:ge},[o(A,{name:"i-heroicons-plus",class:"w-8 h-8 text-(--ui-text-muted) mb-2"}),e[20]||(e[20]=u("span",{class:"text-sm text-(--ui-text-muted)"},"Ê∑ªÂä†ÂØπËØùÊ®°Âûã",-1))])])])]),_:1},8,["modelValue"])]),t(k)?I("",!0):(d(),V("div",ma,[o(m,{color:"error",variant:"ghost",type:"button",onClick:e[7]||(e[7]=a=>R.value=!0)},{default:r(()=>[...e[22]||(e[22]=[M(" Âà†Èô§‰∏äÊ∏∏ÈÖçÁΩÆ ",-1)])]),_:1})]))]),_:1},8,["state"]),o(Se,{open:t(R),"onUpdate:open":e[9]||(e[9]=a=>ie(R)?R.value=a:null),title:"Á°ÆËÆ§Âà†Èô§",description:"Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™‰∏äÊ∏∏ÈÖçÁΩÆÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ",close:!1},{footer:r(()=>[u("div",pa,[o(m,{color:"error",onClick:Ae},{default:r(()=>[...e[25]||(e[25]=[M("Âà†Èô§",-1)])]),_:1}),o(m,{variant:"outline",color:"neutral",onClick:e[8]||(e[8]=a=>R.value=!1)},{default:r(()=>[...e[26]||(e[26]=[M("ÂèñÊ∂à",-1)])]),_:1})])]),_:1},8,["open"])]),_:1})}}});export{Fa as default};
